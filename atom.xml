<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>XWARTZ</title>
  
  <subtitle>To Be An Artist</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="http://github.com/xwartz/"/>
  <updated>2017-03-02T01:56:27.000Z</updated>
  <id>http://github.com/xwartz/</id>
  
  <author>
    <name>xwartz</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Debugging React Native</title>
    <link href="http://github.com/xwartz/2017/02/debugging-react-native/"/>
    <id>http://github.com/xwartz/2017/02/debugging-react-native/</id>
    <published>2017-02-22T02:11:54.000Z</published>
    <updated>2017-03-02T01:56:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ React Native çš„ä¸€ç‚¹è°ƒè¯•ç»éªŒ</p><a id="more"></a><p>React Native æ— ç–‘ç»™ç§»åŠ¨ç«¯å¼€å‘å¸¦æ¥æ•ˆç‡çš„æå‡ï¼Œæˆ‘ä»¬ç›®å‰çš„äº§å“ä¸­ï¼ŒiOS å’Œ Android ä»£ç å¤ç”¨ç‡åº”è¯¥åœ¨ 80~90%(ä¿å®ˆä¼°è®¡)ã€‚</p><p>è™½ç„¶ React Native æå‡äº†å¼€å‘æ•ˆç‡ï¼Œä½†åœ¨ debug æ—¶è¿˜æ˜¯æœ‰å¾ˆå¤šä¸çˆ½çš„åœ°æ–¹ã€‚</p><p>ä¸€äº›åŸºç¡€çš„è°ƒè¯•æ–¹æ³•å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ <a href="https://facebook.github.io/react-native/docs/debugging.html" target="_blank" rel="external">Debugging</a>ã€‚</p><p><a href="https://facebook.github.io/react-native/blog/2016/03/24/introducing-hot-reloading.html" target="_blank" rel="external">Hot Reloading</a> åº”è¯¥æ˜¯æˆ‘ç›®å‰æœ€å–œæ¬¢ RN çš„ä¸€ä¸ªåœ°æ–¹äº†å§ï¼Œå’Œ web ä¸€è‡´çš„å¼€å‘ä½“éªŒã€‚</p><p><a href="https://facebook.github.io/react-native/docs/debugging.html#chrome-developer-tools" target="_blank" rel="external">Debug JS Remotely</a> ä¹Ÿæ˜¯æ¯”è¾ƒåŸºç¡€çš„è°ƒè¯•æ–¹å¼ï¼Œå¯ä»¥åœ¨ Chrome DevTools æ‰“æ–­ç‚¹è°ƒè¯•ã€‚</p><p>ä¸æ¨èä½¿ç”¨ <code>react-native log-ios</code>ï¼Œè°ƒè¯•èµ·æ¥ä¸€ç‚¹éƒ½ä¸æ–¹ä¾¿ã€‚ç›´æ¥ <code>console.log</code> åœ¨ Chrome DevTools è°ƒè¯•ä¼šæ›´æ–¹ä¾¿ä¸€äº›ã€‚</p><p>ä½†æ˜¯ <code>console.log</code> ä¼šä½¿æ•´ä¸ªç¨‹åºå˜å¡é¡¿ï¼Œå°¤å…¶åœ¨ Android ä¸‹ï¼Œç•Œé¢å¡é¡¿æ— æ¯”ï¼Œæ‰€ä»¥ä¸å»ºè®®æ‰“å°æ‰€æœ‰ä¿¡æ¯ã€‚</p><p>å› æ­¤ï¼Œä»¥ä¸‹çš„ä¸€äº›æ–¹æ³•ä¸»è¦åœ¨äºæ€ä¹ˆå‡å°‘åœ¨ console æ‰“å°ä¿¡æ¯ï¼Œè€Œåˆèƒ½æ–¹ä¾¿çš„è°ƒè¯•ã€‚</p><h3 id="ä½¿ç”¨-window-store"><a href="#ä½¿ç”¨-window-store" class="headerlink" title="ä½¿ç”¨ window.store"></a>ä½¿ç”¨ window.store</h3><p><code>console.log</code> ä¼šæå¤§åœ°æ‹–ç´¯ JavaScript çº¿ç¨‹ï¼Œæ‰€ä»¥å¹¶ä¸æ¨èä½¿ç”¨ <code>redux-logger</code>ã€‚</p><p>è¦è·å– store çš„ä¿¡æ¯ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (isDebuggingInChrome) &#123;</div><div class="line">  <span class="built_in">window</span>.store = store</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é€šè¿‡ <code>store.getState()</code> çš„æ–¹å¼æ‰“å°æŸ¥çœ‹ <code>reducer</code> çš„çŠ¶æ€ã€‚</p><p><img src="https://ww2.sinaimg.cn/large/006tKfTcly1fd7r3rky7dj30oc0hmdho.jpg" alt=""></p><h3 id="åœ¨-Chrome-ä¸­æ˜¾ç¤ºç½‘ç»œè¯·æ±‚"><a href="#åœ¨-Chrome-ä¸­æ˜¾ç¤ºç½‘ç»œè¯·æ±‚" class="headerlink" title="åœ¨ Chrome ä¸­æ˜¾ç¤ºç½‘ç»œè¯·æ±‚"></a>åœ¨ Chrome ä¸­æ˜¾ç¤ºç½‘ç»œè¯·æ±‚</h3><p>æŸ¥çœ‹ RN æºç  <a href="https://github.com/facebook/react-native/blob/dba133a29194e300e9a2e9e6753f9d4e3a13c194/Libraries/Core/InitializeCore.js#L51">Libraries/Core/InitializeCore.js</a>ï¼Œæ³¨é‡Šä¸­å†™ç€ï¼š</p><blockquote><p>  /**</p><ul><li>Sets an objectâ€™s property. If a property with the same name exists, this will</li><li>replace it but maintain its descriptor configuration. By default, the property</li><li>will replaced with a lazy getter.<br>*</li><li>The original property value will be preserved as <code>original[PropertyName]</code> so</li><li>that, if necessary, it can be restored. For example, if you want to route</li><li>network requests through DevTools (to trace them):<br>*</li><li>global.XMLHttpRequest = global.originalXMLHttpRequest;<br>*</li><li>@see <a href="https://github.com/facebook/react-native/issues/934">https://github.com/facebook/react-native/issues/934</a><br>*/</li></ul></blockquote><p>åŸæ¥çš„ <code>XMLHttpRequest</code> è¢«æ”¹å†™æˆäº†  <code>originalXMLHttpRequest</code>ï¼Œ</p><p>æ‰€ä»¥è¦åœ¨ Chrome ä¸­æ˜¾ç¤º <code>network</code> åªéœ€è¦æ›¿æ¢ <code>XMLHttpRequest</code> ä¸º <code>originalXMLHttpRequest</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (__DEV__) &#123;</div><div class="line">  GLOBAL.XMLHttpRequest = GLOBAL.originalXMLHttpRequest || GLOBAL.XMLHttpRequest</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿™æ ·æœ‰å¯èƒ½ä¼šäº§ç”Ÿ <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">CORS</a>, Chrome ä¼šé™åˆ¶è·¨åŸŸè¯·æ±‚ã€‚</p><p>è¿™æ—¶è¦ä¹ˆåç«¯é…åˆä¸€ä¸‹å»é™¤é™åˆ¶ï¼Œè¦ä¹ˆä½¿ç”¨ <a href="https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi" target="_blank" rel="external">Allow-Control-Allow-Origin: *</a> æ’ä»¶ã€‚</p><p>è¿™æ ·å°±å¯ä»¥æ„‰å¿«çš„è°ƒè¯•ç½‘ç»œè¯·æ±‚äº†ï¼Œè€Œä¸ç”¨æ‰“å°å‡ºæ¥ï¼Œæ¯•ç«Ÿæ‰“å°å®åœ¨æ˜¯å¤ªå¡äº†ã€‚</p><p><img src="https://ww3.sinaimg.cn/large/006tKfTcly1fd7rux58ayj31da0myq9y.jpg" alt=""></p><h3 id="react-native-debugger"><a href="#react-native-debugger" class="headerlink" title="react-native-debugger"></a>react-native-debugger</h3><p>æ— æ„ä¸­çœ‹åˆ°è¿™ä¸ª repo <a href="https://github.com/jhen0409/react-native-debugger#react-native-debugger">react-native-debugger</a>ï¼Œ</p><p><img src="https://ww3.sinaimg.cn/large/006tKfTcgy1fd894emd5jj30x90nhaf5.jpg" alt=""></p><p>ä½¿ç”¨äº† electronï¼Œç«Ÿç„¶è¿˜æ³¨å…¥äº† React Inspector / Redux DevToolsï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ã€‚</p><p>ä¸çŸ¥é“æ•ˆæœå¦‚ä½•ï¼Œå€’æ˜¯å¯ä»¥çœ‹çœ‹æºç å­¦ä¹ ä¸‹ã€‚</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ç›®å‰ UI ä¸Šçš„è°ƒè¯•ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°ä»€ä¹ˆå¥½çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥åªèƒ½ç­‰ RN å›¢é˜Ÿçš„æ¨è¿›äº†ã€‚</p><p>å¸Œæœ› RN æ—©ç‚¹è¿æ¥ 1.0.0 releaseã€‚</p><p>æœ‰æ—¶é—´è¿˜æ˜¯è¦å¤šé˜…è¯» RN æºç æ‰å¥½ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://facebook.github.io/react-native/docs/performance" target="_blank" rel="external">doc performance</a><br><a href="https://facebook.github.io/react-native/docs/debugging" target="_blank" rel="external">doc debugging</a><br><a href="https://github.com/facebook/react-native">react-native</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨ React Native çš„ä¸€ç‚¹è°ƒè¯•ç»éªŒ&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
      <category term="react-native" scheme="http://github.com/xwartz/tags/react-native/"/>
    
  </entry>
  
  <entry>
    <title>2016 in review</title>
    <link href="http://github.com/xwartz/2017/01/2016-in-review/"/>
    <id>http://github.com/xwartz/2017/01/2016-in-review/</id>
    <published>2017-01-07T15:36:49.000Z</published>
    <updated>2017-01-08T01:21:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘çš„ 2016 åˆšç»“æŸæ–°å¼€å§‹ã€‚</p><h4 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h4><p>å¹´åˆçš„æ—¶å€™ï¼Œç¦»å¼€äº†ç¬¬ä¸€å®¶å…¬å¸ï¼Œ</p><p>å½“åˆå®ä¹ æ—¶ï¼Œä¸Šä¸‹ç­æ¥è¿‘ 3 å°æ—¶è¿˜å†å†åœ¨ç›®ã€‚</p><p>2 ä¸ªæœˆå‰ç¦»å¼€ç¬¬äºŒå®¶å…¬å¸ï¼Œè¿˜æ˜¯è¦æœ‰ç‚¹æŠ€æœ¯è¿½æ±‚çš„ã€‚</p><p>ç¦»å¼€ä¸€ä¸ªç†Ÿæ‚‰çš„ç¯å¢ƒï¼Œæ¯æ¬¡éƒ½æœ‰æ–°çš„è®¤çŸ¥ã€‚</p><p>å˜åŒ–æ‰èƒ½æœ‰æ›´å¤šå¯èƒ½æ€§ï¼Œæœ‰è¶£çš„æ˜¯ï¼Œ</p><p>åœ¨ä¸Šå®¶å…¬å¸é¢åŸºäº†åœ¨ github ä¸Šè®¤è¯†çš„äººï¼Œ</p><p>åœ¨ç°åœ¨çš„å…¬å¸å’ŒåŸæ¥å…¬å¸çš„ç«äº‰å¯¹æ‰‹æˆäº†åŒäº‹ã€‚</p><p>å¦‚æœæˆ‘ä¸€ç›´å¾…åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå°±ä¸ä¼šè®¤è¯†è¿™ä¹ˆäº›äººã€‚</p><p>Interesting.</p><h4 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h4><p><img src="https://ww3.sinaimg.cn/large/006tNbRwgw1fbcr5a5a2uj315i0b8goa.jpg" alt=""></p><p>è¿™æ˜¯æˆ‘æœ‰è´¦å·ä»¥æ¥ï¼Œgithub ä¸Šæœ€æ´»è·ƒçš„ä¸€å¹´ã€‚</p><blockquote><ul><li>å†™äº†ä¸å°‘åšå®¢æ–‡ç«  <a href="https://github.com/xwartz/blog">blog</a></li><li>å†™äº† hexo theme <a href="https://github.com/xwartz/hexo-theme-nuna">nuna</a> / <a href="https://github.com/xwartz/hexo-theme-nuna">pupa</a></li><li>å†™äº† douban.fm å®¢æˆ·ç«¯ <a href="https://github.com/xwartz/PupaFM">PupaFM</a></li><li>å†™äº† Sublime text plugin <a href="https://github.com/xwartz/Auto-Spacing">Auto-Spacing</a></li><li>å†™äº† github çš„å°è„šæœ¬ <a href="https://github.com/xwartz/robot">robot</a></li><li>å‚ä¸äº†ä¸å°‘å¼€æºé¡¹ç›®ï¼Œæäº†ä¸å°‘ pr è¢« merge</li><li>æ–°å·¥ä½œç–¯ç‹‚ç ä»£ç ä¸­</li></ul></blockquote><h4 id="React-Native"><a href="#React-Native" class="headerlink" title="React Native"></a>React Native</h4><p><img src="https://ww2.sinaimg.cn/large/006tNbRwgw1fbijg97gorj30m80bit9a.jpg" alt=""></p><p>æ–°å…¬å¸å…¥å‘äº† React Nativeï¼Œç†Ÿæ‚‰åŸç”Ÿä¸­ï¼ŒAndroid / iOS æœ‰çš„æã€‚</p><p>React Native ä¸€å¹´å‘å¸ƒäº† 100 å¤šä¸ªç‰ˆæœ¬ï¼Œç¤¾åŒºçš„æ´»è·ƒï¼Œè®©å®ƒæ¸æ¸ç¨³å®šã€‚</p><p>æœŸå¾… v1.0.0 çš„åˆ°æ¥ã€‚</p><h4 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h4><p>æ›´å¤šçš„ç¼–å†™è„šæœ¬è‡ªåŠ¨å¹²ä¸€äº›é‡å¤çš„æ´»ã€‚</p><p>èŠ±äº†æ›´å¤šæ—¶é—´å†™æµ‹è¯•ï¼ŒJest / Appiumï¼Œæ­å»º Jenkins Ciã€‚ </p><p>å†™æ›´å¤šçš„ Shell / Make è„šæœ¬ï¼Œæˆ‘å—å¤Ÿäº†æ¸£æ¸£ç½‘ç»œä¸‹çš„ node_modules ã€‚</p><h4 id="Code-Styles"><a href="#Code-Styles" class="headerlink" title="Code Styles"></a>Code Styles</h4><p><a href="https://github.com/feross/standard">standard</a> æˆä¸ºæ ‡é…ã€‚</p><p>ä¸å†å†™åˆ†å·ï¼Œåœ¨å›¢é˜Ÿå’Œä¸ªäººé¡¹ç›®ä¸­éƒ½å®è·µä¸­ã€‚</p><h4 id="è¯»ä¹¦"><a href="#è¯»ä¹¦" class="headerlink" title="è¯»ä¹¦"></a>è¯»ä¹¦</h4><p>è¯»äº†<a href="https://book.douban.com/people/samedie/collect" target="_blank" rel="external">å‡ æœ¬ä¹¦</a>ï¼Œä½†æ˜¯ä¼¼ä¹ä¹Ÿæ²¡è®°å¾—å¤šå°‘â€¦</p><p>å¸Œæœ›èƒ½é™ä¸‹å¿ƒè¯»ç‚¹ä¹¦ã€‚</p><h4 id="å‡ºç©"><a href="#å‡ºç©" class="headerlink" title="å‡ºç©"></a>å‡ºç©</h4><p>å‰å…¬å¸ç¦åˆ©ï¼Œå»äº†ä¸€è¶Ÿå¤§ç†ã€‚</p><p><img src="https://ww3.sinaimg.cn/large/006tNbRwgw1fbiivx13agj30yo0q0jvg.jpg" alt="å¤§ç†"></p><p>ä»å·¥ä½œä»¥æ¥ï¼Œè¿˜æ˜¯å¾ˆå°‘å‡ºå»ç©çš„ï¼Œå¸Œæœ›ä»Šå¹´èƒ½æœ‰æœºä¼šå‡ºå»èµ°èµ°ã€‚</p><h4 id="å–µ"><a href="#å–µ" class="headerlink" title="å–µ"></a>å–µ</h4><p>æˆä¸ºäº†ä¸€åé“²å±å®˜ã€‚</p><p><img src="https://ww3.sinaimg.cn/large/006tNbRwgw1fbiijlcmbgj315t15t0zb.jpg" alt="Hello world"></p><p>å–å–èŒï¼Œæˆ‘å¾ˆå¼€å¿ƒã€‚</p><p>ä»æ­¤æœ‰ ğŸ± é™ªæˆ‘çœ‹ç”µå½± ç ä»£ç ï¼Œhahahahaâ€¦</p><p>ç„¶è€Œç°å®æ˜¯ï¼Œ</p><p>å’¬äººã€æŠ“äººã€ä¸è®©ç¡è§‰â€¦</p><p>å¥¹åªä¼šæ£ä¹±ï¼Œæœ€ååªæœ‰äº’ç›¸ä¼¤å®³ ğŸ˜‚ã€‚</p><h4 id="2017"><a href="#2017" class="headerlink" title="2017"></a>2017</h4><p>å¸Œæœ›</p><p>ä¸è®¾é™ï¼Œæœ‰æ‰€è·ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æˆ‘çš„ 2016 åˆšç»“æŸæ–°å¼€å§‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å·¥ä½œ&quot;&gt;&lt;/a&gt;å·¥ä½œ&lt;/h4&gt;&lt;p&gt;å¹´åˆçš„æ—¶å€™ï¼Œç¦»å¼€äº†ç¬¬ä¸€å®¶å…¬å¸ï¼Œ&lt;/p&gt;
&lt;p&gt;å½“åˆå®ä¹ æ—¶ï¼Œä¸Šä¸‹ç­æ¥è¿‘ 3 å°æ—¶è¿˜å†å†åœ¨ç›®ã€‚&lt;/
      
    
    </summary>
    
    
      <category term="life" scheme="http://github.com/xwartz/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>Immutable.js ç¬”è®°</title>
    <link href="http://github.com/xwartz/2016/12/immutable-js/"/>
    <id>http://github.com/xwartz/2016/12/immutable-js/</id>
    <published>2016-12-27T15:46:37.000Z</published>
    <updated>2016-12-31T02:30:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>Immutable.js ä½¿ç”¨ç¬”è®°ã€‚</p><a id="more"></a><p>æ‰€æœ‰æ¶‰åŠåˆ°çš„æ–¹æ³•éƒ½å¯ä»¥åœ¨<a href="https://facebook.github.io/immutable-js/docs" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>æŸ¥åˆ°ï¼Œåªæ˜¯å®˜æ–¹æ–‡æ¡£æ™¦æ¶©éš¾æ‡‚ã€‚</p><p>æŸ¥çœ‹è½¬åŒ–åçš„ JavaScript åŸå‹ï¼Œæ‰“å¼€ console ä½¿ç”¨ <code>Immutable.toJS()</code> æˆ–è€…æŸ¥çœ‹ <code>_tail</code> å­—æ®µã€‚</p><h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>Immutable List ç±»ä¼¼ JavaScript arrayã€‚</p><h3 id="åˆ›å»º-List"><a href="#åˆ›å»º-List" class="headerlink" title="åˆ›å»º List"></a>åˆ›å»º List</h3><p><code>List()</code> ä¸ <code>List.of()</code> çš„ä¸åŒï¼š</p><ul><li><code>List.of()</code> - ä½œç”¨äº non-iterable æ•°æ®(å¦‚å‡½æ•°å‚æ•°ã€JavaScript å¯¹è±¡ã€å­—ç¬¦ä¸²)</li><li><code>List()</code> - ä½œç”¨äº iterable æ•°æ®(æ•°ç»„ã€Immutable å¯¹è±¡(List, Map, Setâ€¦)ã€å­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦)</li></ul><p><strong>æ³¨æ„ï¼šJavaScript ä¸­ string æ˜¯ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#Builtin_iterables" target="_blank" rel="external">iterable object</a>ã€‚</strong></p><h4 id="å‡½æ•°å‚æ•°"><a href="#å‡½æ•°å‚æ•°" class="headerlink" title="å‡½æ•°å‚æ•°"></a>å‡½æ•°å‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> args = Immutable.List.of(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>)</div><div class="line"></div><div class="line"><span class="comment">// Output: </span></div><div class="line"><span class="built_in">Array</span> [</div><div class="line">  <span class="string">'a'</span>,</div><div class="line">  <span class="string">'b'</span>,</div><div class="line">  <span class="string">'c'</span></div><div class="line">]</div></pre></td></tr></table></figure><h4 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h4><p><code>List.of()</code> ä¼šæŠŠå¯¹è±¡è½¬ä¸º List çš„ä¸€ä¸ªå…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"><span class="keyword">const</span> list = Immutable.List.of(obj)</div><div class="line"></div><div class="line"><span class="comment">// Output: </span></div><div class="line"><span class="built_in">Array</span> [</div><div class="line">  <span class="built_in">Object</span> &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">    <span class="attr">b</span>: <span class="number">2</span></div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> str = <span class="string">'abc'</span></div><div class="line"><span class="keyword">const</span> list = Immutable.List.of(str)</div><div class="line"></div><div class="line"><span class="comment">// Output: </span></div><div class="line"><span class="built_in">Array</span> [</div><div class="line">  <span class="string">'a,b,c'</span></div><div class="line">]</div></pre></td></tr></table></figure><p>å› ä¸º JavaScript ä¸­ string æ˜¯ iterable çš„ï¼Œæ‰€ä»¥æƒ³æŠŠæ•´ä¸ª string å½“åšä¸€ä¸ªæ•´ä½“çš„å°±ä½¿ç”¨ <code>List.of()</code>ï¼Œ<code>List()</code> è½¬åŒ–å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> str = <span class="string">'abc'</span></div><div class="line"><span class="keyword">const</span> list = Immutable.List(str)</div><div class="line"></div><div class="line"><span class="comment">// Output: </span></div><div class="line"><span class="built_in">Array</span> [</div><div class="line">  <span class="string">'a'</span>,</div><div class="line">  <span class="string">'b'</span>,</div><div class="line">  <span class="string">'c'</span></div><div class="line">]</div></pre></td></tr></table></figure><h3 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a>Iterator</h3><p>ES6 ç°æœ‰çš„ iterators ç±»å‹:</p><ul><li><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="external">String</a></li><li><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">Array</a></li><li><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="external">TypedArray</a></li><li><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="external">Map</a></li><li><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a></li></ul><p>å½“ç„¶ä¹Ÿå¯ä»¥è‡ªè¡Œæ„å»º <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Iteration_protocols" target="_blank" rel="external">iterable</a>ã€‚</p><h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> num = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="keyword">const</span> list = Immutable.List(num)</div><div class="line"></div><div class="line"><span class="comment">// Output: </span></div><div class="line"><span class="built_in">Array</span> [</div><div class="line">  <span class="number">1</span>,</div><div class="line">  <span class="number">2</span>,</div><div class="line">  <span class="number">3</span></div><div class="line">]</div></pre></td></tr></table></figure><h4 id="åµŒå¥—æ•°ç»„"><a href="#åµŒå¥—æ•°ç»„" class="headerlink" title="åµŒå¥—æ•°ç»„"></a>åµŒå¥—æ•°ç»„</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> num = [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>]]</div><div class="line"><span class="keyword">const</span> list = Immutable.List(num)</div><div class="line"></div><div class="line">Immutable.List.isList(list.getIn([<span class="number">1</span>])) <span class="comment">// false</span></div></pre></td></tr></table></figure><p><code>Immutable.List</code> åªè½¬åŒ–ä¸€å±‚ï¼Œè€Œ <code>Immutable.fromJS</code> æ”¯æŒåµŒå¥—è½¬åŒ–ï¼Œå°†æ¯ä¸€å±‚æ•°æ®éƒ½è½¬ä¸º Immutableã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> num = [<span class="number">1</span>,[<span class="number">2</span>,<span class="number">3</span>]]</div><div class="line"><span class="keyword">const</span> list = Immutable.fromJS(num)</div><div class="line"></div><div class="line">Immutable.List.isList(list.getIn([<span class="number">1</span>])) <span class="comment">// true</span></div></pre></td></tr></table></figure><h3 id="Immutable-js-ç±»å‹"><a href="#Immutable-js-ç±»å‹" class="headerlink" title="Immutable.js ç±»å‹"></a>Immutable.js ç±»å‹</h3><p>Immutable ä¸­ iterable çš„ç±»å‹æœ‰ï¼š<code>List</code>, <code>Map</code>, <code>OrderedMap</code>, <code>Set</code>, <code>OrderedSet</code>, <code>Stack</code>, <code>Record</code>ã€‚</p><h4 id="List-1"><a href="#List-1" class="headerlink" title="List"></a>List</h4><p><code>List()</code> ä¸€ä¸ª <code>List</code> å¯¹è±¡å’ŒåŸæ¥ç›¸ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = Immutable.List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line"><span class="keyword">const</span> newList = Immutable.List(list)</div><div class="line"></div><div class="line">list.equals(newList) <span class="comment">// true</span></div></pre></td></tr></table></figure><h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p><code>List()</code> ä¼šå°† <code>Map</code> key/value è½¬ä¸ºä¸€ä¸ªæ•°ç»„å…ƒç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> map = Immutable.Map(&#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;)</div><div class="line"><span class="keyword">const</span> list = Immutable.List(map)</div><div class="line"></div><div class="line"><span class="comment">// Output: </span></div><div class="line"><span class="built_in">Array</span> [</div><div class="line">  [<span class="string">'a'</span>, <span class="number">1</span>,],</div><div class="line">  [<span class="string">'b'</span>, <span class="number">2</span>]</div><div class="line">]</div></pre></td></tr></table></figure><h3 id="get-set"><a href="#get-set" class="headerlink" title="get() / set()"></a>get() / set()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = Immutable.List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line">list.get(<span class="number">0</span>) <span class="comment">// 1</span></div><div class="line">list.get(<span class="number">-3</span>) <span class="comment">// 1 åå‘</span></div></pre></td></tr></table></figure><p><code>getIn</code> è®¿é—®åµŒå¥—æ•°ç»„çš„æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = Immutable.fromJS([<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>]])</div><div class="line">list.getIn([<span class="number">1</span>, <span class="number">0</span>]) <span class="comment">// 2</span></div></pre></td></tr></table></figure><p><code>set</code> ä¸ <code>setIn</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = Immutable.List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line">list.set(<span class="number">0</span>, <span class="string">'a'</span>) <span class="comment">// ['a', 2, 3]</span></div><div class="line">list.set(<span class="number">4</span>, <span class="string">'a'</span>) <span class="comment">// [1, 2, 3, undefined, 'a']</span></div><div class="line">list.set(<span class="number">-3</span>, <span class="string">'b'</span>) <span class="comment">// ['b', 2, 3]</span></div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = Immutable.fromJS([<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>]])</div><div class="line">list.setIn([<span class="number">1</span>, <span class="number">0</span>], <span class="string">'a'</span>) <span class="comment">// [1, ['a', 3]]</span></div></pre></td></tr></table></figure><h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p><code>merge()</code> æ˜¯æ ¹æ®ç´¢å¼•å€¼çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list1 = Immutable.List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line"><span class="keyword">const</span> list2 = Immutable.List([<span class="string">'a'</span>, <span class="string">'b'</span>])</div><div class="line"></div><div class="line">list1.merge(list2) <span class="comment">// ['a', 'b', 3]</span></div></pre></td></tr></table></figure><p><code>mergeWith()</code> æä¾›è§£å†³å†²çªçš„æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list1 = Immutable.List([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line"><span class="keyword">const</span> list1 = Immutable.fromJS([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</div><div class="line">list.mergeWith(<span class="function">(<span class="params">prev, next, index</span>) =&gt;</span> prev === <span class="number">1</span> ? prev : next, list1) <span class="comment">// [1, 'b', 'c']</span></div></pre></td></tr></table></figure><p><code>mergeDeep()</code> ä½œç”¨åµŒå¥—æ•°ç»„æ¯å±‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = Immutable.fromJS([<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>])</div><div class="line"><span class="keyword">const</span> list1 = Immutable.fromJS([<span class="string">'a'</span>, [<span class="string">'b'</span>, <span class="string">'c'</span>]])</div><div class="line">list.mergeDeep(list1) <span class="comment">// ['a', ['b', 'c'], 4]</span></div></pre></td></tr></table></figure><p><code>mergeDeepWith()</code> ä½œç”¨åµŒå¥—æ•°ç»„æ¯å±‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> list = Immutable.fromJS([<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>])</div><div class="line"><span class="keyword">const</span> list1 = Immutable.fromJS([<span class="string">'a'</span>, [<span class="string">'b'</span>, <span class="string">'c'</span>]])</div><div class="line">list.mergeDeepWith(<span class="function">(<span class="params">prev, next, index</span>) =&gt;</span> prev === <span class="number">1</span> ? prev : next, list1) <span class="comment">// [1, ['b', 'c'], 4]</span></div></pre></td></tr></table></figure><h2 id="Map-1"><a href="#Map-1" class="headerlink" title="Map"></a>Map</h2><h3 id="åˆ›å»º-Map"><a href="#åˆ›å»º-Map" class="headerlink" title="åˆ›å»º Map"></a>åˆ›å»º Map</h3><h4 id="Map-of-ä½œç”¨äºå‡½æ•°å‚æ•°"><a href="#Map-of-ä½œç”¨äºå‡½æ•°å‚æ•°" class="headerlink" title="Map.of() ä½œç”¨äºå‡½æ•°å‚æ•°"></a><code>Map.of()</code> ä½œç”¨äºå‡½æ•°å‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> map = Immutable.Map.of(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>) <span class="comment">// &#123; a: 'b', c: 'd' &#125;</span></div></pre></td></tr></table></figure><h4 id="Map-2"><a href="#Map-2" class="headerlink" title="Map()"></a><code>Map()</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> map1 = Immutable.Map([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]]) <span class="comment">// &#123; a: 'b', c: 'd' &#125;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> map2 = Immutable.Map(&#123; <span class="attr">a</span>: <span class="string">'b'</span>, <span class="attr">c</span>: <span class="string">'d'</span> &#125;) <span class="comment">// &#123; a: 'b', c: 'd' &#125;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> map3 = Immutable.Map(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">'c'</span> &#125; &#125;) <span class="comment">// &#123; a: &#123; b: 'c' &#125; &#125;</span></div><div class="line">Immutable.Map.isMap(map3.get(<span class="string">'a'</span>)) <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> map4 = Immutable.fromJS(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">'c'</span> &#125; &#125;) <span class="comment">// &#123; a: &#123; b: 'c' &#125; &#125;</span></div><div class="line">Immutable.Map.isMap(map4.get(<span class="string">'a'</span>)) <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> map5 = Immutable.Map(Immutable.List([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]])) <span class="comment">// &#123; a: 'b', c: 'd' &#125;</span></div></pre></td></tr></table></figure><h3 id="get-set-1"><a href="#get-set-1" class="headerlink" title="get() / set()"></a>get() / set()</h3><p><code>get</code> / <code>getIn</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> map2 = Immutable.Map(&#123; <span class="attr">a</span>: <span class="string">'b'</span>, <span class="attr">c</span>: <span class="string">'d'</span> &#125;) <span class="comment">// &#123; a: 'b', c: 'd' &#125;</span></div><div class="line">map2.get(<span class="string">'a'</span>) <span class="comment">// 'b'</span></div><div class="line"></div><div class="line"><span class="comment">// get çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥ä½œä¸ºå¤‡é€‰é¡¹ï¼Œå½“æ²¡æœ‰è·å–åˆ°çš„æ—¶å€™ï¼Œè¿”å›è¯¥å€¼</span></div><div class="line">map2.get(<span class="string">'e'</span>, <span class="number">1</span>) <span class="comment">// 1</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> map4 = Immutable.fromJS(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">'c'</span> &#125; &#125;) <span class="comment">// &#123; a: &#123; b: 'c' &#125; &#125;</span></div><div class="line">map4.getIn([<span class="string">'a'</span>, <span class="string">'b'</span>]) <span class="comment">// 'c'</span></div></pre></td></tr></table></figure><p><code>set</code> / <code>setIn</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> map2 = Immutable.Map(&#123; <span class="attr">a</span>: <span class="string">'b'</span>, <span class="attr">c</span>: <span class="string">'d'</span> &#125;) <span class="comment">// &#123; a: 'b', c: 'd' &#125;</span></div><div class="line">map2.set(<span class="string">'e'</span>, <span class="string">'f'</span>) <span class="comment">// &#123; a: 'b', c: 'd', e: 'f' &#125;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> map4 = Immutable.fromJS(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="string">'c'</span> &#125; &#125;) <span class="comment">// &#123; a: &#123; b: 'c' &#125; &#125;</span></div><div class="line">map4.setIn([<span class="string">'a'</span>, <span class="string">'b'</span>], <span class="string">'e'</span>) <span class="comment">// &#123; a: &#123; b: 'e' &#125; &#125;</span></div></pre></td></tr></table></figure><h4 id="merge-1"><a href="#merge-1" class="headerlink" title="merge"></a>merge</h4><p><code>merge()</code>ã€<code>mergeWith()</code>ã€ <code>mergeDeep()</code>ã€<code>mergeDeepWith()</code> ä¸ <code>List</code> ç±»ä¼¼ã€‚</p><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><p><code>Immutable.js</code> æ–‡æ¡£ä¸­æä¾›çš„æ–¹æ³•è¿˜æœ‰å¾ˆå¤šï¼Œå¯ä»¥è‡ªå·±æŸ¥çœ‹ã€‚</p><p>æ›´å¤æ‚çš„æ“ä½œï¼Œæ¨èé˜…è¯»è¿™ç¯‡æ–‡ç«  <a href="http://untangled.io/advanced-immutable-js-recipes-how-to-use-immutable-js-in-the-real-world/" target="_blank" rel="external">Advanced Immutable.js Recipes: How to use Immutable.js in the real world</a>ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="http://untangled.io/immutable-js-an-introduction-with-examples-written-for-humans" target="_blank" rel="external">Immutable.js: An Introduction with examples written for humans</a><br><a href="https://facebook.github.io/immutable-js/docs" target="_blank" rel="external">Immutable.js docs</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Immutable.js ä½¿ç”¨ç¬”è®°ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
      <category term="Immutable.js" scheme="http://github.com/xwartz/tags/Immutable-js/"/>
    
  </entry>
  
  <entry>
    <title>ä¸º React Native åº”ç”¨å†™æµ‹è¯• II</title>
    <link href="http://github.com/xwartz/2016/12/testing-a-react-native-app-II/"/>
    <id>http://github.com/xwartz/2016/12/testing-a-react-native-app-II/</id>
    <published>2016-12-18T12:58:41.000Z</published>
    <updated>2017-02-16T15:57:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>Component æµ‹è¯•</p><a id="more"></a><p>è¿™æ˜¯ <a href="/blog/tags/react-native">&lt;ä¸º React Native åº”ç”¨å†™æµ‹è¯•&gt;</a> çš„ç³»åˆ—æ–‡ç« çš„ç¬¬äºŒç¯‡ï¼Œä¸Šä¸€ç¯‡è¯·çœ‹<a href="/blog/2016/11/testing-a-react-native-app">ä¸º React Native åº”ç”¨å†™æµ‹è¯• I</a>ã€‚</p><p>è¿™ç¯‡ä¸»è¦ä¼šé›†ä¸­åœ¨ <code>Component</code> å±‚çš„å•å…ƒæµ‹è¯•ç¼–å†™ã€‚</p><p>æ³¨æ„ï¼š<em>ä»¥ä¸‹æ¶‰åŠåˆ°çš„ React Native ç‰ˆæœ¬ä¸º 0.36ï¼Œå®˜æ–¹ç‰ˆæœ¬æ¨è¿›å¾ˆå¿«ï¼Œæœ€æ–°å¯èƒ½å‡ºç°åå·®ã€‚</em></p><p>å¾…â€¦</p><p>update: 2017-02-16, 23:54</p><p>å»å¹´å¹´åº•ä¸€æ®µæ—¶é—´ç¡®å®å¤ªå¿™äº†ï¼Œå¯¼è‡´æœ€åéƒ½æ²¡æœ‰æ—¶é—´å†™ Component çš„æµ‹è¯•ï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« è¦å¤­æŠ˜äº†ã€‚</p><p>æ¨èå»çœ‹ redux çš„æ–‡æ¡£ <a href="https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md#components">Writing Tests</a>ï¼Œä»¥åŠæ–‡æœ«çš„å‚è€ƒé“¾æ¥ã€‚</p><p>Happy Coding.</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://facebook.github.io/jest/docs/tutorial-react-native" target="_blank" rel="external">https://facebook.github.io/jest/docs/tutorial-react-native</a><br><a href="https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md">https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md</a><br><a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-i-snapshots-come-into-play-68ba19b1b9fe#.xreydjkil" target="_blank" rel="external">Testing React Native with the <em>new</em> Jestâ€Šâ€”â€ŠPart I</a><br><a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-ii-redux-snapshots-for-your-actions-and-reducers-8559f6f8050b#.gk3s28gar" target="_blank" rel="external">Testing React Native with the <em>new</em> Jestâ€Šâ€”â€ŠPart II</a><br><a href="https://www.smashingmagazine.com/2016/08/test-automation-frameworks-for-react-native-apps/" target="_blank" rel="external">Diverse Test-Automation Frameworks For React Native Apps</a><br><a href="https://github.com/admc/wd">https://github.com/admc/wd</a><br><a href="https://github.com/appium/appium">https://github.com/appium/appium</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Component æµ‹è¯•&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
      <category term="react-native" scheme="http://github.com/xwartz/tags/react-native/"/>
    
      <category term="testing" scheme="http://github.com/xwartz/tags/testing/"/>
    
  </entry>
  
  <entry>
    <title>ä¸º React Native åº”ç”¨å†™æµ‹è¯• I</title>
    <link href="http://github.com/xwartz/2016/11/testing-a-react-native-app/"/>
    <id>http://github.com/xwartz/2016/11/testing-a-react-native-app/</id>
    <published>2016-11-18T12:58:41.000Z</published>
    <updated>2016-12-31T02:31:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¼šæ˜¯ä¸€ç³»åˆ—çš„æ–‡ç« ï¼Œæ¥ä»‹ç»å¦‚ä½•ä¸º React Native App å†™æµ‹è¯•(åŒ…æ‹¬ Unit Testing å’Œ Functional Testing)ä»¥åŠé‡åˆ°çš„ä¸€äº›å‘ã€‚</p><a id="more"></a><p>ä½¿ç”¨ React Native å¼€å‘æœ‰ä¸€äº›æ—¥å­äº†ï¼Œæœ€è¿‘åœ¨è¡¥ä¸€äº›å•å…ƒæµ‹è¯•ï¼Œèµ¶å‘å¸ƒç•™ä¸‹çš„æŠ€æœ¯å€ºâ€¦</p><p>è¿™æ˜¯ <a href="/blog/tags/react-native">&lt;ä¸º React Native åº”ç”¨å†™æµ‹è¯•&gt;</a> çš„ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œå¸Œæœ›èƒ½ä¿æŒæ›´æ–°å§ã€‚</p><p>è¿™ç¯‡ä¸»è¦ä¼šé›†ä¸­åœ¨ <code>Action</code> å’Œ <code>Reducer</code> å±‚çš„å•å…ƒæµ‹è¯•ç¼–å†™ã€‚</p><p>æ³¨æ„ï¼š<em>ä»¥ä¸‹æ¶‰åŠåˆ°çš„ React Native ç‰ˆæœ¬ä¸º 0.36ï¼Œå®˜æ–¹ç‰ˆæœ¬æ¨è¿›å¾ˆå¿«ï¼Œæœ€æ–°å¯èƒ½å‡ºç°åå·®ã€‚</em></p><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><p>æˆ‘ä»¬é€‰ç”¨äº† <a href="https://facebook.github.io/jest/" target="_blank" rel="external"><code>Jest</code></a> æ¥ç¼–å†™ï¼Œä¼¼ä¹ä¹Ÿæ²¡æœ‰å…¶ä»–ä»€ä¹ˆå¯é€‰æ‹©çš„äº†ï¼Œæ¯•ç«Ÿéƒ½æ˜¯ FB å®¶çš„ï¼Œè€Œä¸”å®˜æ–¹æ¨èï¼Œå€¼å¾—ä¿¡èµ–ã€‚</p><p>åŸºæœ¬çš„é…ç½®çœ‹<a href="https://facebook.github.io/jest/docs/tutorial-react-native" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>å³å¯ã€‚</p><p>è¿™é‡Œæœ‰ç‚¹éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå¦‚æœä½ åœ¨ä»£ç ä¸­ä½¿ç”¨äº† <code>@providesModule</code>, é‚£ä¹ˆåœ¨ <code>package.json</code> æ–‡ä»¶ä¸­éœ€è¦ä»¥ä¸‹é…ç½®:</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">"jest": &#123;</div><div class="line">    "preset": "jest-react-native",</div><div class="line">    "haste": &#123;</div><div class="line">      "defaultPlatform": "ios",</div><div class="line">      "platforms": [</div><div class="line">        "android",</div><div class="line">        "ios"</div><div class="line">      ],</div><div class="line">      "providesModuleNodeModules": [</div><div class="line">        "react",</div><div class="line">        "react-native"</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  &#125;,</div></pre></td></tr></table></figure><h3 id="Mock"><a href="#Mock" class="headerlink" title="Mock"></a>Mock</h3><p>åœ¨ä¸º React Native å†™æµ‹è¯•ä»£ç ä¸­æœ€éº»çƒ¦çš„äº‹ï¼Œå°±æ˜¯è¦ä¸åœçš„ <code>mock</code>ã€‚</p><p>è¿™é‡Œçš„ <code>mock</code> æ¶‰åŠåˆ°ä¸¤æ–¹é¢ï¼šæ™®é€šçš„æ•°æ® mock å’Œ mock moduleã€‚</p><p>æ•°æ® mock å¾ˆå¥½ç†è§£ï¼Œæ¯”å¦‚ A å‡½æ•° <code>const A = (a) =&gt;  a + 1</code>ï¼Œå†™æµ‹è¯•æ—¶ï¼Œåªéœ€è¦ mock ä¸€ä¸‹ a å³å¯ã€‚</p><p><code>mock module</code> æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å› ä¸ºå†™ RN é¡¹ç›®æ—¶ï¼Œä¼šå¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œè€Œé‚£äº›ç»„ä»¶å¯èƒ½æ¶‰åŠåˆ°äº† <code>native</code> å±‚ä»£ç ï¼Œ<code>Jest</code> ç¯å¢ƒå¹¶ä¸èƒ½æ‰§è¡Œè¯¥ä»£ç ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡ mock çš„æ–¹å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨äº† <code>jpush-react-native</code>ï¼Œå¯ä»¥å¦‚ä¸‹æ–¹å¼ mock:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">jest.mock(<span class="string">'jpush-react-native'</span>, () =&gt; (&#123;</div><div class="line">  <span class="attr">getDeviceLocale</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'zh-CN'</span>,</div><div class="line">  <span class="attr">getUniqueID</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'deviceToken'</span>,</div><div class="line">  <span class="attr">getReadableVersion</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'1.0'</span>,</div><div class="line">  <span class="attr">getSystemVersion</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'10.0.0'</span>,</div><div class="line">  ...</div><div class="line">&#125;))</div></pre></td></tr></table></figure><p>æ€»çš„æ¥è¯´ï¼Œmock å…¶å®ä¹Ÿè¿˜ç®—æŒºæ–¹ä¾¿çš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://facebook.github.io/jest/docs/tutorial-react-native#mock-native-modules-using-jestmock" target="_blank" rel="external">æ–‡æ¡£</a>ã€‚</p><p>æ­¤å¤–ï¼Œæ¶‰åŠåˆ°ç½‘ç»œè¯·æ±‚çš„ä¹Ÿéœ€è¦ mock ä¸€ä¸‹ï¼Œè¿™é‡Œæ¨è <a href="https://github.com/node-nock/nock">nock</a>ã€‚</p><h3 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h3><p>ä¸ºäº†æ–¹ä¾¿ç®¡ç†çŠ¶æ€ï¼Œé¡¹ç›®ä¸­å¼•å…¥äº† <a href="https://github.com/reactjs/redux"><code>Redux</code></a>ï¼Œéœ€è¦å¯¹æ­¤ç›¸å…³åšå•å…ƒæµ‹è¯•ã€‚</p><h4 id="Action-Creators"><a href="#Action-Creators" class="headerlink" title="Action Creators"></a>Action Creators</h4><p>åŒæ­¥ <code>Action</code> çš„æµ‹è¯•éå¸¸ç®€å•ï¼Œå› ä¸ºå°±æ˜¯çº¯å‡½æ•°æµ‹è¯•ï¼Œç›´æ¥æ‹¿<a href="https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md#action-creators">å®˜æ–¹ä¾‹å­</a>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addTodo</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'ADD_TODO'</span>,</div><div class="line">    text</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æµ‹è¯•ç¼–å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">'../../actions/TodoActions'</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">'../../constants/ActionTypes'</span></div><div class="line"></div><div class="line">describe(<span class="string">'actions'</span>, () =&gt; &#123;</div><div class="line">  it(<span class="string">'should create an action to add a todo'</span>, () =&gt; &#123;</div><div class="line">    <span class="keyword">const</span> text = <span class="string">'Finish docs'</span></div><div class="line">    <span class="keyword">const</span> expectedAction = &#123;</div><div class="line">      <span class="attr">type</span>: types.ADD_TODO,</div><div class="line">      text</div><div class="line">    &#125;</div><div class="line">    expect(actions.addTodo(text)).toEqual(expectedAction)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure><h4 id="Async-Action-Creators"><a href="#Async-Action-Creators" class="headerlink" title="Async Action Creators"></a>Async Action Creators</h4><p>å¼‚æ­¥ action é€šå¸¸ä¼šä½¿ç”¨ <a href="https://github.com/gaearon/redux-thunk">redux-thunk</a> æˆ–è€…å…¶ä»–ä¸€äº› <code>middleware</code>ï¼Œæ‰€ä»¥éœ€è¦ mock ä¸€ä¸‹ storeï¼Œæ¨è <a href="https://github.com/arnaudbenard/redux-mock-store">redux-mock-store</a>ã€‚</p><p>å¦å¤–ï¼Œå¯¹äºç½‘ç»œè¯·æ±‚ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ <a href="https://github.com/node-nock/nock">nock</a> æ¥ mock å„ç§ç½‘ç»œçŠ¶æ€ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ RN ä¸­ï¼Œ<code>fetch</code> ä½¿ç”¨çš„æ˜¯ <a href="https://github.com/github/fetch">whatwg-fetch</a>ï¼Œå¹¶ä¸” <code>XMLHttpRequest</code> æ˜¯åœ¨<a href="https://github.com/facebook/react-native/blob/master/Libraries/Network/XMLHttpRequest.js">åº•å±‚</a> è‡ªå·±å°è£…çš„ã€‚</p><p>åœ¨ <code>Jest</code> ä¸­æ— æ³•ä½¿ç”¨ï¼Œ<code>Jest</code> æ‰§è¡Œç¯å¢ƒæ˜¯ <code>Nodejs</code>ï¼Œæ‰€ä»¥è¿˜éœ€è¦ <code>mock</code> ä¸€ä¸‹ã€‚</p><p><code>__mocks__/fetch.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * @providesModule __mocks__/fetch</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="keyword">import</span> nodeFetch <span class="keyword">from</span> <span class="string">'node-fetch'</span></div><div class="line"></div><div class="line"><span class="comment">// Mocking the global.fetch included in React Native</span></div><div class="line">global.fetch = nodeFetch</div></pre></td></tr></table></figure><p><code>__mocks__/xhr.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * @providesModule __mocks__/xhr</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="keyword">import</span> xmlhttprequest <span class="keyword">from</span> <span class="string">'xmlhttprequest'</span></div><div class="line">jest.mock(<span class="string">'XMLHttpRequest'</span>, () =&gt; xmlhttprequest.XMLHttpRequest)</div></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨ <code>jest.mock</code> æ˜¯å› ä¸ºåœ¨ RN <a href="https://github.com/facebook/react-native/blob/master/Libraries/Network/XMLHttpRequest.js#L9">XMLHttpRequest.js</a> ä¸­æ³¨å†Œäº† <code>@providesModule XMLHttpRequest</code>ï¼Œç„¶åå„ç§ <code>import XMLHttpRequest from XMLHttpRequest</code> å¼•å…¥ä½¿ç”¨ï¼Œè€Œ fetch æ˜¯å½“åšå…¨å±€å˜é‡ä½¿ç”¨çš„ã€‚</p><p>æ‰€ä»¥ <code>mock store</code> å¯èƒ½æ˜¯è¿™æ ·å­çš„ï¼š</p><p><code>redux-mock-store.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * @providesModule __mocks__/redux-mock-store</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">'__mocks__/fetch'</span>)</div><div class="line"><span class="keyword">import</span> configureMockStore <span class="keyword">from</span> <span class="string">'redux-mock-store'</span></div><div class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">'redux-thunk'</span></div><div class="line"><span class="keyword">import</span> reducers <span class="keyword">from</span> <span class="string">'store/reducers'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> middlewares = [thunk]</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> initStore = configureMockStore(middlewares)</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> initStore(reducers(&#123;&#125;, &#123; <span class="attr">type</span>: <span class="string">'__mocks__'</span> &#125;))</div></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§ <code>Redux</code> å®˜æ–¹æ–‡æ¡£æ¥å†™<a href="https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md#async-action-creators">å¼‚æ­¥ action çš„æµ‹è¯•</a>äº†ã€‚</p><h4 id="Reducers"><a href="#Reducers" class="headerlink" title="Reducers"></a>Reducers</h4><p>å°† <code>Action</code> å’Œ <code>Reducer</code> ç‹¬ç«‹å‡ºæ¥å†™å•å…ƒæµ‹è¯•ä¹‹åï¼Œ<code>Reducer</code> çš„æµ‹è¯•å°±å˜å¾—å¾ˆç®€å•äº†ï¼Œç›´æ¥æŒ‰ç…§<a href="https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md#reducers">å®˜æ–¹ä¾‹å­</a>æ¥å†™å°± OK äº†ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://facebook.github.io/jest/docs/tutorial-react-native" target="_blank" rel="external">https://facebook.github.io/jest/docs/tutorial-react-native</a><br><a href="https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md">https://github.com/reactjs/redux/blob/master/docs/recipes/WritingTests.md</a><br><a href="https://github.com/gaearon/redux-thunk">https://github.com/gaearon/redux-thunk</a><br><a href="https://github.com/arnaudbenard/redux-mock-store">https://github.com/arnaudbenard/redux-mock-store</a><br><a href="https://github.com/node-nock/nock">https://github.com/node-nock/nock</a><br><a href="https://github.com/bitinn/node-fetch">https://github.com/bitinn/node-fetch</a><br><a href="https://github.com/driverdan/node-XMLHttpRequest">https://github.com/driverdan/node-XMLHttpRequest</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¼šæ˜¯ä¸€ç³»åˆ—çš„æ–‡ç« ï¼Œæ¥ä»‹ç»å¦‚ä½•ä¸º React Native App å†™æµ‹è¯•(åŒ…æ‹¬ Unit Testing å’Œ Functional Testing)ä»¥åŠé‡åˆ°çš„ä¸€äº›å‘ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
      <category term="react-native" scheme="http://github.com/xwartz/tags/react-native/"/>
    
      <category term="testing" scheme="http://github.com/xwartz/tags/testing/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Mac ä¸­å®‰è£… CocoaPods</title>
    <link href="http://github.com/xwartz/2016/10/install-cocoapod-on-mac/"/>
    <id>http://github.com/xwartz/2016/10/install-cocoapod-on-mac/</id>
    <published>2016-10-14T15:45:00.000Z</published>
    <updated>2016-11-18T12:51:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>CocoaPods ä¸º iOS ç¨‹åºæä¾›ä¾èµ–ç®¡ç†çš„å·¥å…·ï¼Œç±»ä¼¼ Node.js çš„ npm ã€‚</p><a id="more"></a><p>æœ€è¿‘è¦å¼€å§‹æ <a href="https://github.com/facebook/react-native">react-native</a>ï¼Œå®‰è£… <a href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a> æ—¶ï¼Œé‡åˆ°ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹ã€‚</p><p>æ‰§è¡Œ <code>sudo gem install cocoapods</code> å‘½ä»¤æ—¶ï¼ŒæŠ¥äº†å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ERROR: Error installing cocoapods: </div><div class="line">activesupport requires Ruby version &gt;= 2.2.2.</div></pre></td></tr></table></figure><p>ruby ç‰ˆæœ¬å¤ªä½äº†ï¼ŒæŸ¥çœ‹å½“å‰ <code>ruby -v</code> ç‰ˆæœ¬ï¼š <code>ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]</code>ã€‚</p><h3 id="å‡çº§-ruby-ç‰ˆæœ¬"><a href="#å‡çº§-ruby-ç‰ˆæœ¬" class="headerlink" title="å‡çº§ ruby ç‰ˆæœ¬"></a>å‡çº§ ruby ç‰ˆæœ¬</h3><p>å®‰è£… rvm:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl -L get.rvm.io | bash -s stable</div><div class="line">source ~/.rvm/scripts/rvm</div></pre></td></tr></table></figure><p>å®‰è£… ruby ç‰ˆæœ¬:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rvm list known</div><div class="line">rvm install ruby-2.3.0</div></pre></td></tr></table></figure><p>ç»§ç»­æŠ¥é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Error running â€˜requirements_osx_brew_update_system ruby-2.2.2â€™, </div><div class="line">showing last 15 lines of /Users/jolie/.rvm/log/1471244386_ruby-2.2.2/update_system.log </div><div class="line">https://github.com/Homebrew/homebrew/wiki/Common-Issues </div><div class="line">and make sure brew update works before continuing.â€™</div></pre></td></tr></table></figure><p>okï¼Œ<code>homebrew</code> éœ€è¦å‡çº§ï¼Œæˆ‘å…ˆå¸è½½äº†ï¼Œåæ­£ä¼šå†æ¬¡è¢«å®‰è£…çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)&quot;</div></pre></td></tr></table></figure><p>ä½¿ç”¨ ruby 2.3.0</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬</div><div class="line">rvm list</div><div class="line"># åˆ é™¤å·²å®‰è£…ç‰ˆæœ¬</div><div class="line">rvm remove 2.0.0</div><div class="line"># è®¾ç½®é»˜è®¤ç‰ˆæœ¬</div><div class="line">rvm install ruby-2.3.0</div><div class="line">rvm use 2.3.0 --default</div></pre></td></tr></table></figure><h3 id="å®‰è£…-CocoaPods"><a href="#å®‰è£…-CocoaPods" class="headerlink" title="å®‰è£… CocoaPods"></a>å®‰è£… CocoaPods</h3><p>ä¸ºäº†åŠ é€Ÿå®‰è£…é€Ÿåº¦ï¼Œæ›´æ¢ gem æºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># æŸ¥çœ‹æº</div><div class="line">gem sources</div><div class="line"># åˆ é™¤å·²æœ‰çš„æº</div><div class="line">gem sources -r http://rubygems.org/</div><div class="line"># æ›´æ¢ä¸º ruby-china çš„æº</div><div class="line">gem sources -a https://gems.ruby-china.org/</div></pre></td></tr></table></figure><p>å®‰è£… </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install cocoapods</div></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://blog.devtang.com/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/" target="_blank" rel="external">ç”¨CocoaPodsåšiOSç¨‹åºçš„ä¾èµ–ç®¡ç†</a><br><a href="http://blog.csdn.net/fairytale_1/article/details/51850734" target="_blank" rel="external">å…³äºå®‰è£…cocoapodsé‡åˆ°çš„ä¸€äº›å‘ï¼ˆERROR: Error installing cocoapods: activesupport requires Ruby version &gt;= 2.2ï¼‰</a><br><a href="http://www.jianshu.com/p/32d9cfb91471" target="_blank" rel="external">iOS CocoaPods å®‰è£…ç¬”è®°</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;CocoaPods ä¸º iOS ç¨‹åºæä¾›ä¾èµ–ç®¡ç†çš„å·¥å…·ï¼Œç±»ä¼¼ Node.js çš„ npm ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>åˆæŠ˜è…¾åšå®¢äº†</title>
    <link href="http://github.com/xwartz/2016/09/reduce-blog-load-time/"/>
    <id>http://github.com/xwartz/2016/09/reduce-blog-load-time/</id>
    <published>2016-09-29T13:33:28.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘çœŸçš„æ˜¯ä¸æŠ˜è…¾ä¸ä¼šæ­»æ˜Ÿäººã€‚</p><a id="more"></a><p>è¿™æ¬¡ä¸€æ—¶å…´èµ·åˆä¹°äº†ä¸ªåŸŸåï¼Œ<code>xwartz.xyz</code>ã€‚æ¯æ¬¡é‡æ–°æŠ˜è…¾åšå®¢ï¼Œæ€»æ˜¯æ¢ä¸ªåŸŸåï¼Œä¹Ÿå¥½ï¼Œä¸ç”¨çœ‹åˆ°ä»¥å‰å†™çš„ä¸œä¸œã€‚</p><p>å½“ç„¶ï¼Œåšå®¢è¿˜æ˜¯æ‰˜ç®¡åœ¨ github pagesï¼Œè®¿é—®é€Ÿåº¦ä¹Ÿå°±åªèƒ½ä¾é  github äº†ã€‚</p><p>ä¸è¿‡ä¹Ÿæ˜¯è¦åšç‚¹ä¼˜åŒ–çš„ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸‹ï¼Œç»™å…¶ä»–æ‰˜ç®¡åœ¨ github pages çš„äººä¸€äº›å‚è€ƒå§ã€‚</p><h3 id="ä½¿ç”¨å›¾åºŠ"><a href="#ä½¿ç”¨å›¾åºŠ" class="headerlink" title="ä½¿ç”¨å›¾åºŠ"></a>ä½¿ç”¨å›¾åºŠ</h3><p>é¦–å…ˆæƒ³åˆ°çš„ä¼˜åŒ–ç‚¹å°±æ˜¯å›¾ç‰‡äº†ï¼Œæ¯•ç«Ÿæˆ‘çš„åšå®¢éƒ½æ˜¯å›¾ç‰‡ï¼Œä¸åšç‚¹ä¼˜åŒ–ï¼Œç­‰åŠ è½½å®ŒèŠ±éƒ½è°¢äº†ã€‚</p><p>åœ¨åšå›¾ç‰‡ä¼˜åŒ–çš„æ—¶å€™ï¼Œé¡ºä¾¿æ‰“å¼€äº†ä¸‹æˆ‘ä¹‹å‰å†™çš„ä¸ªäººä¸»é¡µ <a href="http://xwartz.github.comï¼Œ" target="_blank" rel="external">http://xwartz.github.comï¼Œ</a><br>å¯¹ï¼Œåˆæ˜¯æ”¾åœ¨ github pages ä¸Šï¼Œå”‰ï¼ŒçœŸæ˜¯å¤ªç©·äº†ã€‚</p><p>å°¼ç›ï¼Œæ‰“å¼€çœŸçš„æ˜¯å·¨æ…¢å•Šï¼Œç„¶åçœ‹äº†ä¸€ä¸‹ï¼Œæˆ‘å»ï¼Œæ”¾äº†ä¸€å¼  <code>2048 * 1024</code> çš„èƒŒæ™¯å›¾ï¼Œ<br>è€Œä¸”æ˜¯è¢« webpack æ‰“åŒ…åˆ° react ä»£ç ä¸­çš„ï¼Œç›´æ¥æ•´ä¸ªé˜»å¡æ‰äº†ã€‚</p><p>å¯¹äºä¹‹å‰é‚£ä¹ˆå¤šè€å¤–æ‰“å¼€æˆ‘çš„ä¸»é¡µï¼Œåªèƒ½è¯´æ˜¯çœŸçˆ±å•Šã€‚</p><hr><p>å¼€å§‹ç€æ‰‹ä¼˜åŒ–å›¾ç‰‡åŠ è½½ï¼Œå—¯ï¼Œå¾—æ‰¾ä¸ªå›¾åºŠï¼Œé‡ç‚¹æ˜¯è¦å…è´¹ï¼</p><p>å—¯ï¼Œå°±æ˜¯å¾®åšäº†ï¼Œä¸»è¦ä¹Ÿå°±æ˜¯è¿™ä¸ªä¸Šä¼ æ¥å£ <a href="http://picupload.service.weibo.com/interface/ã€‚" target="_blank" rel="external">http://picupload.service.weibo.com/interface/ã€‚</a></p><p>å…ˆåˆ«æ’¸èµ·è¢–å­å°±å¼€å§‹ä¼ ï¼Œè¿™ç§è´¹åŠ›çš„æ´»è‚¯å®šæœ‰äººé€ å¥½è½®å­äº†ï¼Œsoï¼Œæœç´¢äº†ä¸‹å°±æ‰¾åˆ°å‡ ä¸ª chrome æ’ä»¶:</p><p><a href="https://chrome.google.com/webstore/detail/%E6%96%B0%E6%B5%AA%E5%BE%AE%E5%8D%9A%E5%9B%BE%E5%BA%8A/fdfdnfpdplfbbnemmmoklbfjbhecpnhf?hl=zh-CN" target="_blank" rel="external">æ–°æµªå¾®åšå›¾åºŠ</a></p><p><a href="https://chrome.google.com/webstore/detail/%E5%9B%B4%E8%84%96%E6%98%AF%E4%B8%AA%E5%A5%BD%E5%9B%BE%E5%BA%8A/pngmcllbdfgmhdgnnpfaciaolgbjplhe?hl=zh-CN" target="_blank" rel="external">å›´è„–æ˜¯ä¸ªå¥½å›¾åºŠ</a></p><p><a href="https://github.com/Suxiaogang/WeiboPicBed">WeiboPicBed</a></p><p>è¯•ç”¨äº†ä¸‹ï¼Œæ„Ÿè§‰ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥è¿™é‡Œæ¨èä¸‹å‰åŒäº‹å†™çš„ Mac ç‰ˆ <a href="https://github.com/toolinbox/iPic">iPic</a>ï¼Œéå¸¸æ£’çš„ä¸€ä¸ªè½¯ä»¶ã€‚</p><p>æˆ‘å°±æ˜¯ç”¨ iPic æŠŠåšå®¢ä¸Šçš„å›¾ç‰‡å…¨éƒ½ä¸Šä¼ åˆ°äº†æ–°æµªå¾®åšï¼Œé€Ÿåº¦ç¬é—´æå‡ N å€(å½“ç„¶ï¼Œæ˜¯æˆ‘ä»¥å‰æ²¡æœ‰åšä¼˜åŒ–çš„åŸå› )ã€‚</p><h3 id="github-èµ„æºä½¿ç”¨-CDN"><a href="#github-èµ„æºä½¿ç”¨-CDN" class="headerlink" title="github èµ„æºä½¿ç”¨ CDN"></a>github èµ„æºä½¿ç”¨ CDN</h3><p>å…¶å®æ‰˜ç®¡åœ¨ github ä¸Šçš„åšå®¢ï¼ŒçœŸçš„æ²¡æœ‰å¤ªå¤šä¼˜åŒ–çš„ç‚¹äº†ï¼Œåªèƒ½å†ä» js/css é™æ€èµ„æºä¸Šå…¥æ‰‹äº†ã€‚</p><p>æˆ‘è‡ªå·±å†™äº†ä¸ªåšå®¢ä¸»é¢˜ <a href="https://github.com/xwartz/hexo-theme-nuna">hexo-theme-nuna</a>ï¼Œç„¶åå°±æƒ³ç€æŠŠ github ä¸Šçš„èµ„æºæ‰˜ç®¡åˆ° CDN ä¸Šï¼Œ</p><p>å½“ç„¶åˆå‡†å¤‡æ‰¾å…è´¹çš„ CDN æœåŠ¡äº†ï¼Œå—¯ï¼Œåˆè¢«æˆ‘æ‰¾åˆ°äº†ã€‚ã€‚ã€‚</p><p><a href="https://rawgit.com/" target="_blank" rel="external">https://rawgit.com/</a></p><p><a href="https://raw.githack.com/" target="_blank" rel="external">https://raw.githack.com/</a></p><p><a href="https://gitcdn.xyz/" target="_blank" rel="external">https://gitcdn.xyz/</a></p><p>ä»¥ä¸Šä¸‰ä¸ªéƒ½å¯ä»¥æ‰˜ç®¡ github èµ„æºï¼ŒåŒºåˆ«çš„è¯çœ‹è¿™é‡Œæè¿° <a href="https://github.com/schme16/gitcdn.xyz#how-is-this-different-from-rawgitcom-and-githackcom">How is this Different from RawGit.com and githack.com</a>ã€‚</p><p>gitcdn æ˜¯æ¯æ¬¡ä¼šå–æœ€æ–°ä¸€ä¸ª commit çš„èµ„æºï¼Œå¤§æ¦‚ä¸¤å°æ—¶åˆ·æ–°ä¸€æ¬¡èµ„æºï¼Œå…¶ä»–ä¸¤ä¸ªå¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒçš„è¯ï¼Œä¸€å¹´æ‰åˆ·æ–°ã€‚ã€‚ã€‚</p><h3 id="ä½¿ç”¨-pjax"><a href="#ä½¿ç”¨-pjax" class="headerlink" title="ä½¿ç”¨ pjax"></a>ä½¿ç”¨ pjax</h3><p>åšäº†ä»¥ä¸Šä¸¤ä»¶äº‹ï¼Œæˆ‘çš„åšå®¢è®¿é—®é€Ÿåº¦å·²ç»ç®—æ¯”è¾ƒå¿«çš„äº†ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªé™æ€åšå®¢å…¶å®è¿˜æ˜¯å¯ä»¥åšäº›ä¼˜åŒ–çš„ã€‚</p><p>ä¸ºäº†çœå»åšå®¢çš„ <code>reload</code>ï¼Œä½¿ç”¨äº† <a href="https://github.com/Easyfood/pageAccelerator">pageAccelerator</a> è¿™ä¸ªåº“ã€‚</p><p>åŸç†ä¹Ÿå°±æ˜¯ <code>pjax</code>ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ä¹‹åï¼Œæ‰€æœ‰æœ¬ç«™çš„é“¾æ¥ç‚¹å‡»ï¼Œéƒ½ä¼šå‘èµ·ä¸€ä¸ª <code>ajax</code> è¯·æ±‚ï¼Œ<br>ç„¶åå°† <code>head</code> åšä¸€ä¸ª <code>merge</code>ï¼Œ<code>body</code> ç›´æ¥æ›¿æ¢ã€‚</p><p>ä½¿ç”¨ <code>pushState</code> æ›´æ–°æµè§ˆå™¨è®¿é—®è®°å½•ï¼Œç›‘å¬ <code>popstate</code> äº‹ä»¶ï¼Œåšå‰è¿›/åé€€çš„æ´»ã€‚</p><p>ä¹Ÿæ²¡æœ‰ç‰¹æ„åšä»€ä¹ˆå…¼å®¹ï¼Œæ‰€ä»¥åšå®¢çš„æµè§ˆå™¨æ”¯æŒ <code>IE10+</code> ï¼Œè¿˜æœ‰ä¸»é¢˜ç”¨äº† <code>flex</code>ï¼Œ<br>æœ¬å°±æ²¡æœ‰æƒ³è¦å…¼å®¹è€çš„æµè§ˆå™¨ï¼Œæ¯•ç«Ÿä¹Ÿæ²¡ä»€ä¹ˆäººè®¿é—®æˆ‘çš„åšå®¢ã€‚</p><h3 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h3><p>é€šè¿‡ä»¥ä¸Šå‡ ç‚¹çš„ä¼˜åŒ–ï¼Œåšå®¢çš„è®¿é—®é€Ÿåº¦è¿˜ç®—ä¸é”™ï¼Œå½“ç¬¬ä¸€æ¬¡æ‰“å¼€åšå®¢ä¹‹åï¼Œè®¿é—®å…¶ä»–é¡µé¢ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ç§’å¼€äº†ï¼Œä½“éªŒéå¸¸æ£’ã€‚</p><p>å¯èƒ½åç»­è¿˜ä¼šåšç‚¹ä¼˜åŒ–ï¼Œæ¯”å¦‚æŠŠå›½å†…çš„æ‰˜ç®¡åˆ° coding.netï¼Œæµ·å¤–çš„æ‰æŒ‡å‘ github ã€‚</p><p>æœ€åï¼Œæ”¾ä¸ªç¦åˆ© <a href="https://itunes.apple.com/us/app/automute-preventing-awkward/id1118136179?mt=12" target="_blank" rel="external">AutoMute</a>ï¼Œä¸Šç­æ—¶é—´å–œæ¬¢æˆ´è€³æœºçš„æœ‹å‹åº”è¯¥ä¼šå–œæ¬¢ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘çœŸçš„æ˜¯ä¸æŠ˜è…¾ä¸ä¼šæ­»æ˜Ÿäººã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="blog" scheme="http://github.com/xwartz/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>CasperJS</title>
    <link href="http://github.com/xwartz/2016/09/casperjs/"/>
    <id>http://github.com/xwartz/2016/09/casperjs/</id>
    <published>2016-09-20T03:45:27.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸æ˜¯ä¸€ç¯‡ä»‹ç»ä½¿ç”¨ CasperJS è¿›è¡Œå•å…ƒæµ‹è¯•çš„æ–‡ç« ã€‚</p><a id="more"></a><p>è¿™æ˜¯ä¸€ç¯‡ä½¿ç”¨ CasperJS çš„ä¸€äº›ç»éªŒè®°å½•ï¼Œåç»­æœ‰é‡åˆ°å‘ï¼Œæˆ–è€…ä»€ä¹ˆä½¿ç”¨å¿ƒå¾—å°±ç»§ç»­æ›´æ–°åˆ°è¿™é‡Œäº†ã€‚</p><hr><p>å†™è¿‡å‰ç«¯å•å…ƒæµ‹è¯•çš„æœ‹å‹ï¼Œåº”è¯¥éƒ½çŸ¥é“ PhantomJSï¼Œæˆ‘ä¹‹å‰ä¹Ÿå†™è¿‡å‡ ç¯‡<a href="http://xwartz.github.io/pupa/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" target="_blank" rel="external">å•å…ƒæµ‹è¯•</a>ç›¸å…³çš„ï¼Œä¹Ÿæœ‰ç”¨åˆ°ã€‚</p><blockquote><p>PhantomJS æ˜¯ä¸€ä¸ªåŸºäº WebKit çš„æœåŠ¡å™¨ç«¯ JavaScript API, æ— éœ€æµè§ˆå™¨çš„æ”¯æŒå³å¯å®ç°å¯¹ Web çš„æ”¯æŒï¼Œ<br>ä¸”åŸç”Ÿæ”¯æŒå„ç§ Web æ ‡å‡†ï¼Œå¦‚ DOM å¤„ç†ã€JavaScriptã€CSS é€‰æ‹©å™¨ã€JSONã€Canvas å’Œå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ SVGã€‚</p></blockquote><p>PhantomJS å½¢æˆçš„ä¸€äº›ä¸é”™çš„å¼€æºç”Ÿæ€åœˆå†…å®¹, ç›¸å…³é¡¹ç›®ï¼š</p><ul><li>CasperJSï¼šä¸€ä¸ªå¼€æºçš„å¯¼èˆªè„šæœ¬å¤„ç†å’Œé«˜çº§æµ‹è¯•å·¥å…·</li><li>Poltergeist ï¼šæµ‹è¯•å·¥å…·Capybaraçš„æµ‹è¯•é©±åŠ¨</li><li>Guard::Jasmineï¼šèƒ½å¤ŸåŸºäºRailså®ç°è‡ªåŠ¨åŒ–æµ‹è¯•Jasmineçš„Specs</li><li>GhostDriverï¼šè¿œç¨‹ WebDriver æœ‰çº¿åè®®çš„å¼€æºå®ç°</li><li>PhantomRobotï¼šPhantomJSæœºå™¨äººæµ‹è¯•æ¡†æ¶</li><li>Mocha-PhantomJSï¼šJavaScriptæµ‹è¯•æ¡†æ¶Mochaçš„å®¢æˆ·ç«¯</li></ul><p>ä¸€ä¸ªå®Œæ•´ã€æ´»è·ƒçš„ç”Ÿæ€åœˆæ˜¯é€‰æ‹©ä¸€ä¸ªæ¡†æ¶çš„é‡è¦å‚è€ƒï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ç›¸æ¯” Vuejs æˆ‘æ›´çœ‹å¥½ Reactjs çš„åŸå› ï¼Œè·‘åäº†â€¦ğŸ˜‚</p><p>CasperJS æ˜¯ä¸€ä¸ªç”¨ JavaScript ç¼–å†™çš„, åŸºäº PhantomJS çš„å¯¼èˆªè„šæœ¬å’Œæµ‹è¯•å·¥å…·,<br>å®ƒç®€åŒ–äº†å®šä¹‰ä¸€ä¸ªå®Œæˆçš„å¯¼èˆªæ“ä½œæ‰€éœ€çš„æ­¥éª¤, è¿˜æä¾›äº†å¾ˆæœ‰ç”¨çš„å‡½æ•°å°è£…, æ–¹æ³•, å’Œè¯­æ³•ç³–, å®ƒå¯ä»¥å®Œæˆä¸‹é¢è¿™äº›å¸¸è§ä»»åŠ¡:</p><blockquote><ul><li>å®šä¹‰ &amp; æ’åºæµè§ˆå™¨å¯¼èˆªæ­¥éª¤</li><li>å¡«å…… &amp; æäº¤è¡¨å•</li><li>ç‚¹å‡» &amp; è·Ÿè¸ªé“¾æ¥</li><li>æ•è·ç½‘é¡µæˆªå›¾ (è¿˜å¯ä»¥æˆªå–æŸä¸€åŒºåŸŸ)</li><li>åœ¨è¿œç¨‹DOMä¸Šè¿›è¡Œæ–­è¨€æµ‹è¯•</li><li>è®°å½•äº‹ä»¶</li><li>ä¸‹è½½èµ„æº,åŒ…æ‹¬äºŒè¿›åˆ¶æ–‡ä»¶</li><li>ç¼–å†™åŠŸèƒ½æµ‹è¯•å¥—ä»¶,ç»“æœä¿å­˜ä¸ºJUnit XMLæ–‡ä»¶</li><li>æŠ“å–ç½‘é¡µå†…å®¹</li></ul></blockquote><h3 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h3><p>æœ€åˆçš„æƒ³æ³•æ˜¯æƒ³åšä¸€å¥—å‰ç«¯æµç¨‹æµ‹è¯•ï¼Œæ¯æ¬¡æ‰‹åŠ¨é‡å¤æµ‹è¯•æ€»æ˜¯å¾ˆçƒ¦çš„ï¼Œæµç¨‹æ˜¯è¿™æ ·å­çš„:</p><p><code>ç”¨æˆ·ç™»å½• --&gt; é€‰æ‹©å•†å“ --&gt; ä¸‹å• --&gt; è·³è½¬åˆ°æ”¶é“¶å° --&gt; ç¡®è®¤ä»˜æ¬¾</code>ã€‚</p><p>å½“ç„¶è¿™ä¸ªæµç¨‹å¹¶æ²¡æœ‰çœ‹èµ·æ¥è¿™ä¹ˆç®€å•ï¼Œå¿…é¡»è¦æ¨¡æ‹Ÿç”¨æˆ·çš„ç½‘é¡µæ“ä½œï¼Œæ¯”å¦‚ï¼š</p><ol><li>ç™»å½•è¿™æ­¥å¾—è§£å†³éªŒè¯ç é—®é¢˜</li><li>ä¸åŒçš„ä»˜æ¬¾æ–¹å¼ï¼šå¿«æ·æ”¯ä»˜å¾—å‘é€çŸ­ä¿¡ï¼Œæ”¯ä»˜å®äºŒç»´ç ï¼Œå¾®ä¿¡äºŒç»´ç ï¼Œè·³è½¬åˆ°å…¶ä»–çš„å¹³å°æ”¯ä»˜ç­‰ã€‚</li></ol><p>ç„¶åä½¿ç”¨ PhantomJS æ¥æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œï¼Œå½“ç„¶å„ç§é—®é¢˜è¿˜åœ¨è§£å†³ä¸­ã€‚</p><p>åœ¨è¯•å›¾è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œé¦–å…ˆè°ƒç ”äº†ä¸‹ä¸€äº›å‰ç«¯æµ‹è¯•æ¡†æ¶ï¼Œä¸»è¦æ˜¯ UI æµ‹è¯•ã€æµç¨‹æµ‹è¯•æ–¹é¢çš„ï¼Œåšäº†ä¸€äº›å°è¯•ã€‚</p><h3 id="èµ·æ‰‹å¼"><a href="#èµ·æ‰‹å¼" class="headerlink" title="èµ·æ‰‹å¼"></a>èµ·æ‰‹å¼</h3><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹ <a href="https://github.com/ariya/phantomjs">PhantomJS</a> çš„ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> page = <span class="built_in">require</span>(<span class="string">'webpage'</span>).create()             <span class="comment">//æ–°å»ºä¸€ä¸ªé¡µé¢</span></div><div class="line">page.open(url1, <span class="function"><span class="keyword">function</span>(<span class="params">status</span>) </span>&#123;                  <span class="comment">//å¯¼èˆªåˆ°ç¬¬ä¸€ä¸ªURL</span></div><div class="line">    <span class="keyword">if</span> (status == <span class="string">"fail"</span>) phantom.exit()           <span class="comment">//å¦‚æœå‘ç”Ÿé”™è¯¯,é€€å‡ºç¨‹åº</span></div><div class="line">    page.open(url2, <span class="function"><span class="keyword">function</span>(<span class="params">status</span>) </span>&#123;              <span class="comment">//å¦åˆ™åœ¨é¡µé¢åŠ è½½å®Œæˆçš„å›è°ƒå‡½æ•°ä¸­ç»§ç»­å¯¼èˆªåˆ°ç¬¬äºŒä¸ªURL,ä¾æ¬¡ç±»æ¨</span></div><div class="line">        <span class="keyword">if</span> (status == <span class="string">"fail"</span>) phantom.exit()</div><div class="line">        page.open(url3, <span class="function"><span class="keyword">function</span>(<span class="params">status</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (status == <span class="string">"fail"</span>) phantom.exit()</div><div class="line">            page.open(url4, <span class="function"><span class="keyword">function</span>(<span class="params">status</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (status == <span class="string">"fail"</span>) phantom.exit()</div><div class="line">                <span class="comment">// æˆ‘å¯ä»¥åœä¸‹æ¥äº†å—?</span></div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªåœ¨ PhantomJS ä¸­ä½¿ç”¨é“¾å¼å›è°ƒæ¥è¿›è¡Œå¯¼èˆªæ“ä½œçš„ä¾‹å­ï¼Œå†™èµ·æ¥ç›¸å½“ç—›è‹¦ã€‚</p><p>æ¯”å¯¹ä¸€ä¸‹ä½¿ç”¨ Casperjs</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> casper = <span class="built_in">require</span>(<span class="string">'casper'</span>).create()           <span class="comment">//æ–°å»ºä¸€ä¸ªé¡µé¢</span></div><div class="line">casper.start(url1)                                <span class="comment">//æ·»åŠ ç¬¬ä¸€ä¸ªURL</span></div><div class="line">casper.thenOpen(url2)                             <span class="comment">//æ·»åŠ ç¬¬äºŒä¸ªURL,ä¾æ¬¡ç±»æ¨</span></div><div class="line">casper.thenOpen(url3)</div><div class="line">casper.thenOpen(url4)</div><div class="line">casper.run()</div></pre></td></tr></table></figure><p>å¼‚æ­¥æ“ä½œæ›´æ–¹ä¾¿äº†ï¼Œæ›´å¤šçš„ API çœ‹å®˜æ–¹æ–‡æ¡£ <a href="http://docs.casperjs.org/en/latest/" target="_blank" rel="external">http://docs.casperjs.org/en/latest/</a> ã€‚</p><h3 id="æ­£é¢˜"><a href="#æ­£é¢˜" class="headerlink" title="æ­£é¢˜"></a>æ­£é¢˜</h3><p>ä»¥ä¸Šç®€å•ä»‹ç»äº†ä¸‹ä½¿ç”¨æ–¹æ³•ï¼Œç°åœ¨ä½¿ç”¨ Casperjs æ¥åšç‚¹å®é™…çš„å°è¯•ã€‚</p><p>æ³¨å†Œè´¦æˆ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> casper = <span class="built_in">require</span>(<span class="string">'casper'</span>)</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡ºä¿¡æ¯</span></div><div class="line"><span class="keyword">var</span> ca = casper.create(&#123;</div><div class="line">  <span class="attr">verbose</span>: <span class="literal">true</span>, <span class="comment">// å®æ—¶è¾“å‡º</span></div><div class="line">  logLevel: <span class="string">'debug'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡º dom é¡µé¢æ‰§è¡Œçš„ console ä¿¡æ¯</span></div><div class="line">ca.on(<span class="string">'remote.message'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.echo(msg, <span class="string">'COMMENT'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">var</span> user = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'iamrobot1'</span>,</div><div class="line">  <span class="attr">email</span>: <span class="string">'iamrobot1@gmail.com'</span>, <span class="comment">// å‡é‚®ç®±</span></div><div class="line">  password: <span class="string">'iamrobot1'</span> <span class="comment">// å¯†ç éœ€è¦åŒ…å«æ•°å­—</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> signupUrl = <span class="string">'https://github.com/join?source=header-home'</span></div><div class="line">ca.start(signupUrl) <span class="comment">// æ‰“å¼€é¡µé¢</span></div><div class="line">  .thenEvaluate(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line">    <span class="comment">// åŠ è½½å®Œé¡µé¢ï¼Œæ‰§è¡Œ js å¤„ç†è¡¨å•</span></div><div class="line">    <span class="keyword">var</span> form = <span class="built_in">document</span>.forms[<span class="number">1</span>]</div><div class="line">    form[<span class="string">'user[login]'</span>].value = user.name</div><div class="line">    form[<span class="string">'user[email]'</span>].value = user.email</div><div class="line">    form[<span class="string">'user[password]'</span>].value = user.password</div><div class="line">    form.submit()</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'First, create a new user'</span>)</div><div class="line">&#125;, user)</div><div class="line"></div><div class="line">ca.on(<span class="string">'exit'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.echo(<span class="string">'Done!'</span>) <span class="comment">// æ³¨æ„è¿™é‡Œ</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// å¯åŠ¨</span></div><div class="line">ca.run(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// æ‰§è¡Œå®Œä»»åŠ¡ï¼Œè®°å¾—é€€å‡º</span></div><div class="line">  ca.exit()</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>ä»¥ä¸Šæ–¹å¼å¯ä»¥æ³¨å†Œè´¦æˆ·ï¼Œç„¶åæ¥ä¸‹æ¥å°±å¯ä»¥å¹²ç‚¹å…¶ä»–äº‹äº†â€¦</p><p>å½“ç„¶ä¸Šé¢æ–¹å¼åªèƒ½æ³¨å†Œä¸€ä¸ªè´¦æˆ·ï¼Œå½“æˆ‘æƒ³æ³¨å†Œå¤šä¸ªè´¦æˆ·æ—¶ï¼Œå½“ç„¶å†™ä¸€ä¸ªå¾ªç¯ï¼Œç„¶åéšæœºåˆ›å»ºä¿¡æ¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> count = <span class="number">0</span></div><div class="line"><span class="keyword">var</span> start = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (count &gt;= num) &#123;</div><div class="line">    ca.exit()</div><div class="line">    process.exit()</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  .... <span class="comment">// æ³¨å†Œè¿‡ç¨‹</span></div><div class="line"></div><div class="line">  ca.run(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    count++</div><div class="line">    start()</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å‡ ä¸ªå¯ä»¥è®°ä¸€ä¸‹çš„ä¸œè¥¿ï¼š"><a href="#åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å‡ ä¸ªå¯ä»¥è®°ä¸€ä¸‹çš„ä¸œè¥¿ï¼š" class="headerlink" title="åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å‡ ä¸ªå¯ä»¥è®°ä¸€ä¸‹çš„ä¸œè¥¿ï¼š"></a>åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å‡ ä¸ªå¯ä»¥è®°ä¸€ä¸‹çš„ä¸œè¥¿ï¼š</h4><ol><li>exit æ–¹æ³•æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ã€‚</li><li>start/open æ–¹æ³•æ‰“å¼€æ–°çš„é¡µé¢ï¼Œç±»ä¼¼äºæµè§ˆå™¨æ‰“å¼€æ–°çš„ tabã€‚</li><li>casper.create åªèƒ½åˆ›å»ºä¸€æ¬¡ã€‚</li></ol><p>å…³äºç¬¬ä¸‰ç‚¹æŸ¥çœ‹ <a href="http://stackoverflow.com/questions/25883624/declare-two-or-more-casper-in-a-single-script" target="_blank" rel="external">Declare two or more casper in a single script</a>ã€‚</p><p>æ‰€ä»¥è¦æ³¨å†Œå¤šä¸ªè´¦æˆ·çš„æ—¶å€™éœ€è¦å…ˆé€€å‡ºç™»å½•ã€‚</p><h4 id="ç–‘æƒ‘ï¼š"><a href="#ç–‘æƒ‘ï¼š" class="headerlink" title="ç–‘æƒ‘ï¼š"></a>ç–‘æƒ‘ï¼š</h4><ol><li>ç›‘å¬ <code>exit</code> äº‹ä»¶ï¼Œæ‰“å¼€å¤šä¸ªé¡µé¢ï¼Œæœ€åä¼šè§¦å‘å¤šæ¬¡</li><li><code>waitFor</code> è®¾ç½® <code>timeout</code> æ— æ•ˆï¼Œè²Œä¼¼åªèƒ½åœ¨ <code>create</code> çš„æ—¶å€™è®¾ç½® <code>stepTimeout</code>ï¼Œæˆ–è€…è¯´æ˜¯è¦æ¯” <code>stepTimeout</code> å€¼è¦å°ï¼Ÿ</li><li>æ“ä½œæ­¥éª¤å¤šçš„æ—¶å€™ï¼Œä¼šç»å¸¸å‡ºç°è¿™ä¸ªé”™è¯¯ <a href="https://github.com/casperjs/casperjs/issues/1689">Maximum step execution timeout exceeded for step</a></li></ol><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ol><li>PhantomJS å¯¹ ES6 æ”¯æŒä¸å‹å¥½ï¼Œlet ä¹Ÿæ²¡æ³•ä½¿ç”¨ã€‚</li><li>ä¸èƒ½ require Nodejs çš„ native æ–¹æ³•ï¼Œæ‰€ä»¥ npm å®‰è£…çš„å¾ˆå¤šæ¨¡å—å°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œ<a href="http://phantomjs.org/api/" target="_blank" rel="external">API æ–‡æ¡£</a>ã€‚</li></ol><h3 id="ä¸€äº›ç»éªŒ"><a href="#ä¸€äº›ç»éªŒ" class="headerlink" title="ä¸€äº›ç»éªŒ"></a>ä¸€äº›ç»éªŒ</h3><ol><li>ä½¿ç”¨ npm å®‰è£… phantomjs-prebuiltï¼Œæ›¿ä»£å…¨å±€å®‰è£… phantomjs</li><li>ä¸æ¨èä½¿ç”¨ phantomjs-node</li><li>æ¨è <a href="https://github.com/marak/Faker.js/">faker.js</a> åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®</li><li>æ¨è<a href="https://github.com/ckknight/random-js">random-js</a> åˆ›å»ºéšæœºæ•°æ®</li><li>ä¸Šä¼ å›¾ç‰‡æ¥å£ <a href="http://phantomjs.org/api/webpage/method/upload-file" target="_blank" rel="external">upload-file</a></li></ol><p>æš‚æ—¶å°±è¿™äº›ã€‚</p><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>ä½¿ç”¨ CasperJS/PhantomJS å¯ä»¥åšå¾ˆå¤šè‡ªåŠ¨åŒ–çš„äº‹ï¼Œå€¼å¾—å°è¯•ï¼Œä¸æ€•è¢«è¾â€¦</p><p>æœ€åï¼Œç”¨ Python çš„æœ‹å‹å¯ä»¥çœ‹ä¸‹è¿™ä¸ª <a href="http://docs.seattlerb.org/mechanize/" target="_blank" rel="external">mechanize</a>ï¼Œç±»ä¼¼ PhantomJS çš„ Python å®ç°ã€‚</p><h3 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h3><p><a href="http://docs.casperjs.org/en/latest/" target="_blank" rel="external">CasperJS</a><br><a href="http://phantomjs.org/documentation/" target="_blank" rel="external">PhantomJS</a><br><a href="https://www.npmjs.com/package/phantomjs-prebuilt" target="_blank" rel="external">phantomjs-prebuilt</a><br><a href="https://github.com/amir20/phantomjs-node">phantomjs-node</a><br><a href="http://www.cnblogs.com/ziyunfei/archive/2012/09/27/2706254.html" target="_blank" rel="external">[è¯‘]CasperJS,åŸºäºPhantomJSçš„å·¥å…·åŒ…</a><br><a href="https://nicolas.perriault.net/code/2012/casperjs-hits-1-0-stable/" target="_blank" rel="external">Nicolasâ€™s blog</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸æ˜¯ä¸€ç¯‡ä»‹ç»ä½¿ç”¨ CasperJS è¿›è¡Œå•å…ƒæµ‹è¯•çš„æ–‡ç« ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å•å…ƒæµ‹è¯•" scheme="http://github.com/xwartz/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
      <category term="CasperJS" scheme="http://github.com/xwartz/tags/CasperJS/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å¦‚ä½• Mock æ•°æ®</title>
    <link href="http://github.com/xwartz/2016/09/mock-server/"/>
    <id>http://github.com/xwartz/2016/09/mock-server/</id>
    <published>2016-09-16T15:02:10.000Z</published>
    <updated>2016-12-31T02:47:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ç«¯åœ¨å¼€å‘çš„é˜¶æ®µï¼Œå¾€å¾€ä¾èµ–åç«¯çš„æ¥å£ï¼Œåº”è¯¥å¦‚ä½•å‡å°‘ç”šè‡³æ‘†è„±è¿™ç§ä¾èµ–å‘¢ã€‚</p><a id="more"></a><p>é¦–å…ˆåº”è¯¥åšçš„æ˜¯å‰åç«¯åˆ†ç¦»ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯å¼€å‘åˆ†ç¦»ï¼Œè‡³äºå‘å¸ƒåˆ†ç¦»å°±æ›´å¥½äº†ï¼Œ</p><p>ä½†æ˜¯ä¼šæœ‰å‘ï¼Œè¿™é‡Œä¸å±•å¼€è¯´ï¼Œæ¯•ç«Ÿåªæ˜¯è€ƒè™‘è¿‡ï¼Œè¿˜æ²¡æœ‰å®è·µè¿‡ã€‚</p><p>å‰åç«¯åˆ†ç¦»çš„æ˜æ˜¾ä¾‹å­å°±æ˜¯å•é¡µé¢åº”ç”¨ï¼Œåç«¯åªéœ€è¦åœ¨é¦–æ¬¡æ‰“å¼€é¡µé¢çš„æ—¶å€™è¿”å›åŸºæœ¬çš„ <code>html</code> æ–‡ä»¶ï¼Œ</p><p>ç”¨æ¥åŠ è½½ <code>js</code>, <code>css</code> ç­‰é™æ€èµ„æº(å¦‚æœè€ƒè™‘é¦–å±æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘åŒæ„ç›´å‡ºçš„æ–¹å¼)ã€‚</p><p>æ¥ä¸‹æ¥åç«¯å°±åªæä¾›æ¥å£ï¼Œå…¶ä»–å‰©ä¸‹çš„äº‹ç”±å‰ç«¯æ¥å¤„ç†ï¼ŒåŒ…æ‹¬æ¨¡æ¿æ¸²æŸ“ã€è·¯ç”±è·³è½¬ã€‚</p><p>é‚£ä¹ˆï¼Œå‰ç«¯ç›¸å¯¹äºåç«¯åªæœ‰æ¥å£çš„ä¾èµ–ï¼Œåœ¨å¼€å‘é˜¶æ®µï¼Œåªéœ€è¦æ¨¡æ‹Ÿæ¥å£æ•°æ®ï¼Œå°±å¯ä»¥ä¸ä¾èµ–åç«¯è¿›è¡Œå¼€å‘äº†ã€‚</p><h3 id="Mock-çš„æ–¹å¼"><a href="#Mock-çš„æ–¹å¼" class="headerlink" title="Mock çš„æ–¹å¼"></a>Mock çš„æ–¹å¼</h3><p>å‰ç«¯æ¨¡æ‹Ÿ API æ•°æ®æ–¹å¼æœ‰å¾ˆå¤šã€‚</p><h4 id="æ‰‹åŠ¨æ¨¡æ‹Ÿ"><a href="#æ‰‹åŠ¨æ¨¡æ‹Ÿ" class="headerlink" title="æ‰‹åŠ¨æ¨¡æ‹Ÿ"></a>æ‰‹åŠ¨æ¨¡æ‹Ÿ</h4><p>æœ€ä¸ç”¨åŠ¨è„‘çš„æ–¹å¼ï¼Œåœ¨å¼€å‘çš„æ—¶å€™ï¼Œå¯¹äºæ¥å£çš„è°ƒç”¨ï¼Œç›´æ¥è¿”å›æƒ³è¦çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å†™æ­»æ•°æ®ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> getData = <span class="function">(<span class="params">cb</span>) =&gt;</span> &#123;</div><div class="line">  <span class="comment">// åœ¨æ¨¡æ‹Ÿçš„æ—¶å€™ä¸èµ°æ¥å£è¯·æ±‚ç›´æ¥è¿”å›æ•°æ®</span></div><div class="line">  <span class="keyword">return</span> cb &amp;&amp; cb(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;)</div><div class="line">  <span class="comment">// çœŸå®çš„è¯·æ±‚</span></div><div class="line">  http.get(<span class="string">'/api/test'</span>, (res) =&gt; &#123;</div><div class="line">    cb &amp;&amp; cb(res)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼åŸºæœ¬æ²¡å•¥ä¼˜ç‚¹ï¼Œåœ¨å’Œåç«¯è”è°ƒçš„æ—¶å€™ï¼Œå¿…é¡»æŠŠæ¨¡æ‹Ÿçš„æ•°æ®åˆ é™¤ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åšä¸ªå°è£…åŠ ä¸ªå¼€å…³ï¼Œä½†æ˜¯è¿˜æ˜¯å¾ˆä¸æ–¹ä¾¿ã€‚</p><h4 id="é‡å†™-Ajax"><a href="#é‡å†™-Ajax" class="headerlink" title="é‡å†™ Ajax"></a>é‡å†™ <code>Ajax</code></h4><p>å¦‚æœä½ ç”¨ <code>Ajax</code> è¯·æ±‚æœåŠ¡å™¨æ¥å£ï¼Œå¯ä»¥è€ƒè™‘é‡å†™ <code>Ajax</code> æ–¹æ³•ï¼Œä»£ç†åˆ° mock serverã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> _ajax = $.ajax</div><div class="line">$.ajax = <span class="function"><span class="params">option</span> =&gt;</span> &#123;</div><div class="line">  option[<span class="string">'dataType'</span>] = <span class="string">'jsonp'</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> (option[<span class="string">'url'</span>]) &#123;</div><div class="line">    <span class="keyword">let</span> reg = <span class="regexp">/http[^\s]+com/i</span></div><div class="line">    <span class="comment">// å¸¦åŸŸåçš„æƒ…å†µå¤„ç†</span></div><div class="line">    <span class="keyword">if</span> (reg.test(option[<span class="string">'url'</span>])) &#123;</div><div class="line">      option[<span class="string">'url'</span>] = option[<span class="string">'url'</span>].replace(reg, <span class="string">''</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// å°† url å…¨éƒ½ä»£ç†åˆ° mock server</span></div><div class="line">    option[<span class="string">'url'</span>] = <span class="string">'http://mock-server/'</span> + option[<span class="string">'url'</span>]</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  option[<span class="string">'type'</span>] = <span class="string">'GET'</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> _ajax(option)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™æ ·åªéœ€è¦åœ¨æœ¬åœ°å¼€å‘çš„æ—¶å€™ï¼Œå¼•å…¥è¿™æ®µé‡å†™ <code>Ajax</code> æ–¹æ³•çš„è„šæœ¬ï¼Œå°±å¯ä»¥åœ¨å¼€å‘é˜¶æ®µå°† <code>API</code> è¯·æ±‚å…¨éƒ¨ä»£ç†åˆ°æŒ‡å®šçš„æœåŠ¡å™¨ã€‚</p><p>å­˜åœ¨å‡ ä¸ªç¼ºç‚¹ï¼š</p><ol><li>ç”¨è¿™ä¸ªæ–¹å¼çš„å‰ææ˜¯ï¼Œä½ åº”è¯¥æœ‰ä¸€ä¸ªå¯ä»¥ mock çš„æœåŠ¡ï¼Œå³è°ƒç”¨ <code>API</code> è¿”å›ç›¸åº”çš„æ•°æ®ã€‚</li><li>ä¸ºäº†è§£å†³è·¨åŸŸï¼ŒæœåŠ¡å¾—æ”¯æŒ <code>jsonp</code>ã€‚</li><li>æ‰€æœ‰ <code>Ajax</code> è¯·æ±‚éƒ½ä¼šè¢«ä»£ç†ï¼Œä¹Ÿè®¸æˆ‘ä»¬å­˜åœ¨éƒ¨åˆ†è¯·æ±‚ä¸éœ€è¦ä»£ç†(å½“ç„¶ä¹Ÿå¯ä»¥å¢åŠ é…ç½®é¡¹)ã€‚</li></ol><h4 id="ä½¿ç”¨-Webpack-ä»£ç†"><a href="#ä½¿ç”¨-Webpack-ä»£ç†" class="headerlink" title="ä½¿ç”¨ Webpack ä»£ç†"></a>ä½¿ç”¨ Webpack ä»£ç†</h4><p><code>Webpack</code> åŠŸèƒ½å¼ºå¤§ï¼Œä¸ä»…ä»…å¯ä»¥ä½œä¸º <code>bundler</code> å·¥å…·ï¼Œè¿˜å¯ä»¥ç”¨æ¥ä»£ç†è¯·æ±‚ã€‚</p><p>å½“ç„¶åŸç†æ˜¯å¯ç”¨äº† <code>Node</code> æœåŠ¡ï¼Œä½œä¸ºä¸­é—´ä»£ç†ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨ï¼š</p><figure class="highlight js"><figcaption><span>webpack.dev.config.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">proxy: &#123;</div><div class="line">  <span class="string">'/api'</span>: &#123;</div><div class="line">    <span class="attr">target</span>: <span class="string">'https://mock-server.com'</span>,</div><div class="line">    <span class="attr">secure</span>: <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä»¥ä¸Šï¼Œåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå°±å¯ä»¥å°†å¸¦ <code>/api</code> çš„è¯·æ±‚ä»£ç†åˆ°æŒ‡å®šçš„æœåŠ¡å™¨ã€‚</p><p>ç”±äº <code>Webpack</code> ä»£ç†æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥æŒ‡å®šæŸäº› <code>API</code> ä½¿ç”¨ä»£ç†ï¼Œæ›´å¤šå‚æ•°å‚è€ƒå®˜ç½‘æ–‡æ¡£ <a href="http://webpack.github.io/docs/webpack-dev-server.html#proxy" target="_blank" rel="external">webpack-dev-server</a>ã€‚</p><p>ç”±æ­¤ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ <code>Webpack</code> çš„æ–¹å¼ï¼Œè§£å†³äº†ä½¿ç”¨ <code>Ajax</code> çš„åä¸¤ä¸ªç¼ºç‚¹ã€‚</p><h5 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h5><p>å½“ç„¶ä½¿ç”¨ <code>Webpack</code> è¿˜æœ‰éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯æˆ‘è‡ªå·±åœ¨ä½¿ç”¨çš„æ—¶å€™é‡åˆ°çš„ã€‚</p><p>æœ¬åœ°å¼€å‘ä¸€èˆ¬æƒ…å†µéƒ½æ˜¯ä½¿ç”¨ <code>http://localhost:port</code>ï¼Œå½“ä»£ç†çš„æœåŠ¡å™¨ä½¿ç”¨ <code>https</code> çš„æ—¶å€™ï¼Œ<br>ä¹Ÿå°±æ˜¯ <code>http -&gt; https</code> çš„ä»£ç†ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è®¾ç½® <code>agent</code> å‚æ•°ã€‚</p><p>å¯ä»¥å‚è€ƒæˆ‘åœ¨ <code>github</code> å†™çš„åˆ—å­ <a href="https://github.com/xwartz/koa-react-boilerplate">koa-react-boilerplate</a>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">proxy: &#123;</div><div class="line">  <span class="string">'/api'</span>: &#123;</div><div class="line">    <span class="attr">target</span>: <span class="string">'https://api.github.com/'</span>,</div><div class="line">    <span class="attr">pathRewrite</span>: &#123; <span class="string">'^/api'</span>: <span class="string">''</span> &#125;,</div><div class="line">    <span class="comment">// http -&gt; https ä»£ç†</span></div><div class="line">    <span class="comment">// see detail https://github.com/nodejitsu/node-http-proxy/blob/master/examples/http/proxy-http-to-https.js</span></div><div class="line">    agent: https.globalAgent,</div><div class="line">    <span class="attr">headers</span>: &#123;</div><div class="line">      <span class="attr">host</span>: <span class="string">'api.github.com'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªæ˜¾ç¤º <code>github</code> ç”¨æˆ· star ä¿¡æ¯çš„ä¾‹å­ï¼Œå°† <code>/api</code> è¯·æ±‚ä»£ç†åˆ° <code>https://api.github.com/</code>ã€‚</p><p>å…³äºæ›´å¤šçš„ <code>https -&gt; http</code> ä¸ <code>https -&gt; https</code> å¯ä»¥å‚è€ƒ <a href="https://github.com/nodejitsu/node-http-proxy#using-https">node-http-proxy</a>ã€‚</p><h4 id="Nginx-ä»£ç†"><a href="#Nginx-ä»£ç†" class="headerlink" title="Nginx ä»£ç†"></a>Nginx ä»£ç†</h4><p>Nginx çš„åå‘ä»£ç†åŠŸèƒ½è¿˜æ˜¯åœ¨ç°åœ¨çš„å·¥ä½œä¸­ä½¿ç”¨äº†ï¼Œæ‰æœ‰æ‰€äº†è§£ã€‚</p><figure class="highlight"><figcaption><span>nginx.conf </span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">  listen 80;</div><div class="line">  # æŠŠæ‰€æœ‰ uri ä»¥ /api å¼€å¤´çš„è½¬å‘åˆ°æ¥å£æœåŠ¡å™¨</div><div class="line">  location /api &#123;</div><div class="line">    proxy_pass http://127.0.0.1:4000;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Nginx äº†è§£çš„å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œå°±ä¸å±•å¼€è®¨è®ºäº†ï¼Œè¿˜æœ›äººæŒ‡ç‚¹ã€‚</p><h3 id="Mock-Server"><a href="#Mock-Server" class="headerlink" title="Mock Server"></a>Mock Server</h3><p>ä»¥ä¸Šï¼Œè¯´çš„éƒ½æ˜¯å¦‚ä½•æ¨¡æ‹Ÿæ•°æ®ï¼Œæ–¹ä¾¿æœ¬åœ°å¼€å‘ï¼Œä½†æ˜¯ä»£ç†æ¥å£è¯·æ±‚ä¹‹åï¼Œè¿˜éœ€è¦æ¥å—è¯¥è¯·æ±‚çš„æœåŠ¡å™¨ã€‚</p><p>æ‰€ä»¥ä¸€ä¸ªå®Œæ•´çš„æ•°æ®æ¨¡æ‹Ÿï¼Œåº”è¯¥åŒ…å« Mock Serverã€‚</p><h4 id="å¯ä»¥ä½¿ç”¨çš„-Mock-Server"><a href="#å¯ä»¥ä½¿ç”¨çš„-Mock-Server" class="headerlink" title="å¯ä»¥ä½¿ç”¨çš„ Mock Server"></a>å¯ä»¥ä½¿ç”¨çš„ Mock Server</h4><p>å­˜åœ¨å¾ˆå¤šæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ï¼Œæœ‰ä»¥ä¸‹æ¨èï¼š</p><ol><li><a href="https://apiary.io/" target="_blank" rel="external">apiary</a>: å¯ä»¥ç”Ÿæˆæ–‡æ¡£ï¼Œä½†æ˜¯éä¸ªäººä½¿ç”¨å¾—ä»˜è´¹ã€‚</li><li><a href="https://github.com/thx/RAP">RAP</a>: åŠŸèƒ½è²Œä¼¼å¾ˆå¼ºå¤§ï¼Œé˜¿é‡Œå¦ˆå¦ˆMUXå›¢é˜Ÿå‡ºå“ã€‚</li><li><a href="https://github.com/typicode/json-server">json-server</a>: Node ç¼–å†™ï¼Œé€‚åˆå‰ç«¯äººå‘˜ä½¿ç”¨ï¼Œä½†ä¸èƒ½äº§ç”Ÿæ–‡æ¡£ã€‚</li></ol><h4 id="æ„å»º-Mock-Server"><a href="#æ„å»º-Mock-Server" class="headerlink" title="æ„å»º Mock Server"></a>æ„å»º Mock Server</h4><p>ç»¼ä¸Šï¼Œæœ‰ä¸å°‘æä¾› mock çš„æœåŠ¡ï¼Œä½†è¿˜æ˜¯æ— æ³•å®Œå…¨æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ï¼Œæˆ‘è®¤ä¸º Mock Server åº”è¯¥åŒ…å«ä»¥ä¸‹å‡ ç‚¹åŠŸèƒ½ï¼š</p><ol><li>å‹å¥½çš„äº¤äº’ç•Œé¢</li><li>å½•å…¥/ä¿å­˜æ¥å£æ•°æ®</li><li>åˆ†é¡¹ç›®å­˜å‚¨æ¥å£æ•°æ®ï¼Œé€‚åˆä¸åŒå›¢é˜Ÿä½¿ç”¨</li><li>å“åº”è¯·æ±‚ï¼Œè¿”å›ç›¸åº”æ•°æ®</li><li>ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œæ–¹ä¾¿å‰åç«¯æŸ¥é˜…</li><li>æ”¯æŒæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•<br>â€¦.</li></ol><p>ä»¥ä¸Šï¼Œå‡†å¤‡è‡ªå·±æ’¸ä¸€ä¸ª <a href="https://github.com/xwartz/lula">Lula</a> ç©ç©ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://cnodejs.org/topic/567d612c435249f221f53a89" target="_blank" rel="external">ç”¨äºç”ŸæˆAPIçš„æ–‡æ¡£çš„æ–¹æ¡ˆæ€»ç»“</a><br><a href="https://www.zhihu.com/question/35436669" target="_blank" rel="external">ä½ æ˜¯å¦‚ä½•æ„å»º Web å‰ç«¯ Mock Server çš„</a><br><a href="https://zhuanlan.zhihu.com/p/20669111?refer=purerender" target="_blank" rel="external">React åŒæ„å®è·µä¸æ€è€ƒ</a><br><a href="https://github.com/typicode/json-server">json-server</a><br><a href="https://apiary.io/" target="_blank" rel="external">apiary</a><br><a href="https://github.com/thx/RAP">RAP</a><br><a href="http://www.restran.net/2015/08/19/nginx-frontend-helper/" target="_blank" rel="external">Nginx æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆçš„å¥½å¸®æ‰‹</a><br><a href="https://github.com/nodejitsu/node-http-proxy#using-https">node-http-proxy</a><br><a href="https://github.com/xwartz/koa-react-boilerplate">koa-react-boilerplate</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ç«¯åœ¨å¼€å‘çš„é˜¶æ®µï¼Œå¾€å¾€ä¾èµ–åç«¯çš„æ¥å£ï¼Œåº”è¯¥å¦‚ä½•å‡å°‘ç”šè‡³æ‘†è„±è¿™ç§ä¾èµ–å‘¢ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
      <category term="mock" scheme="http://github.com/xwartz/tags/mock/"/>
    
      <category term="proxy" scheme="http://github.com/xwartz/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>Plan</title>
    <link href="http://github.com/xwartz/2016/09/need-to-plan/"/>
    <id>http://github.com/xwartz/2016/09/need-to-plan/</id>
    <published>2016-09-05T05:40:57.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¤ªå¤šæœ‰è¶£çš„äº‹ï¼Œæ„Ÿè§‰èº«ä½“è¢«æç©ºã€‚</p><a id="more"></a><p>ä»¥å‰å¾ˆä¸å–œæ¬¢åšè®¡åˆ’ï¼Œè®¤ä¸ºè®¡åˆ’èµ¶ä¸ä¸Šå˜åŒ–ã€‚</p><p>å¾ˆå¤šäº‹æƒ…ï¼Œåªè¦é ç€çƒ­æƒ…å»æ¨åŠ¨å°±å¥½ï¼Œä¸éœ€è¦è®¡åˆ’çš„çº¦æŸã€‚</p><p>æœ€è¿‘ï¼Œæ„Ÿè§‰ç²¾ç¥çŠ¶æ€ä¸æ€ä¹ˆå¥½ï¼Œè§†åŠ›åº”è¯¥åˆå·®äº†ä¸å°‘ã€‚</p><p>ç¿»äº†ä¸‹ï¼ŒTODO LISTã€Pocketã€Eventnoteï¼Œå †ç§¯äº†å¾ˆå¤šäº‹ã€‚</p><p>çƒ­æƒ…è¿™ç§ä¸œè¥¿æœ‰äº›æ—¶å€™ï¼Œæ„Ÿè§‰é€‚å¾—å…¶åï¼ŒæŠŠäººæå¾—å¾ˆç´¯ï¼Œæˆå°±æ„Ÿå´ä¸é«˜ã€‚</p><p>ç¿»äº† GitHub ä¸Šçš„æ´»è·ƒè®°å½•ï¼Œæœ‰æ—¶å€™ä¸€å¤© 10 å‡ ä¸ªå°æ—¶ï¼Œéœ€è¦èŠ‚åˆ¶ç‚¹æ‰è¡Œã€‚</p><p>æƒ³ç€ä¸èƒ½å†ä»»ç”±å…´è¶£çƒ­æƒ…é©±ä½¿ï¼Œéœ€è¦ç³»ç»Ÿåœ°å­¦ä¹ ç‚¹ä¸œè¥¿ï¼ŒåŸ¹å…»äº›å…´è¶£çˆ±å¥½ã€‚</p><p>åœ¨ Calendar ä¸Šå†™äº†ç‚¹è®¡åˆ’ï¼Œçº¦æŸä¸‹è‡ªå·±ï¼Œè‡ªå¾‹æˆè‡ªç„¶ä¾¿å¥½äº†ã€‚</p><p>å…ˆå®Œæˆä¸ªå°ç›®æ ‡ï¼Œä¸€ä¸ªæœˆåçœ‹çœ‹æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤ªå¤šæœ‰è¶£çš„äº‹ï¼Œæ„Ÿè§‰èº«ä½“è¢«æç©ºã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="life" scheme="http://github.com/xwartz/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>URL ç¼–ç </title>
    <link href="http://github.com/xwartz/2016/08/URI-encoding/"/>
    <id>http://github.com/xwartz/2016/08/URI-encoding/</id>
    <published>2016-08-20T09:59:04.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>URL</code> ç¼–ç ï¼Œæ­¤å‰åªæ˜¯ä¸€çŸ¥åŠè§£ï¼Œæ‰€ä»¥å°±è¸©åˆ°å‘äº†ï¼Œæ•…æ­¤ä¸€è®°ã€‚</p><a id="more"></a><h3 id="URI-ä¸-URL"><a href="#URI-ä¸-URL" class="headerlink" title="URI ä¸ URL"></a><code>URI</code> ä¸ <code>URL</code></h3><p><code>URI</code>ï¼š(Uniform Resource Identifier çš„ç¼©å†™ï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)ã€‚</p><p><code>URL</code>ï¼š(Uniform Resource Locator çš„ç¼©å†™ï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦)ã€‚</p><h5 id="å…³ç³»ï¼š"><a href="#å…³ç³»ï¼š" class="headerlink" title="å…³ç³»ï¼š"></a>å…³ç³»ï¼š</h5><p><code>URI</code> å±äº <code>URL</code> æ›´ä½å±‚æ¬¡çš„æŠ½è±¡ï¼Œä¸€ç§å­—ç¬¦ä¸²æ–‡æœ¬æ ‡å‡†ã€‚</p><p>äºŒè€…çš„åŒºåˆ«åœ¨äºï¼Œ<code>URI</code> è¡¨ç¤ºè¯·æ±‚æœåŠ¡å™¨çš„è·¯å¾„ï¼Œå®šä¹‰è¿™ä¹ˆä¸€ä¸ªèµ„æºã€‚è€Œ <code>URL</code> åŒæ—¶è¯´æ˜è¦å¦‚ä½•è®¿é—®è¿™ä¸ªèµ„æºï¼ˆ<a href="http://ï¼‰ã€‚" target="_blank" rel="external">http://ï¼‰ã€‚</a></p><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><blockquote><p>ç”±äºèåˆ xxç•Œ å’Œ xxè¡— çš„ä¸šåŠ¡ï¼Œå‰è€…çš„æç°åŠŸèƒ½é€šè¿‡ <code>iframe</code> åŠ è½½åè€…çš„æç°é¡µé¢æ¥å®Œæˆã€‚<br>æ­¤æ—¶ï¼Œä¼šå°†å‰è€…çš„ <code>userId</code> é€šè¿‡ <code>rsa</code> åŠ å¯†ä¹‹åæ‹¼æ¥åˆ° <code>URL</code> ä¸­ï¼Œ<br>åè€…è·å– <code>userId</code> ä¹‹åä¼šä¸åç«¯åšäº›äº¤äº’ã€‚</p></blockquote><p>é¦–å…ˆï¼Œç®€å•å°† <code>URL</code> è¡¨ç¤ºä¸º â€œ<a href="http://127.0.0.1:8043/wallet/withdraw?userId=Exft+f4&quot;ï¼Œ" target="_blank" rel="external">http://127.0.0.1:8043/wallet/withdraw?userId=Exft+f4&quot;ï¼Œ</a><br>é‚£ä¹ˆè¦è·å–çš„ <code>userId</code> å°±æ˜¯ <code>Exft+f4</code>ã€‚</p><p>åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°æœ‰äº›è´¦å·æ²¡æœ‰é—®é¢˜ï¼Œæœ‰äº›è´¦å·å‡ºç°é—®é¢˜ï¼Œæ„Ÿè§‰æ˜¯ä¸€ä¸ªå¶ç„¶æ€§çš„é—®é¢˜ï¼Œç„¶åç»§ç»­è¿½è¸ªã€‚</p><p>é¦–å…ˆæŸ¥çœ‹æ—¥å¿—ï¼Œç¡®å®š <code>userId</code> å­—æ®µå‡ºç°é—®é¢˜ï¼Œå­˜åœ¨è´¦å· <code>userId</code> å­—æ®µå¯¹åº”ä¸ä¸Šï¼Œè§£å¯†é”™è¯¯ã€‚</p><p><code>Exft+f4</code> ä¸­çš„ <code>+</code> è¢«è½¬ä¹‰æˆäº† <code>ç©ºæ ¼</code>ï¼Œä¹Ÿå°±æ˜¯å˜æˆäº† <code>Exft f4</code>ï¼Œ<br>è¿™å°±å¾ˆå¥‡æ€ªäº†ï¼Œæˆ‘æ˜æ˜ç›´æ¥åœ¨æ§åˆ¶å°è·å–çš„ <code>userId</code> å°±æ˜¯ <code>Exft+f4</code> å•Šã€‚</p><p>ç„¶åæ‰“å¼€ <code>Chrome Network</code> æŸ¥çœ‹è¯·æ±‚å‘ç°ï¼Œ<code>query</code> è¢«è‡ªåŠ¨è½¬ä¹‰äº†ï¼Œå¦‚ä¸‹å›¾</p><p><img src="./encode.png" alt=""></p><p>ä¹Ÿå°±æ˜¯å½“æœåŠ¡å™¨è·å– <code>query string</code> çš„æ—¶å€™(PS: è¿™é‡Œä½¿ç”¨åç«¯ <code>Java</code> æä¾›çš„æ–¹æ³•ï¼Œè·å– <code>userId</code> å¹¶è°ƒç”¨ <code>Java</code> åŒæ­¥æ–¹æ³•æ¸²æŸ“é¡µé¢)ï¼Œå·²ç»ä¸æ­£ç¡®äº†ã€‚</p><h3 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h3><p>æ—¢ç„¶çŸ¥é“äº†é—®é¢˜æ‰€åœ¨ï¼Œé‚£å°±ç®€å•äº†ã€‚</p><p>é¦–å…ˆï¼Œçœ‹åˆ°æµè§ˆå™¨ä¸­çš„ <code>view URL encoded</code>ï¼Œåªè¦åˆ‡ä¸€ä¸‹ï¼Œç»“æœå°±æ˜¯æ­£ç¡®çš„äº†ã€‚</p><p>åŸæ¥é—®é¢˜çš„ç—‡ç»“åœ¨æ²¡æœ‰åš <code>encode</code>ï¼Œæ‰€ä»¥å…¶å®åªéœ€è¦åœ¨æ‹¼å‡‘ <code>URL</code> çš„æ—¶å€™ï¼Œå°† <code>userId</code> åšä¸€ä¸‹ç¼–ç å°±å¥½äº†ã€‚</p><h3 id="encodeURI-å’Œ-encodeURIComponent-çš„åŒºåˆ«"><a href="#encodeURI-å’Œ-encodeURIComponent-çš„åŒºåˆ«" class="headerlink" title="encodeURI å’Œ encodeURIComponent çš„åŒºåˆ«"></a>encodeURI å’Œ encodeURIComponent çš„åŒºåˆ«</h3><blockquote><p>The encodeURI() function encodes a Uniform Resource Identifier (URI) by replacing each instance of certain characters by one, two, three, or four escape sequences representing the UTF-8 encoding of the character (will only be four escape sequences for characters composed of two â€œsurrogateâ€ characters).</p><p>The encodeURIComponent() function encodes a Uniform Resource Identifier (URI) component by replacing each instance of certain characters by one, two, three, or four escape sequences representing the UTF-8 encoding of the character (will only be four escape sequences for characters composed of two â€œsurrogateâ€ characters).</p></blockquote><p>ä¹Ÿå°±æ˜¯ <code>encodeURI</code> å¯¹æ•´ä¸ª <code>URI</code> è¿›è¡Œç¼–ç ï¼Œè€Œ <code>encodeURIComponent</code> æ˜¯å¯¹ <code>URI</code> çš„ç»„æˆéƒ¨åˆ†åšç¼–ç ã€‚</p><p class="tip"><br>  <strong>æ³¨æ„</strong>: ç„¶è€Œäº‹å®ä¸Šä¸æ­¢è¿™ä¹ˆç‚¹åŒºåˆ«ï¼Œ<code>encodeURI</code> è½¬ä¹‰çš„å­—ç¬¦ä¹Ÿå’Œ <code>encodeURIComponent</code> ä¸åŒã€‚<br></p><p><code>encodeURI</code> ä¸ä¼šè½¬ä¹‰ä»¥ä¸‹å­—ç¬¦</p><blockquote><p>1.ä¿ç•™å­—ç¬¦: <code>; , / ? : @ &amp; = + $</code><br>  2.éè½¬ä¹‰çš„å­—ç¬¦: <code>å­—æ¯ æ•°å­— - _ . ! ~ * &#39; ( )</code><br>  3.æ•°å­—ç¬¦å· <code>#</code></p></blockquote><p><code>encodeURIComponent</code> ä¸ä¼šè½¬ä¹‰ä»¥ä¸‹å­—ç¬¦</p><blockquote><p>1.éè½¬ä¹‰çš„å­—ç¬¦: <code>å­—æ¯ æ•°å­— - _ . ! ~ * &#39; ( )</code></p></blockquote><p>ä»¥ä¸Šï¼Œ<code>encodeURI</code> æ— æ³•äº§ç”Ÿèƒ½é€‚ç”¨äº <code>HTTP</code> <code>GET</code> è¯·æ±‚çš„ <code>URI</code>ã€‚</p><p>ä¾‹å¦‚å¯¹äº <code>XMLHTTPRequests</code>, å› ä¸º <code>&quot;&amp;&quot;</code>, <code>&quot;+&quot;</code>, å’Œ <code>&quot;=&quot;</code> ä¸ä¼šè¢«ç¼–ç ï¼Œç„¶è€Œåœ¨ <code>GET</code> è¯·æ±‚ä¸­å®ƒä»¬æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œ</p><p>æ‰€ä»¥ä¸ºäº†é¿å…æœåŠ¡å™¨æ”¶åˆ°ä¸å¯é¢„çŸ¥çš„è¯·æ±‚ï¼Œåº”è¯¥ä½¿ç”¨ <code>encodeURIComponent</code> è¿›è¡Œè½¬ä¹‰ã€‚</p><p>å› æ­¤ï¼Œä¸Šé¢çš„ â€œ<a href="http://127.0.0.1:8043/wallet/withdraw?userId=Exft+f4&quot;ï¼Œä¸èƒ½ç®€å•ä½¿ç”¨" target="_blank" rel="external">http://127.0.0.1:8043/wallet/withdraw?userId=Exft+f4&quot;ï¼Œä¸èƒ½ç®€å•ä½¿ç”¨</a> <code>encodeURI</code> æ–¹æ³•æ¥è½¬ä¹‰ã€‚</p><p>è€Œæ˜¯åº”è¯¥å°† <code>userId</code> å•ç‹¬ä½¿ç”¨ <code>encodeURIComponent</code> è¿›è¡Œè½¬ä¹‰åæ‹¼æ¥ã€‚</p><p>ä¸ <code>encodeURI</code> å’Œ <code>encodeURIComponent</code> å¯¹åº”çš„è§£ç æ˜¯ <code>decodeURI</code> å’Œ <code>decodeURIComponent</code>ï¼Œ<br>å› æ­¤åœ¨è·å–åˆ° <code>URI</code> ä¹‹ååªéœ€è¦è§£ç å°±å¯ä»¥è·å–åˆ°åŸå€¼ã€‚</p><p>è·å– <code>URL</code> å‚æ•°çš„æ­£ç¡®å§¿åŠ¿ï¼š</p><script src="https://gist.github.com/xwartz/12678ec6278e4ff9e0bf892d9db2186f.js"></script><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿™æœ¬åº”è¯¥æ˜¯ä¸€ä¸ªæ—©å°±äº†è§£çš„é—®é¢˜ï¼Œä¸ºä½•ä¼šåˆ°ç°åœ¨ï¼Ÿ</p><p>æƒ³äº†ä¸‹ï¼Œå¤§æ¦‚æ˜¯ä»¥ä¸‹åŸå› ï¼š</p><ol><li>æ­¤å‰å·¥ä½œä¸­ <code>URL</code> å¾ˆå°‘æ˜¯ç‰¹æ®Šå­—ç¬¦çš„ï¼Œä¸€èˆ¬ä¸ºæ­£å¸¸è‹±æ–‡å­—ç¬¦ã€‚</li><li>å¾ˆå°‘éœ€è¦è·å– <code>URL</code> ä¸Šçš„ <code>query</code> åšå†è¯·æ±‚çš„å‚æ•°ï¼Œå³ä½¿ä½œä¸ºå‚æ•°ï¼Œä¹Ÿæ˜¯å·²çŸ¥çš„å­—ç¬¦ã€‚</li><li>æ¡†æ¶(åº“)å·²ç»åšäº†è½¬ç å¤„ç†ã€‚</li><li>æ­¤å‰åªæ˜¯å•çº¯çš„è°ƒç”¨ï¼Œå¯¹å…¶ä¸€çŸ¥åŠè§£ã€‚</li></ol><p>æ‰€ä»¥å¾€åéœ€è¦æ³¨æ„çš„æ˜¯å¯¹äºä»»ä½•ä¸å¯æ§çš„å­—ç¬¦ä½œä¸º <code>URL</code> éƒ¨åˆ†çš„å†…å®¹éƒ½éœ€è¦ç”¨ <code>encodeURIComponent</code> è¿›è¡Œè½¬ä¹‰ã€‚</p><p>ç›®å‰å·¥ä½œä¸­é‡åˆ°å¸¸è§çš„åœºæ™¯æ˜¯æ‰‹åŠ¨æ‹¼æ¥ <code>URL</code>ï¼Œæ¯”å¦‚æ´»åŠ¨é¡µé¢çš„å›è·³ï¼Œä½†æ˜¯ä¸€èˆ¬ä¹Ÿä¸ä¼šå‡ºç°ç‰¹æ®Šå­—ç¬¦ã€ä¸­æ–‡ç­‰æƒ…å†µã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå¸¸è§çš„åº”è¯¥å°±æ˜¯æœç´¢äº†å§ï¼Œéœ€è¦ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„å…³é”®å­—ä½œä¸º <code>keywords</code>ï¼Œç„¶è€Œç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸å¯æ§åˆ¶ï¼Œå› æ­¤å¿…ç„¶éœ€è¦è½¬ä¹‰ã€‚</p><p>å†™åˆ°è¿™æ—¶ï¼Œæƒ³èµ·åœ¨å‰å…¬å¸å†™çš„æœç´¢ï¼Œæ˜¯å¦æœ‰é—®é¢˜å‘¢ï¼Ÿå»çœ‹ä¸‹â€¦</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/encodeURI" target="_blank" rel="external">encodeURI</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" target="_blank" rel="external">encodeURIComponent</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;URL&lt;/code&gt; ç¼–ç ï¼Œæ­¤å‰åªæ˜¯ä¸€çŸ¥åŠè§£ï¼Œæ‰€ä»¥å°±è¸©åˆ°å‘äº†ï¼Œæ•…æ­¤ä¸€è®°ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>Redux è§£æ</title>
    <link href="http://github.com/xwartz/2016/08/redux-src/"/>
    <id>http://github.com/xwartz/2016/08/redux-src/</id>
    <published>2016-08-09T07:29:18.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨ <code>Redux</code> è¿™ä¹ˆä¹…ï¼Œç†ä¸€ä¸‹ã€‚</p><a id="more"></a><p>Redux ä¸º JavaScript åº”ç”¨æä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†ã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>ä½¿ç”¨ <code>Redux</code> ä¹‹åï¼Œæ•°æ®çš„æµå‘å¯ä»¥ä½¿ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š</p><p><img src="./flow.gif" alt="flow"></p><p>(psï¼šå…¶å®å›¾ä¸­çš„ <code>Dispatcer</code> å¹¶ä¸å¤ªå‡†ç¡®ï¼Œ<code>Redux</code> æ²¡æœ‰ä¸“é—¨çš„ <code>Dispatcher</code>, æ•°æ®çš„æ›´æ–°æ˜¯é€šè¿‡ <code>store</code> ä¸­çš„ <code>dispatch</code> æ–¹æ³•ã€‚)</p><p>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¸…æ™°çš„æ•°æ®æµå‘: <code>View</code> è§¦å‘æ•°æ®æ›´æ–° â€”&gt; <code>Actions</code> å°†æ•°æ®ä¼ é€’åˆ° <code>Store</code> â€”&gt; <code>Store</code> æ›´æ–° <code>state</code> â€”&gt; æ›´æ–° <code>View</code>ã€‚</p><p><code>Redux</code> ä¸­æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€å­˜å‚¨åœ¨ä¸€é¢— <code>object tree</code> ä¸­ï¼Œå¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„ <code>Store</code>ï¼Œå¹¶ä¸” <code>state</code> æ˜¯åªè¯»çš„ï¼Œä½¿ç”¨çº¯å‡½æ•° <code>reducer</code> æ¥æ›´æ–° <code>state</code> ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>state</code> è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæ¥çš„ã€‚</p><p><code>Redux</code> é€šè¿‡ä»¥ä¸Šçº¦æŸè¯•å›¾è®© <code>state</code> çš„å˜åŒ–å¯é¢„æµ‹ã€‚</p><h3 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h3><p><code>Redux</code> çš„æºç éå¸¸å°‘ï¼Œä½†æ˜¯å´å®ç°äº†è¿™æ ·ä¸€ä¸ªæ•°æ®æµçš„ç®¡ç†ï¼Œéå¸¸å€¼å¾—é˜…è¯»å­¦ä¹ ã€‚</p><p><code>Redux</code> çš„æºç å¹¶ä¸æ˜¯éå¸¸å®¹æ˜“ç†è§£çš„ï¼ŒåŒ…å«å¾ˆå¤šé—­åŒ…å’Œé«˜é˜¶å‡½æ•°çš„ä½¿ç”¨å¯¼è‡´ç†è§£èµ·æ¥æœ‰ç‚¹ç»•ã€‚</p><p>äº†è§£äº†åŸç†ä¹‹åï¼Œå¯¹ <code>Redux</code> æºç çš„åˆ†æï¼Œå°±ç®€å•è®¸å¤šã€‚</p><p>æºç ç»“æ„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ applyMiddleware.js</div><div class="line">â”œâ”€â”€ bindActionCreators.js</div><div class="line">â”œâ”€â”€ combineReducers.js</div><div class="line">â”œâ”€â”€ compose.js</div><div class="line">â”œâ”€â”€ createStore.js</div><div class="line">â”œâ”€â”€ index.js</div><div class="line">â””â”€â”€ utils</div><div class="line">    â””â”€â”€ warning.js</div></pre></td></tr></table></figure><h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><p>ä»å…¥å£æ–‡ä»¶ <code>index.js</code> å¼€å§‹ï¼Œåˆ é™¤äº†éƒ¨åˆ† <code>warning</code> ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> createStore <span class="keyword">from</span> <span class="string">'./createStore'</span></div><div class="line"><span class="keyword">import</span> combineReducers <span class="keyword">from</span> <span class="string">'./combineReducers'</span></div><div class="line"><span class="keyword">import</span> bindActionCreators <span class="keyword">from</span> <span class="string">'./bindActionCreators'</span></div><div class="line"><span class="keyword">import</span> applyMiddleware <span class="keyword">from</span> <span class="string">'./applyMiddleware'</span></div><div class="line"><span class="keyword">import</span> compose <span class="keyword">from</span> <span class="string">'./compose'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> &#123;</div><div class="line">  createStore,</div><div class="line">  combineReducers,</div><div class="line">  bindActionCreators,</div><div class="line">  applyMiddleware,</div><div class="line">  compose</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œ<code>Redux</code> æš´éœ²çš„é¡¶å±‚ <code>API</code> å°±åªæœ‰ 4 ä¸ªã€‚</p><p>æ¥ä¸‹æ¥åˆ†ææ¯ä¸ª <code>API</code> ã€‚</p><h4 id="createStore-js"><a href="#createStore-js" class="headerlink" title="createStore.js"></a>createStore.js</h4><p>ç”¨æ¥åˆ›å»º <code>store</code>ï¼Œå…¶ä¸­æš´éœ² <code>dispatch</code>, <code>subscribe</code>, <code>getState</code>, <code>replaceReducer</code> æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * åˆå§‹åŒ–æ—¶ï¼Œé»˜è®¤ä¼ é€’çš„ actionï¼Œé»˜è®¤ä¹Ÿåº”è¯¥è¿”å›åˆå§‹åŒ–çš„ state</div><div class="line"> */</div><div class="line"><span class="keyword">export</span> <span class="keyword">var</span> ActionTypes = &#123;</div><div class="line">  <span class="attr">INIT</span>: <span class="string">'@@redux/INIT'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * åˆ›å»º store, å‚æ•°æ ¹ reducer, state ä»¥åŠä¸­é—´ä»¶</div><div class="line"> */</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> preloadedState === <span class="string">'function'</span> &amp;&amp; <span class="keyword">typeof</span> enhancer === <span class="string">'undefined'</span>) &#123;</div><div class="line">    enhancer = preloadedState</div><div class="line">    preloadedState = <span class="literal">undefined</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'undefined'</span>) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> enhancer !== <span class="string">'function'</span>) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the enhancer to be a function.'</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> enhancer(createStore)(reducer, preloadedState)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> reducer !== <span class="string">'function'</span>) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the reducer to be a function.'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> currentReducer = reducer</div><div class="line">  <span class="keyword">var</span> currentState = preloadedState</div><div class="line">  <span class="keyword">var</span> currentListeners = []</div><div class="line">  <span class="keyword">var</span> nextListeners = currentListeners</div><div class="line">  <span class="keyword">var</span> isDispatching = <span class="literal">false</span></div><div class="line"></div><div class="line">  <span class="comment">// å»é™¤å¼•ç”¨</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">ensureCanMutateNextListeners</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (nextListeners === currentListeners) &#123;</div><div class="line">      nextListeners = currentListeners.slice()</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * Reads the state tree managed by the store.</div><div class="line">   * @returns &#123;any&#125; The current state tree of your application.</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> currentState</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// è®¢é˜…äº‹ä»¶ï¼Œè¿”å›ç§»é™¤è®¢é˜…å‡½æ•°ï¼Œå·§å¦™çš„åˆ©ç”¨äº†é—­åŒ…</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> listener !== <span class="string">'function'</span>) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected listener to be a function.'</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> isSubscribed = <span class="literal">true</span></div><div class="line"></div><div class="line">    ensureCanMutateNextListeners()</div><div class="line">    nextListeners.push(listener)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (!isSubscribed) &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">      &#125;</div><div class="line"></div><div class="line">      isSubscribed = <span class="literal">false</span></div><div class="line"></div><div class="line">      ensureCanMutateNextListeners()</div><div class="line">      <span class="keyword">var</span> index = nextListeners.indexOf(listener)</div><div class="line">      nextListeners.splice(index, <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// æ‰§è¡Œ reducerï¼Œå¹¶è§¦å‘è®¢é˜…äº‹ä»¶</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</div><div class="line">    <span class="comment">// https://lodash.com/docs#isPlainObject</span></div><div class="line">    <span class="keyword">if</span> (!isPlainObject(action)) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</div><div class="line">        <span class="string">'Actions must be plain objects. '</span> +</div><div class="line">        <span class="string">'Use custom middleware for async actions.'</span></div><div class="line">      )</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> action.type === <span class="string">'undefined'</span>) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(</div><div class="line">        <span class="string">'Actions may not have an undefined "type" property. '</span> +</div><div class="line">        <span class="string">'Have you misspelled a constant?'</span></div><div class="line">      )</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (isDispatching) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Reducers may not dispatch actions.'</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">      isDispatching = <span class="literal">true</span></div><div class="line">      <span class="comment">// äº§ç”Ÿæ–°çš„ state</span></div><div class="line">      currentState = currentReducer(currentState, action)</div><div class="line">    &#125; <span class="keyword">finally</span> &#123;</div><div class="line">      isDispatching = <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// è§¦å‘è®¢é˜…çš„äº‹ä»¶</span></div><div class="line">    <span class="keyword">var</span> listeners = currentListeners = nextListeners</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; listeners.length; i++) &#123;</div><div class="line">      listeners[i]()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> action</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * åŠ¨æ€æ›¿æ¢ reducer</div><div class="line">   */</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">replaceReducer</span>(<span class="params">nextReducer</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> nextReducer !== <span class="string">'function'</span>) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected the nextReducer to be a function.'</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    currentReducer = nextReducer</div><div class="line">    dispatch(&#123; <span class="attr">type</span>: ActionTypes.INIT &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  dispatch(&#123; <span class="attr">type</span>: ActionTypes.INIT &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    dispatch,</div><div class="line">    subscribe,</div><div class="line">    getState,</div><div class="line">    replaceReducer</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="combineReducers-js"><a href="#combineReducers-js" class="headerlink" title="combineReducers.js"></a>combineReducers.js</h3><p><code>combineReducers</code> ç”¨äºæ‹†åˆ† <code>reducer</code>ï¼Œæ‹†åˆ†åçš„æ¯ä¸€å—ç‹¬ç«‹è´Ÿè´£ç®¡ç† <code>state</code> çš„ä¸€éƒ¨åˆ†ï¼Œæ–¹ä¾¿ç®¡ç†å¤æ‚çš„åº”ç”¨ã€‚</p><p><code>combineReducers</code> è¿”å›ä¸€ä¸ªå‡½æ•°å¯ä»¥å°†ä¼ å…¥çš„ <code>reducers</code> éƒ½è°ƒç”¨ä¸€éåˆæˆä¸€ä¸ªå¤§çš„ <code>state</code>ã€‚</p><p>æ¯”å¦‚æœ‰ <code>reducer</code>: r1, r2, r3;<br>å°† <code>{ r1, r2, r3 }</code> ä¼ å…¥ <code>combineReducers</code> å°†è¿”å›ä¸€ä¸ªå¯ä»¥äº§ç”Ÿè¿™æ ·çš„ <code>state</code>: <code>{ r1: {}, r2: {}, r3: {} }</code>  çš„å‡½æ•°ã€‚</p><p>å…¶ä¸­å¾ˆé•¿ä¸€æ®µä»£ç éƒ½æ˜¯å¯¹ <code>reducers</code> åˆæ³•æ€§çš„æ£€æµ‹ï¼Œè¿™é‡Œåªéœ€è¦åˆ†æä¸‹ <code>combineReducers</code> å‡½æ•°çš„å®ç°ï¼Œä¸€äº›ä»£ç å·²ç»åˆ é™¤æ‰äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">combineReducers</span>(<span class="params">reducers</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> reducerKeys = <span class="built_in">Object</span>.keys(reducers)</div><div class="line">  <span class="comment">// å°† reducers å­˜å‚¨åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­</span></div><div class="line">  <span class="keyword">var</span> finalReducers = &#123;&#125;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; reducerKeys.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> key = reducerKeys[i]</div><div class="line">    </div><div class="line">    ... çœç•¥ <span class="string">`reducer`</span> çš„åˆç†æ€§æ£€æµ‹</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> reducers[key] === <span class="string">'function'</span>) &#123;</div><div class="line">      finalReducers[key] = reducers[key]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> finalReducerKeys = <span class="built_in">Object</span>.keys(finalReducers)</div><div class="line"></div><div class="line">  ...çœç•¥ <span class="string">`reducer`</span> çš„ä¸åˆç†çš„å¤„ç†</div><div class="line">  </div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">combination</span>(<span class="params">state = &#123;&#125;, action</span>) </span>&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">var</span> hasChanged = <span class="literal">false</span></div><div class="line">    <span class="keyword">var</span> nextState = &#123;&#125;</div><div class="line">    <span class="comment">// éå†è°ƒç”¨ reducersï¼Œäº§ç”Ÿä¸€ä¸ªå¤§çš„ stateï¼Œkey å’Œ reducer åå¯¹åº” </span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</div><div class="line">      <span class="keyword">var</span> key = finalReducerKeys[i]</div><div class="line">      <span class="keyword">var</span> reducer = finalReducers[key]</div><div class="line">      <span class="keyword">var</span> previousStateForKey = state[key]</div><div class="line">      <span class="keyword">var</span> nextStateForKey = reducer(previousStateForKey, action)</div><div class="line">      </div><div class="line">      nextState[key] = nextStateForKey</div><div class="line">      hasChanged = hasChanged || nextStateForKey !== previousStateForKey</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> hasChanged ? nextState : state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="bindActionCreators-js"><a href="#bindActionCreators-js" class="headerlink" title="bindActionCreators.js"></a>bindActionCreators.js</h4><p>ç±»ä¼¼ <code>combineReducers</code>, <code>bindActionCreators</code> å‡½æ•°æŠŠ <code>action creators</code> è½¬æˆæ‹¥æœ‰åŒå <code>keys</code> çš„å¯¹è±¡ï¼Œ<br>å¹¶ä½¿ç”¨ <code>dispatch</code> æŠŠæ¯ä¸ª <code>action creator</code> åŒ…è£…èµ·æ¥ï¼Œè¿™æ ·åœ¨è°ƒç”¨ <code>action</code> æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨ <code>dispatch</code>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦å°† <code>dispatch</code> æ‰‹åŠ¨ä¼ å…¥åˆ°å­ç»„ä»¶ä¸­äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åœ¨ action å¤–éƒ¨åŒ…è£…ä¸€å±‚ dispatch</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindActionCreator</span>(<span class="params">actionCreator, dispatch</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> dispatch(actionCreator(...args))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">bindActionCreators</span>(<span class="params">actionCreators, dispatch</span>) </span>&#123;</div><div class="line">  <span class="comment">// å¦‚æœæ˜¯å‡½æ•°ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬å°±åªæœ‰ä¸€ä¸ª action</span></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators === <span class="string">'function'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> bindActionCreator(actionCreators, dispatch)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ...</div><div class="line"></div><div class="line">  <span class="comment">// éå† actions ï¼ŒåŒ…è£…ä¸€å±‚ dispatch</span></div><div class="line">  <span class="keyword">var</span> keys = <span class="built_in">Object</span>.keys(actionCreators)</div><div class="line">  <span class="keyword">var</span> boundActionCreators = &#123;&#125;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> key = keys[i]</div><div class="line">    <span class="keyword">var</span> actionCreator = actionCreators[key]</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreator === <span class="string">'function'</span>) &#123;</div><div class="line">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> boundActionCreators</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="compose-js"><a href="#compose-js" class="headerlink" title="compose.js"></a>compose.js</h4><p><code>compose</code> çš„ä½œç”¨æ˜¯ä»å³åˆ°å·¦æ¥ç»„åˆå¤šä¸ªå‡½æ•°ï¼Œä¸ä½¿ç”¨æ·±åº¦å³æ‹¬å·çš„æƒ…å†µä¸‹æ¥å†™æ·±åº¦åµŒå¥—çš„å‡½æ•°ï¼Œå†…éƒ¨å®ç°å…¶å®å°±æ˜¯ä¸€ä¸ª <code>reduceRight</code>ã€‚</p><p>å…³äº <code>reduceRight</code>, æŸ¥çœ‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight</a></p><p>æ¯”å¦‚ <code>a(b(c()))</code> å¯ä»¥è¿™æ ·å†™ <code>compose(a,b,c)</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">...funcs</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">1</span>) &#123;</div><div class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>]</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> last = funcs[funcs.length - <span class="number">1</span>]</div><div class="line">  <span class="keyword">const</span> rest = funcs.slice(<span class="number">0</span>, <span class="number">-1</span>)</div><div class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> rest.reduceRight(<span class="function">(<span class="params">composed, f</span>) =&gt;</span> f(composed), last(...args))</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="applyMiddleware-js"><a href="#applyMiddleware-js" class="headerlink" title="applyMiddleware.js"></a>applyMiddleware.js</h4><p><code>applyMiddleware</code> æœ€ç»ˆè¿”å›çš„æ˜¯ä¸€ä¸ªä½œç”¨äº† <code>middlewares</code> çš„ <code>store</code>ã€‚</p><p>ä¹‹å <code>store.dispatch</code> çš„è°ƒç”¨éƒ½ä¼šç»å†å„ä¸ª <code>middleware</code>ï¼Œæ‰€ä»¥ä½ å°±å¯ä»¥åœ¨ä¸­é—´ä»¶ä¸­åšä¸€äº›é¢å¤–çš„äº‹æƒ…ï¼Œæ¯”å¦‚æ‰“å°æ—¥å¿—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> compose <span class="keyword">from</span> <span class="string">'./compose'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">applyMiddleware</span>(<span class="params">...middlewares</span>) </span>&#123;</div><div class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªæ¥æ”¶ createStore çš„å‡½æ•°</span></div><div class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">createStore</span>) =&gt;</span> </div><div class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªæ¥æ”¶ reducer, preloadedState, enhancer çš„å‡½æ•°</span></div><div class="line">    (reducer, preloadedState, enhancer) =&gt; &#123;</div><div class="line">    <span class="comment">// åˆ›å»º store</span></div><div class="line">    <span class="keyword">var</span> store = createStore(reducer, preloadedState, enhancer)</div><div class="line">    <span class="keyword">var</span> dispatch = store.dispatch</div><div class="line">    <span class="keyword">var</span> chain = []</div><div class="line"></div><div class="line">    <span class="keyword">var</span> middlewareAPI = &#123;</div><div class="line">      <span class="attr">getState</span>: store.getState,</div><div class="line">      <span class="attr">dispatch</span>: <span class="function">(<span class="params">action</span>) =&gt;</span> dispatch(action)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ä½œç”¨æ¯ä¸ª middleware</span></div><div class="line">    chain = middlewares.map(<span class="function"><span class="params">middleware</span> =&gt;</span> middleware(middlewareAPI))</div><div class="line">    <span class="comment">// å°† dispatch ä¼ ç»™æœ€åä¸€ä¸ª middleware</span></div><div class="line">    dispatch = compose(...chain)(store.dispatch)</div><div class="line"></div><div class="line">    <span class="comment">// è¿”å›ä½œç”¨ middleware ä¹‹åçš„ store</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      ...store,</div><div class="line">      dispatch</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ¯ä¸ª <code>middleware</code> æ¥å— <code>Store</code> çš„ <code>dispatch</code> å’Œ <code>getState</code> å‡½æ•°ä½œä¸ºå‘½åå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚<br>è¯¥å‡½æ•°ä¼šè¢«ä¼ å…¥ è¢«ç§°ä¸º <code>next</code> çš„ä¸‹ä¸€ä¸ª <code>middleware</code> çš„ <code>dispatch</code> æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ¥æ”¶ <code>action</code> çš„æ–°å‡½æ•°ï¼Œ<br>è¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨ <code>next(action)</code>ï¼Œæˆ–è€…åœ¨å…¶ä»–éœ€è¦çš„æ—¶åˆ»è°ƒç”¨ï¼Œç”šè‡³æ ¹æœ¬ä¸å»è°ƒç”¨å®ƒã€‚</p><p>è°ƒç”¨é“¾ä¸­æœ€åä¸€ä¸ª <code>middleware</code> ä¼šæ¥å—çœŸå®çš„ <code>store</code> çš„ <code>dispatch</code> æ–¹æ³•ä½œä¸º <code>next</code> å‚æ•°ï¼Œå¹¶å€Ÿæ­¤ç»“æŸè°ƒç”¨é“¾ã€‚</p><p>æ‰€ä»¥ï¼Œ<code>middleware</code> çš„å‡½æ•°ç­¾åæ˜¯ <code>({ getState, dispatch }) =&gt; next =&gt; action</code>ã€‚</p><p>ä¸€ä¸ªç®€å• <code>middleware</code> å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">logger</span>(<span class="params">&#123; getState &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">next</span>) =&gt;</span> (action) =&gt; &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'will dispatch'</span>, action)</div><div class="line"></div><div class="line">    <span class="comment">// è°ƒç”¨ middleware é“¾ä¸­ä¸‹ä¸€ä¸ª middleware çš„ dispatchã€‚</span></div><div class="line">    <span class="keyword">let</span> returnValue = next(action)</div><div class="line"></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'state after dispatch'</span>, getState())</div><div class="line"></div><div class="line">    <span class="comment">// ä¸€èˆ¬ä¼šæ˜¯ action æœ¬èº«ï¼Œé™¤é</span></div><div class="line">    <span class="comment">// åé¢çš„ middleware ä¿®æ”¹äº†å®ƒã€‚</span></div><div class="line">    <span class="keyword">return</span> returnValue</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å½“è°ƒç”¨ <code>store.dispatch</code> ä¹‹åï¼Œä¼šæ‰“å°å‡º <code>will dispatch xxx</code>, <code>state after dispatch xxx</code> ä¿¡æ¯ã€‚</p><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p><code>Redux</code> çš„ä»£ç é‡Œä½¿ç”¨é«˜é˜¶å‡½æ•°æ¥ç®€åŒ–ä»£ç ï¼Œä½†æ˜¯è®©äººé˜…è¯»èµ·æ¥å¹¶ä¸å®¹æ˜“ç†è§£ï¼Œæ€»æ„Ÿè§‰æœ‰äº›ç»•ã€‚</p><p>æ„Ÿè§‰è‡ªå·±å¹³æ—¶å¤šå±‚åµŒå¥—å‡½æ•°ç”¨çš„å¤ªå°‘äº†ï¼Œé€»è¾‘éƒ½å¿«è½¬ä¸è¿‡æ¥äº†â€¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨ &lt;code&gt;Redux&lt;/code&gt; è¿™ä¹ˆä¹…ï¼Œç†ä¸€ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ç»§æ‰¿</title>
    <link href="http://github.com/xwartz/2016/08/javascript-inheritance/"/>
    <id>http://github.com/xwartz/2016/08/javascript-inheritance/</id>
    <published>2016-08-04T01:30:20.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äº JavaScript ç»§æ‰¿çš„å›é¡¾ã€‚</p><a id="more"></a><blockquote><p><code>JavaScript</code> æ˜¯ä¸€ç§åŸºäºåŸå‹çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œè€Œä¸æ˜¯åŸºäºç±»çš„ã€‚<br>  æ­£æ˜¯ç”±äºè¿™ä¸€æ ¹æœ¬çš„åŒºåˆ«ï¼Œå…¶å¦‚ä½•åˆ›å»ºå¯¹è±¡çš„å±‚çº§ç»“æ„ä»¥åŠå¯¹è±¡çš„å±æ€§ä¸å±æ€§å€¼æ˜¯å¦‚ä½•ç»§æ‰¿çš„å¹¶ä¸æ˜¯é‚£ä¹ˆæ¸…æ™°ã€‚</p></blockquote><h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><p>å¯¹è±¡å°±æ˜¯ä¸€ç³»åˆ—å±æ€§çš„é›†åˆï¼Œå±æ€§å°±æ˜¯é”®å€¼å¯¹ <code>key: value</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = &#123;</div><div class="line">  <span class="attr">x</span>: <span class="number">10</span>,</div><div class="line">  <span class="attr">y</span>: <span class="number">20</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p><code>JavaScript</code> ä¸­çš„ç»§æ‰¿å…¶å®å°±æ˜¯å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´å±‚çº§ç»“æ„å…³ç³»çš„è®¨è®ºã€‚</p><h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3><p>åœ¨ <code>JavaScript</code> ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å®ƒçš„åŸå‹ <code>prototype</code> å¯¹è±¡çš„å†…éƒ¨é“¾æ¥ã€‚<br>è¿™ä¸ªåŸå‹å¯¹è±¡åˆæœ‰è‡ªå·±çš„åŸå‹ï¼Œç›´åˆ°æŸä¸ªå¯¹è±¡çš„åŸå‹ä¸º <code>null</code> ä¸ºæ­¢ã€‚è¿™ç§ä¸€çº§ä¸€çº§çš„é“¾ç»“æ„å°±ç§°ä¸ºåŸå‹é“¾ï¼ˆprototype chainï¼‰ã€‚</p><p>å¯¹è±¡åŸå‹æŒ‡å®šå¯ä»¥ä½¿ç”¨ <code>__proto__</code> å±æ€§ã€‚</p><p class="tip"><br>æ ¹æ® ECMAScript æ ‡å‡†ï¼ŒsomeObject.[[Prototype]] ç¬¦å·æ˜¯ç”¨äºæŒ‡æ´¾ someObject çš„åŸå‹ã€‚<br>è¿™ä¸ªç­‰åŒäº JavaScript çš„ <code>__proto__</code>  å±æ€§ï¼ˆç°å·²å¼ƒç”¨ï¼‰ã€‚<br>ä» ECMAScript 6 å¼€å§‹, [[Prototype]] <code>å¯ä»¥ç”¨ Object.getPrototypeOf()</code> å’Œ <code>Object.setPrototypeOf()</code> è®¿é—®å™¨æ¥è®¿é—®ã€‚<br></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ä¸‹æ¶‰åŠåˆ° <code>__proto__</code> çš„æ–¹å¼ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ <code>Object.getPrototypeOf()</code> æ¥è·å–åŸå‹ï¼Œæˆ–è€…ä½¿ç”¨ <code>Object.setPrototypeOf()</code> æ¥è®¾ç½®åŸå‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = &#123;</div><div class="line">  <span class="attr">x</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">y</span>: <span class="number">2</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> b = &#123;&#125;</div><div class="line"></div><div class="line">b.__proto__ = a <span class="comment">// å°†å¯¹è±¡çš„åŸå‹æŒ‡å‘ a, ç­‰åŒäº b = Object.setPrototypeOf(&#123;&#125;, a)</span></div><div class="line"></div><div class="line">b.x <span class="comment">// 1</span></div><div class="line">b.y <span class="comment">// 2</span></div></pre></td></tr></table></figure><p>å…¶å® <code>new</code> å…³é”®å­—ä¼šåšç±»ä¼¼çš„æ“ä½œï¼Œåœ¨æ„é€ å‡½æ•°ä¸‹ä¼šåšè¯´æ˜ã€‚</p><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><p>åœ¨ <code>JavaScript</code> ä¸­æ„é€ å‡½æ•°å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦ä½œç”¨è¿™ä¸ªå‡½æ•°ï¼Œå®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ„é€ å‡½æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">y</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.y = y</div><div class="line">&#125;</div><div class="line"></div><div class="line">Foo.prototype.x = <span class="number">1</span></div><div class="line"></div><div class="line">Foo.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">// å®ä¾‹åŒ–å¯¹è±¡ b</span></div><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> Foo(<span class="number">2</span>)</div><div class="line"></div><div class="line">b.x <span class="comment">// 1</span></div><div class="line">b.y <span class="comment">// 2</span></div><div class="line"></div><div class="line">b.__proto__ === Foo.prototype <span class="comment">// true, ç­‰åŒäº Object.setPrototypeOf(b) === Foo.prototype</span></div><div class="line"></div><div class="line"><span class="comment">// constructor è¿”å›ä¸€ä¸ªæŒ‡å‘åˆ›å»ºäº†è¯¥å¯¹è±¡åŸå‹çš„å‡½æ•°å¼•ç”¨</span></div><div class="line">b.constructor === Foo <span class="comment">// true</span></div><div class="line"></div><div class="line">Foo.prototype.constructor === Foo <span class="comment">// true</span></div><div class="line"></div><div class="line">b.fn === b.__proto__.fn <span class="comment">// true</span></div><div class="line"></div><div class="line">b.__proto__.fn === Foo.prototype.fn <span class="comment">// true</span></div></pre></td></tr></table></figure><img src="/blog/2016/08/javascript-inheritance/1.png" alt="1.png" title=""><p>ä»ä»¥ä¸Šç»“æœå¯ä»¥æ¨æµ‹ï¼Œå½“æ‰§è¡Œ <code>new</code> æ“ä½œç¬¦æ—¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> Foo(<span class="number">2</span>)</div></pre></td></tr></table></figure><p><code>JavaScript</code> å®é™…ä¸Šæ‰§è¡Œäº†ä»¥ä¸‹æ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Object</span>()</div><div class="line">b.__proto__ = Foo.prototype</div><div class="line">Foo.call(b, <span class="number">2</span>)</div></pre></td></tr></table></figure><p>çŸ¥é“äº†åŸç†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼æ¥å®ç°ç»§æ‰¿äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = x</div><div class="line">&#125;</div><div class="line"></div><div class="line">Foo.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Bar ç»§æ‰¿ Foo</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="comment">// ç»§æ‰¿æ„é€ å‡½æ•°ä¸­çš„å±æ€§</span></div><div class="line">  Foo.call(<span class="keyword">this</span>, x)</div><div class="line">  <span class="comment">// å¢åŠ å±æ€§</span></div><div class="line">  <span class="keyword">this</span>.y = y</div><div class="line">&#125;</div><div class="line"><span class="comment">// ç»§æ‰¿åŸå‹é“¾ä¸Šçš„å±æ€§</span></div><div class="line"><span class="comment">// è¿™é‡Œæœ‰ä¸ªä¸ä¼˜é›…çš„åœ°æ–¹æ˜¯ä¼šåœ¨ Bar åŸå‹è¿ä¸Šäº§ç”Ÿä¸€ä¸ª Foo è‡ªèº«çš„å±æ€§ x undefined</span></div><div class="line">Bar.prototype = <span class="keyword">new</span> Foo()</div><div class="line"></div><div class="line"><span class="comment">// å¦‚æœ Bar.prototype = Foo.prototype, é™¤äº†æ„é€ å‡½æ•° Bar å’Œ Foo å…¶å®æ˜¯ä¸€æ ·çš„</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo(<span class="number">1</span>)</div><div class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> Bar(<span class="number">1</span>,<span class="number">2</span>)</div><div class="line"></div><div class="line">bar.__proto__ === Bar.prototype <span class="comment">// true</span></div><div class="line">bar.__proto__.__proto__ === foo.__proto__ <span class="comment">// true</span></div></pre></td></tr></table></figure><h5 id="æ€»å¾—æ¥è¯´ï¼Œè¦å®ç°ç»§æ‰¿åˆ†ä¸¤æ­¥èµ°ï¼š"><a href="#æ€»å¾—æ¥è¯´ï¼Œè¦å®ç°ç»§æ‰¿åˆ†ä¸¤æ­¥èµ°ï¼š" class="headerlink" title="æ€»å¾—æ¥è¯´ï¼Œè¦å®ç°ç»§æ‰¿åˆ†ä¸¤æ­¥èµ°ï¼š"></a>æ€»å¾—æ¥è¯´ï¼Œè¦å®ç°ç»§æ‰¿åˆ†ä¸¤æ­¥èµ°ï¼š</h5><ol><li>ç»§æ‰¿æ„é€ å‡½æ•°é‡Œçš„å±æ€§(çˆ¶ç±»è‡ªèº«çš„å±æ€§)</li><li>ç»§æ‰¿åŸå‹é“¾ä¸Šçš„å±æ€§</li></ol><h3 id="Object-create-å®ç°ç»§æ‰¿"><a href="#Object-create-å®ç°ç»§æ‰¿" class="headerlink" title="Object.create å®ç°ç»§æ‰¿"></a>Object.create å®ç°ç»§æ‰¿</h3><blockquote><p><code>Object.create()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰æŒ‡å®šåŸå‹å’Œè‹¥å¹²ä¸ªæŒ‡å®šå±æ€§çš„å¯¹è±¡ã€‚</p></blockquote><p><em>è¿™æ˜¯ä¸€ä¸ª <code>ES5</code> ä¸­çš„æ–¹æ³•ï¼ŒIE &gt;= 9ã€‚</em></p><p>ä½¿ç”¨ <code>Object.create()</code> æ¥è§£å†³ä¸Šé¢å­ç±»åŸå‹é“¾ä¸Šäº§ç”Ÿçˆ¶ç±»è‡ªèº«å±æ€§çš„é—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = x</div><div class="line">&#125;</div><div class="line"></div><div class="line">Foo.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Bar ç»§æ‰¿ Foo</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="comment">// ç»§æ‰¿æ„é€ å‡½æ•°ä¸­çš„å±æ€§</span></div><div class="line">  Foo.call(<span class="keyword">this</span>, x)</div><div class="line">  <span class="comment">// å¢åŠ å±æ€§</span></div><div class="line">  <span class="keyword">this</span>.y = y</div><div class="line">&#125;</div><div class="line"><span class="comment">// ç»§æ‰¿åŸå‹é“¾ä¸Šçš„å±æ€§</span></div><div class="line">Bar.prototype = <span class="built_in">Object</span>.create(Foo.prototype)</div><div class="line"></div><div class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo(<span class="number">1</span>)</div><div class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> Bar(<span class="number">1</span>,<span class="number">2</span>)</div><div class="line"></div><div class="line">bar.__proto__ === Bar.prototype <span class="comment">// true</span></div><div class="line">bar.__proto__.__proto__ === foo.__proto__ <span class="comment">// true</span></div></pre></td></tr></table></figure><h3 id="class-å…³é”®å­—"><a href="#class-å…³é”®å­—" class="headerlink" title="class å…³é”®å­—"></a>class å…³é”®å­—</h3><p>ES6 åŠ å…¥è¯­æ³•ç³– <code>class</code>ï¼Œå®ç°ç»§æ‰¿å°±æ›´åŠ æ–¹ä¾¿ä¸€äº›äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  <span class="comment">// æ„é€ å‡½æ•°</span></div><div class="line">  <span class="keyword">constructor</span>(x) &#123;</div><div class="line">    <span class="keyword">this</span>.x = x</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// åŸå‹é“¾ä¸Šçš„æ–¹æ³•</span></div><div class="line">  fn () &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  <span class="comment">// å­ç±»æ„é€ å‡½æ•°</span></div><div class="line">  <span class="keyword">constructor</span>(x, y) &#123;</div><div class="line">    <span class="keyword">super</span>(x) <span class="comment">// è®¿é—®çˆ¶å¯¹è±¡ä¸Šçš„æ„é€ å‡½æ•°</span></div><div class="line">    <span class="keyword">this</span>.y = y</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo(<span class="number">1</span>)</div><div class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> Bar(<span class="number">1</span>,<span class="number">2</span>)</div><div class="line"></div><div class="line">bar.__proto__.__proto__ === foo.__proto__ <span class="comment">// true</span></div></pre></td></tr></table></figure><h3 id="å¤šç»§æ‰¿"><a href="#å¤šç»§æ‰¿" class="headerlink" title="å¤šç»§æ‰¿"></a>å¤šç»§æ‰¿</h3><blockquote><p>æŸäº›é¢å‘å¯¹è±¡è¯­è¨€æ”¯æŒå¤šé‡ç»§æ‰¿ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡å¯ä»¥ä»æ— å…³çš„å¤šä¸ªçˆ¶å¯¹è±¡ä¸­ç»§æ‰¿å±æ€§å’Œå±æ€§å€¼ã€‚JavaScript ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ã€‚</p></blockquote><p>åœ¨ <code>JavaScript</code> ä¸­ï¼Œå¯ä»¥åœ¨æ„é€ å™¨å‡½æ•°ä¸­è°ƒç”¨å¤šä¸ªå…¶å®ƒçš„æ„é€ å™¨å‡½æ•°ã€‚è¿™ä¸€ç‚¹é€ æˆäº†å¤šé‡ç»§æ‰¿çš„å‡è±¡ã€‚ä¾‹å¦‚ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.x = x</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params">y</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.y = y</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Baz</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  Foo.call(<span class="keyword">this</span>, x)</div><div class="line">  Bar.call(<span class="keyword">this</span>, y)</div><div class="line">&#125;</div><div class="line"></div><div class="line">Baz.prototype = <span class="keyword">new</span> Bar()</div><div class="line"></div><div class="line"><span class="keyword">var</span> baz = <span class="keyword">new</span> Baz(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// &#123;x: 1, y: 2&#125;</span></div></pre></td></tr></table></figure><p>ä»¥ä¸Šçœ‹èµ·æ¥ baz çš„å±æ€§ <code>{x: 1, y: 2}</code> ä¸­åŒ…å«äº† <code>Foo</code> å’Œ <code>Bar</code> çš„å±æ€§ï¼Œä½†æ˜¯æ›´æ–° <code>Foo</code> çš„åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œå¹¶ä¸ä¼šè¢«ç»§æ‰¿ä¸‹æ¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Foo.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure><p>å®ä¾‹ baz è¿˜æ˜¯åŸæ¥çš„æ ·å­ï¼Œå¹¶æ²¡æœ‰ fn å±æ€§ã€‚<br>å½“ç„¶ä½ å¯ä»¥æŠŠ <code>Foo</code> çš„åŸå‹é“¾ä¸Šçš„å±æ€§å¤åˆ¶åˆ° Baz çš„ <code>prototype</code> ä¸Šï¼Œä½†ä¹‹å <code>Foo</code> åŸå‹é“¾ä¸Šå±æ€§çš„æ›´æ–°å¹¶ä¸ä¼šè¢«ç»§æ‰¿ã€‚</p><p>é€ æˆè¿™ä¸ªçš„åŸå› æ˜¯: <code>JavaScript</code> çš„ç»§æ‰¿æ˜¯åœ¨è¿è¡Œæ—¶é€šè¿‡æ£€ç´¢å¯¹è±¡çš„åŸå‹é“¾æ¥å®ç°çš„ã€‚å› ä¸ºå¯¹è±¡åªæœ‰ä¸€ä¸ªåŸå‹ä¸ä¹‹å…³è”ï¼Œæ‰€ä»¥ <code>JavaScript</code> æ— æ³•åŠ¨æ€åœ°ä»å¤šä¸ªåŸå‹é“¾ä¸­ç»§æ‰¿ã€‚</p><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>æ€»å¾—æ¥è¯´ä½¿ç”¨ <code>ES6</code> æ¥å®ç°ç»§æ‰¿æ›´åŠ æ–¹ä¾¿äº†ï¼Œä½†æ˜¯äº†è§£ä¸‹åŸå‹é“¾è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto" target="_blank" rel="external">Object.prototype.<strong>proto</strong></a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor" target="_blank" rel="external">Object.prototype.constructor</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects" target="_blank" rel="external">Working with objects</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Details_of_the_Object_Model" target="_blank" rel="external">Details of the object model</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" target="_blank" rel="external">Inheritance and the prototype chain</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="external">Object.create()</a></p><p><a href="http://dmitrysoshnikov.com/ecmascript/javascript-the-core/" target="_blank" rel="external">JavaScript. The core. (Dmitry A. Soshnikov ECMA-262 article series)</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äº JavaScript ç»§æ‰¿çš„å›é¡¾ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å•å…ƒæµ‹è¯• Jenkins é›†æˆ</title>
    <link href="http://github.com/xwartz/2016/08/jenkins-ci-unit-test/"/>
    <id>http://github.com/xwartz/2016/08/jenkins-ci-unit-test/</id>
    <published>2016-08-02T03:15:18.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ä¸‹ Jenkinsï¼Œå†™ä¸ªé…ç½®æ•™ç¨‹å§ã€‚</p><a id="more"></a><img src="/blog/2016/08/jenkins-ci-unit-test/jenkins.png" alt="jenkins.png" title=""><p>ä¹‹å‰å†™è¿‡å‡ ç¯‡å…³äºå‰ç«¯<a href="http://xwartz.github.io/pupa/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" target="_blank" rel="external">å•å…ƒæµ‹è¯•çš„æ–‡ç« </a>ï¼Œç°åœ¨ç»“åˆé¡¹ç›®ç®€å•å†™ä¸€ä¸‹å¦‚ä½•ä¸ Jenkins æ­é…é›†æˆã€‚</p><p>å…³äºå¦‚ä½•è‡ªå·±æ­å»º Jenkins æœåŠ¡å°±ä¸è¯´äº†ï¼Œç›´æ¥çœ‹<a href="https://jenkins.io" target="_blank" rel="external">å®˜æ–¹æ•™ç¨‹</a>ã€‚</p><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><img src="/blog/2016/08/jenkins-ci-unit-test/0.png" alt="0.png" title=""><p>å¡«å……ä¸€ä¸‹é¡¹ç›®ä¿¡æ¯</p><img src="/blog/2016/08/jenkins-ci-unit-test/2.png" alt="2.png" title=""><h3 id="é…ç½®-gitlab"><a href="#é…ç½®-gitlab" class="headerlink" title="é…ç½® gitlab"></a>é…ç½® gitlab</h3><h3 id="ç»™-Jenkins-è´¦æˆ·æ·»åŠ æƒé™"><a href="#ç»™-Jenkins-è´¦æˆ·æ·»åŠ æƒé™" class="headerlink" title="ç»™ Jenkins è´¦æˆ·æ·»åŠ æƒé™"></a>ç»™ Jenkins è´¦æˆ·æ·»åŠ æƒé™</h3><img src="/blog/2016/08/jenkins-ci-unit-test/1.png" alt="1.png" title=""><p>æƒé™é€‰æ‹©å¯ä»¥å‚è€ƒæ–‡æ¡£ <a href="http://docs.gitlab.com/ee/user/permissions.html#gitlab-ci" target="_blank" rel="external">http://docs.gitlab.com/ee/user/permissions.html#gitlab-ci</a></p><h3 id="å¢åŠ -Web-hooks"><a href="#å¢åŠ -Web-hooks" class="headerlink" title="å¢åŠ  Web hooks"></a>å¢åŠ  Web hooks</h3><img src="/blog/2016/08/jenkins-ci-unit-test/7.png" alt="7.png" title=""><p>æ ¹æ®è‡ªèº«éœ€è¦é€‰æ‹©è§¦å‘äº‹ä»¶ã€‚</p><h3 id="é€‰æ‹©-Build-åˆ†æ”¯ä»¥åŠ-Build-Triggers"><a href="#é€‰æ‹©-Build-åˆ†æ”¯ä»¥åŠ-Build-Triggers" class="headerlink" title="é€‰æ‹© Build åˆ†æ”¯ä»¥åŠ Build Triggers"></a>é€‰æ‹© Build åˆ†æ”¯ä»¥åŠ Build Triggers</h3><img src="/blog/2016/08/jenkins-ci-unit-test/3.png" alt="3.png" title=""><p>æ ¹æ®è‡ªèº«éœ€è¦é€‰æ‹©ã€‚</p><h3 id="ç¼–å†™-Build-Shell"><a href="#ç¼–å†™-Build-Shell" class="headerlink" title="ç¼–å†™ Build Shell"></a>ç¼–å†™ Build Shell</h3><img src="/blog/2016/08/jenkins-ci-unit-test/4.png" alt="4.png" title=""><p>ä¸€èˆ¬æ ¹æ® <code>package.json</code> çš„ <code>scripts</code> å†™å°±å¥½äº†ã€‚</p><p>å…³äºæµ‹è¯•è„šæœ¬ç¼–å†™å¯ä»¥å‚è€ƒ <a href="https://github.com/xwartz/webpack-karma-mocha">https://github.com/xwartz/webpack-karma-mocha</a></p><h3 id="å¢åŠ -Post-build-Actions"><a href="#å¢åŠ -Post-build-Actions" class="headerlink" title="å¢åŠ  Post-build Actions"></a>å¢åŠ  Post-build Actions</h3><img src="/blog/2016/08/jenkins-ci-unit-test/5.png" alt="5.png" title=""><p>æˆ‘è¿™é‡Œç”¨äº†<a href="https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin" target="_blank" rel="external">HTMLçš„æ’ä»¶</a>ï¼Œä¼šç”Ÿæˆ HTML æŠ¥å‘Šã€‚</p><p>å…¶ä»–ä¸€äº›æ’ä»¶å¯ä»¥æŸ¥çœ‹è¿™é‡Œ <a href="https://wiki.jenkins-ci.org/display/JENKINS/Plugins" target="_blank" rel="external">Plugins</a>ï¼Œå¯ä»¥å¢åŠ ç‚¹é‚®ä»¶æŠ¥å‘Šç­‰ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚æ¥å§ã€‚</p><h3 id="ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡"><a href="#ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡" class="headerlink" title="ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡"></a>ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡</h3><img src="/blog/2016/08/jenkins-ci-unit-test/6.png" alt="6.png" title=""><p>æœ€åç”Ÿæˆçš„è¦†ç›–ç‡ç±»ä¼¼è¿™æ ·å­çš„ã€‚</p><h3 id="Over"><a href="#Over" class="headerlink" title="Over"></a>Over</h3><p>è¿™é‡Œåªæ˜¯ç®€å•ä»‹ç»ä¸‹æ€ä¹ˆé…åˆ <code>Gitlab</code> ä»“åº“ä½¿ç”¨ï¼Œå…¶ä»–ä¸€äº›ä¸œè¥¿è¿˜æ˜¯éœ€è¦è‡ªå·±å»ç ”ç©¶ç ”ç©¶ï¼Œ<code>Jenkins</code> åœ¨å…¬å¸å†…éƒ¨æ­å»ºæœåŠ¡ä½¿ç”¨è¿˜æ˜¯ä¸é”™çš„ã€‚</p><p>å¦‚æœä½ çš„é¡¹ç›®æ˜¯å¼€æºçš„è¯ï¼Œæ¨èä½¿ç”¨ <a href="https://travis-ci.org/" target="_blank" rel="external">travis-ci</a>ï¼Œæˆ–è€…èŠ±é’±æ”¯æŒç§æœ‰ä»“åº“ã€‚<br>æµ‹è¯•è¦†ç›–ç‡æ­é… <a href="https://codecov.io/" target="_blank" rel="external">CodeCover</a>ï¼Œè¿˜å¯ä»¥åœ¨è‡ªå·±çš„å¼€æºé¡¹ç›®ä¸Šå¢åŠ å‡ ä¸ª logoï¼Œç»™ä½¿ç”¨çš„äººå¢åŠ ç‚¹ä¿¡å¿ƒã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¹ ä¸‹ Jenkinsï¼Œå†™ä¸ªé…ç½®æ•™ç¨‹å§ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å•å…ƒæµ‹è¯•" scheme="http://github.com/xwartz/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    
      <category term="code" scheme="http://github.com/xwartz/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>æ²¡é‚£ä¹ˆç®€å•</title>
    <link href="http://github.com/xwartz/2016/07/keng/"/>
    <id>http://github.com/xwartz/2016/07/keng/</id>
    <published>2016-07-11T16:41:56.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŒ–çš„å‘ï¼Œæ€»æ˜¯è¦æœ‰äººæ¥å¡«çš„ï¼Œä¸æ˜¯ç°åœ¨å¡«ï¼Œå°±æ˜¯ä»¥åä»˜å‡ºæ›´å¤šä»£ä»·ã€‚</p><a id="more"></a><p>æ¥æ–°å…¬å¸ä¹‹åï¼Œå°±ä¸€ç›´åœ¨å¡«å‘ï¼Œé‡å¤ä»£ç ï¼Œä»£ç å¤ç”¨æ€§å¾ˆå·®ï¼Œä»£ç æ— è§„èŒƒï¼Œç¼©è¿›ä¸ä¸€è‡´ï¼Œç”šè‡³ tab å’Œç©ºæ ¼æ··ç”¨ã€‚ã€‚ã€‚</p><p>ä¸€é‡ä¸Šå’Œåç«¯è”è°ƒã€æˆ–è€…å‘å¸ƒçš„æ—¶å€™ï¼Œå°±åˆ°åŠå¤œã€‚ã€‚ã€‚</p><p>åæ­£å„ç§èƒ½è§åˆ°çš„å‘ï¼Œå¤§æ¦‚éƒ½ç®—æ˜¯è§åˆ°äº†ï¼Œåæ­£å‘å°±åœ¨æœªçŸ¥çš„å‰æ–¹ï¼Œä¸ç¦»ä¸å¼ƒã€‚ã€‚ã€‚</p><p>åœ¨å‰å…¬å¸çš„æ—¶å€™ï¼Œæ¥æ‰‹é¡¹ç›®æ—¶ï¼Œå¹¸å¥½å‰äººçš„ä»£ç é£æ ¼ä¸é”™ï¼Œç„¶åä¸€ç›´ç…§ç€è¿™é£æ ¼ï¼Œè®©æˆ‘æœ‰ä¸€ä¸ªè‰¯å¥½çš„ç¼–ç¨‹é£æ ¼ã€‚</p><p>ä¸€ç›´æ²¡æœ‰åœ¨ç¼–è¾‘å™¨é‡ŒåŠ  <code>eslint</code> è¿™ç±»çš„æ£€æµ‹å·¥å…·ï¼Œä¹Ÿæ²¡ä»€ä¹ˆæ„ŸçŸ¥ï¼Œä¸€ç›´ç”¨ <code>git</code> åˆ†æ”¯ç®¡ç†ä¹Ÿå¾ˆæ¸…æ™°ï¼Œ</p><p>æäº¤äº†ä»£ç ç›¸äº’ code review ä¸€ä¸‹ä¹Ÿèƒ½ä¿è¯é£æ ¼çš„ç»Ÿä¸€ï¼Œ<code>commit</code> æ¸…æ™°ã€‚</p><p>å¼€å‘è°ƒè¯•ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå•é¡µé¢åº”ç”¨ï¼Œæ¨¡å—åŒ–ï¼Œä»£ç å¤ç”¨ç‡é«˜ï¼ŒREST APIï¼Œæ¨¡æ¿å‰ç«¯æ§åˆ¶ï¼Œå¸¸é‡æ„ã€ä»£ç è§„èŒƒç»Ÿä¸€â€¦</p><p>ç°åœ¨å›æƒ³ï¼Œæ›¾ç»å¾ˆç¾ã€‚</p><p>æ‰€ä»¥ä¸€è·¯èµ°æ¥ï¼Œæ„Ÿè§‰éƒ½å¾ˆä¸é”™ï¼Œå­¦åˆ°ä¸å°‘ä¸œè¥¿ï¼Œäº«å—åˆ°äº†å‰ç«¯ç¤¾åŒºè¿™å‡ å¹´å¸¦æ¥çš„ä¾¿åˆ©ã€‚</p><p>å½“ç„¶å‘å¸ƒä¹Ÿæ˜¯æ¯”è¾ƒå‘ï¼Œå‰åç«¯ä¸èƒ½åˆ†å¼€å•ç‹¬å‘å¸ƒï¼Œåç«¯ <code>Java</code>ï¼ŒåŸºç¡€æ¨¡æ¿ <code>VM</code>(å…¶ä»–éå•é¡µé¢åº”ç”¨)ï¼Œ<br>å‘å¸ƒæ—¶ï¼Œå‰ç«¯ <code>gulp</code> æ„å»ºï¼Œç­‰å¾…åç«¯ <code>Java</code> ç¼–è¯‘å‘å¸ƒï¼Œå‘å¸ƒæ•ˆç‡å¾ˆä½ã€‚</p><p>åæ¥ä¹Ÿå°è¯•äº† <code>Node.js</code> ä¸­é—´å±‚çš„å‰åç«¯åˆ†ç¦»æ–¹æ¡ˆï¼Œ<code>Node.js</code> æ§åˆ¶æ¨¡æ¿æ¸²æŸ“ï¼Œ<br><code>Java</code> å±‚åªæä¾›æ¥å£ï¼Œå‰ç«¯çš„æ¥å£è°ƒç”¨ç›´æ¥æŒ‡å‘ <code>Java</code>(è¿™å…¶å®åœ¨å•é¡µé¢åº”ç”¨æ—¶å·²ç»åšåˆ°äº†)ã€‚</p><p>è¿™æ ·å°±å¯ä»¥åˆ†å¼€å•ç‹¬å‘å¸ƒäº†ã€‚</p><p>ç„¶è€Œå½“æ—¶æŠ€èƒ½æœ‰é™ï¼Œé‡åˆ°çš„å¾ˆå¤šå‘å¡«ä¸ä¸Šâ€¦</p><p>ä¸€äº›åŸå› ï¼Œæœ€åæˆ‘ä¹Ÿèµ°äº†ï¼Œæœ€ç»ˆæ²¡èƒ½çœ‹åˆ°ä¸Šçº¿çš„æ ·å­ã€‚</p><p>ç°åœ¨å›æƒ³ï¼Œå…¶å®å½“æ—¶å¯ä»¥åˆ©ç”¨ä¸€äº›æœ‹å‹åœˆçš„èµ„æºå¾—åˆ°äº›å¸®åŠ©ï¼Œä¹Ÿè®¸åŠŸåŠ›å°±å¤§å¢äº†ã€‚</p><p>å½“ç„¶ï¼Œä¸å…¥ç°åœ¨çš„å‘ï¼Œå¯èƒ½ä¹Ÿä½“ä¼šä¸åˆ°åŸºç¡€æ¶æ„å¯¹åæœŸç»´æŠ¤çš„é‡è¦æ€§ï¼Œå¯èƒ½ä¹Ÿä½“ä¼šä¸åˆ°ä¸€ä¸ªå®Œå–„çš„ IDE å¯¹äºå¼€å‘çš„é‡è¦æ€§ï¼Œ</p><p>å›¢é˜Ÿçš„ç¼–ç¨‹ä¹ æƒ¯ã€ä»£ç é£æ ¼å¯¹äºæˆå‘˜çš„å½±å“ï¼Œåç»­çš„ç»´æŠ¤ç­‰ç­‰ã€‚</p><p>åƒ <code>eslint</code>ã€<code>jslint</code> è¿™ç±»çš„ <code>lint</code> å·¥å…·åœ¨å¼€å‘ã€é‡æ„æ—¶èƒ½å¸¦æ¥å¤šå°‘å¥½å¤„ã€‚</p><p>æˆ‘æƒ³ä»¥åä¸é…ç½®å¥½ <code>eslint</code> æˆ‘éƒ½ä¸æ„¿æ„å†™ä»£ç äº†å§ã€‚</p><p>å‰ç«¯ä»€ä¹ˆæ—¶å€™èƒ½æœ‰ä¸€ä¸ªæ›´å¥½çš„ç¼–è¾‘å™¨å‘¢ï¼Ÿ</p><ul><li>é…ç½® IDE ç¯å¢ƒ</li><li><code>eslint</code></li><li><del><code>pre-commit</code></del></li><li>è€ä»£ç  <a href="https://github.com/xwartz/ESLint-Fix">eslint-fix</a></li><li>é‡æ„ã€æ¨¡å—åŒ–</li><li><a href="https://github.com/xwartz/webpack-karma-mocha">å•å…ƒæµ‹è¯•</a></li><li>é›†æˆæµ‹è¯•</li><li>æ„å»ºè„šæ‰‹æ¶</li><li>å†™æ–‡æ¡£ã€å†™æ³¨é‡Š</li></ul><p>æ…¢æ…¢åœ¨åšä¸€äº›åŸºç¡€æ€§çš„ä¸œè¥¿ï¼Œå¡«å‰äººç•™ä¸‹çš„å‘ã€‚</p><p>ä½“ä¼šåˆ°ç—›è‹¦ä¹‹åï¼Œæ‰ä¼šæƒ³æ€ä¹ˆæé«˜æ•ˆç‡ï¼Œå‡å°ç»´æŠ¤æˆæœ¬ï¼Œæ€ä¹ˆå·¥ç¨‹åŒ–ã€‚</p><p>åŸºç¡€æ¶æ„ã€å‰åç«¯åˆ†ç¦»ã€æ€§èƒ½ä¼˜åŒ–ã€ç»„ä»¶åŒ–ã€æ„å»ºæ–¹æ¡ˆã€å‘å¸ƒæµç¨‹ã€é™æ€èµ„æºç®¡ç†ã€æµ‹è¯•ã€ç›‘æ§â€¦è¿˜æœ‰å¾ˆå¤šè¦å­¦ä¹ ã€æ€è€ƒçš„ã€‚</p><p>å‰ç«¯æ²¡é‚£ä¹ˆç®€å•ã€‚</p><p>ä»¥ä¸Šï¼Œæœ€è¿‘ä¸é¡ºï¼Œåæ§½ä¸€ç•ªã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŒ–çš„å‘ï¼Œæ€»æ˜¯è¦æœ‰äººæ¥å¡«çš„ï¼Œä¸æ˜¯ç°åœ¨å¡«ï¼Œå°±æ˜¯ä»¥åä»˜å‡ºæ›´å¤šä»£ä»·ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯å·¥ç¨‹" scheme="http://github.com/xwartz/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>å¤§ç†</title>
    <link href="http://github.com/xwartz/2016/07/dali/"/>
    <id>http://github.com/xwartz/2016/07/dali/</id>
    <published>2016-07-04T14:54:33.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>01/07 - 04/07 outing.</p><a id="more"></a><img src="/blog/2016/07/dali/1.JPG" alt="1.JPG" title=""><img src="/blog/2016/07/dali/9.JPG" alt="9.JPG" title=""><img src="/blog/2016/07/dali/2.JPG" alt="2.JPG" title=""><img src="/blog/2016/07/dali/3.JPG" alt="3.JPG" title=""><img src="/blog/2016/07/dali/5.JPG" alt="5.JPG" title=""><img src="/blog/2016/07/dali/6.JPG" alt="6.JPG" title=""><img src="/blog/2016/07/dali/7.JPG" alt="7.JPG" title=""><img src="/blog/2016/07/dali/4.JPG" alt="4.JPG" title=""><img src="/blog/2016/07/dali/8.JPG" alt="8.JPG" title=""><!-- more -->]]></content>
    
    <summary type="html">
    
      &lt;p&gt;01/07 - 04/07 outing.&lt;/p&gt;
    
    </summary>
    
    
      <category term="life" scheme="http://github.com/xwartz/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Chrome è°ƒè¯• Node.js</title>
    <link href="http://github.com/xwartz/2016/06/debugging-node-js-nightlies-with-chrome-devtools/"/>
    <id>http://github.com/xwartz/2016/06/debugging-node-js-nightlies-with-chrome-devtools/</id>
    <published>2016-06-25T04:02:11.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘è°·æ­Œç¨‹åºå‘˜åŠ¨ä½œæŒºå¤§çš„ï¼Œæ¯•ç«Ÿ Web å‘å®¶çš„ï¼Œå°±æ˜¯å‰å®³å•Šã€‚</p><a id="more"></a><p>çœ‹åˆ° <code>Paul Irish</code> æ›´æ–°çš„ <code>medium</code> æ–‡ç«  <a href="https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27#.f7ybt5s2m" target="_blank" rel="external">Debugging Node.js Nightlies with Chrome DevTools</a>ï¼Œè¯•äº†ä¸€å‘ï¼Œé¡ºä¾¿ç¿»è¯‘ä¸‹æ•™ç¨‹ã€‚</p><img src="/blog/2016/06/debugging-node-js-nightlies-with-chrome-devtools/debug.png" alt="debug.png" title=""><p>Node.js Nightlies ç‰ˆæœ¬å·²ç»æ”¯æŒä½¿ç”¨ <code>Chrome</code> æµè§ˆå™¨æ¥è°ƒè¯•äº†ï¼ŒæŸ¥çœ‹ <a href="https://github.com/nodejs/node/pull/6792">pull</a>ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p>ä¸‹é¢æ˜¯å…³äºå¦‚ä½•ä½¿ç”¨ <code>Chrome</code> æ¥è°ƒè¯• <code>Node.js</code> çš„æ•™ç¨‹</p><h4 id="1-ä¸‹è½½-Node-js-Nightly-ç‰ˆæœ¬"><a href="#1-ä¸‹è½½-Node-js-Nightly-ç‰ˆæœ¬" class="headerlink" title="1. ä¸‹è½½ Node.js Nightly ç‰ˆæœ¬"></a>1. ä¸‹è½½ Node.js Nightly ç‰ˆæœ¬</h4><p>ä½¿ç”¨ <code>Paul Irish</code> å†™å¥½çš„è„šæœ¬ <a href="https://gist.github.com/paulirish/a02f4aa2b5ce69f5c269d18e74f57ab3" target="_blank" rel="external">https://gist.github.com/paulirish/a02f4aa2b5ce69f5c269d18e74f57ab3</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">curl -O <span class="string">"https://gist.githubusercontent.com/paulirish/a02f4aa2b5ce69f5c269d18e74f57ab3/raw/36003214efb09259f86061656ac04ac846ff9c2f/download-node-nightly.sh"</span></div><div class="line">bash download-node-nightly.sh</div></pre></td></tr></table></figure><p>æˆ–è€…ä½ å¯ä»¥ä»è¿™é‡Œä¸‹è½½æƒ³è¦çš„ç‰ˆæœ¬ <a href="https://nodejs.org/download/nightly/" target="_blank" rel="external">https://nodejs.org/download/nightly/</a></p><h4 id="2-è®¾ç½®åˆ«å"><a href="#2-è®¾ç½®åˆ«å" class="headerlink" title="2. è®¾ç½®åˆ«å"></a>2. è®¾ç½®åˆ«å</h4><p>å°†ä¸‹è½½çš„ Node.js æ”¾åˆ°ä»»æ„ç›®å½•ï¼Œåœ¨ <code>.zshrc</code> ä¸­è®¾ç½®åˆ«å <code>node-nightly</code>ï¼Œé¿å…ä¸æ­£å¸¸ä½¿ç”¨çš„ <code>Node.js</code> å†²çªã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> node-nightly=<span class="string">'~/bin/node-v7.0.0-nightly20160621ecc48a154d-darwin-x64/bin/node'</span></div></pre></td></tr></table></figure><h4 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node-nightly --inspect index.js</div></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ <code>--debug-brk</code> å‚æ•°ï¼Œåœ¨å¯åŠ¨åç¬¬ä¸€è¡Œå¼€å§‹æ–­ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node-nightly --inspect --debug-brk index.js</div></pre></td></tr></table></figure><h4 id="åœ¨-Chrome-æµè§ˆå™¨é‡Œæ‰“å¼€-URL"><a href="#åœ¨-Chrome-æµè§ˆå™¨é‡Œæ‰“å¼€-URL" class="headerlink" title="åœ¨ Chrome æµè§ˆå™¨é‡Œæ‰“å¼€ URL"></a>åœ¨ Chrome æµè§ˆå™¨é‡Œæ‰“å¼€ URL</h4><p>æ‰§è¡Œä¸Šä¸€æ­¥æ“ä½œï¼Œä¼šåœ¨ç»ˆç«¯è¾“å‡º <code>URL</code>ï¼Œåœ¨ <code>Chrome</code> ä¸­æ‰“å¼€è¿™ä¸ªåœ°å€ã€‚</p><p>ä»¥ä¸Šï¼Œä½ å°±å¯ä»¥åƒè°ƒè¯•ç½‘é¡µä¸€æ ·è°ƒè¯• <code>Node.js</code> ä»£ç äº†ã€‚</p><p>Enjoy.</p><h3 id="å…¶ä»–è°ƒè¯•æ–¹æ³•"><a href="#å…¶ä»–è°ƒè¯•æ–¹æ³•" class="headerlink" title="å…¶ä»–è°ƒè¯•æ–¹æ³•"></a>å…¶ä»–è°ƒè¯•æ–¹æ³•</h3><p>è‡³äºå…¶ä»–çš„è°ƒè¯•æ–¹æ³•ï¼ŒçŸ¥é“çš„å¤§æ¦‚æœ‰ä¸‹é¢è¿™äº›ï¼š</p><ol><li><p><a href="https://nodejs.org/api/debugger.html" target="_blank" rel="external">Debugger</a></p></li><li><p><a href="https://github.com/node-inspector/node-inspector">node-inspector</a></p></li><li><p><a href="https://github.com/Jam3/devtool">devtool</a>ï¼šåŸºäº <code>Electron</code></p></li><li><p>è¿˜æœ‰å„ç§ç¼–è¾‘å™¨è‡ªå¸¦çš„</p></li></ol><p>å…³äºæ¯”è¾ƒå¯ä»¥çœ‹è¿™ä¸ªè¯„è®º <a href="https://github.com/nodejs/node/pull/6792#issuecomment-219756916">issuecomment-219756916</a></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://medium.com/@paul_irish/debugging-node-js-nightlies-with-chrome-devtools-7c4a1b95ae27#.f7ybt5s2m" target="_blank" rel="external">Debugging Node.js Nightlies with Chrome DevTools</a></p><p><a href="https://github.com/nodejs/node/pull/6792">Add v8_inspector support</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘è°·æ­Œç¨‹åºå‘˜åŠ¨ä½œæŒºå¤§çš„ï¼Œæ¯•ç«Ÿ Web å‘å®¶çš„ï¼Œå°±æ˜¯å‰å®³å•Šã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="devTools" scheme="http://github.com/xwartz/tags/devTools/"/>
    
      <category term="nodejs" scheme="http://github.com/xwartz/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>EditorConfig ä»‹ç»</title>
    <link href="http://github.com/xwartz/2016/06/editorconfig/"/>
    <id>http://github.com/xwartz/2016/06/editorconfig/</id>
    <published>2016-06-19T15:47:10.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŸºç¡€è®¾æ–½çœŸçš„å¾ˆé‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨ç»å†äº†å‡ ä¸ªçƒ‚é¡¹ç›®ä¹‹åã€‚</p><a id="more"></a><img src="/blog/2016/06/editorconfig/ill.png" alt="ill.png" title=""><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ç”±äºæœ€è¿‘æ¯”è¾ƒå…³æ³¨å‰ç«¯å·¥ç¨‹åŒ–æ–¹é¢çš„äº‹ï¼Œæ‰€ä»¥ä¸€ç›´åœ¨æƒ³ç€æ€ä¹ˆæŠŠä»£ç å†™å¥½ï¼Œæ€ä¹ˆæŠŠä¸€ä¸ªé¡¹ç›®ç»´æŠ¤å¥½ã€‚</p><p>ä»¥å‰ä¸€ä¸¤ä¸ªäººå¹²æ´»çš„æ—¶å€™ï¼Œæ²¡æœ‰è§‰å¾—æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä¸€ä¸ªé¡¹ç›®æ‰˜ç®¡åœ¨ <code>git</code>ï¼Œå„è‡ª <code>fork</code> ä»“åº“ä¿®æ”¹æäº¤ <code>merge</code>ã€‚</p><p>å¹¶ä¸éœ€è¦ä»€ä¹ˆè§„èŒƒåŒ–ï¼Œå› ä¸ºä¸¤ä¸ªäººçš„ä»£ç é£æ ¼éƒ½å·®ä¸å¤šï¼Œéƒ½éµå¾ªä¸€äº›å…¬è®¤çš„è§„èŒƒï¼Œä¹Ÿå°±ä¸éœ€è¦å¼ºåˆ¶è¦æ±‚ä»€ä¹ˆã€‚</p><p>ç„¶è€Œäººå¤šçš„æ—¶å€™ï¼Œç¡®å®ä¼šæ˜¯éº»çƒ¦äº‹ï¼Œåˆ°å¤„ä»£ç é£æ ¼ä¸ä¸€è‡´ï¼Œ<code>tab</code>ã€ç©ºæ ¼æ··åˆç”¨ï¼Œå¼ºè¿«ç—‡æ€»æ˜¯ä¼šå¾ˆä¸çˆ½çš„æƒ³æ”¹æˆä¸€è‡´ã€‚</p><p>ä»¥ä¸Šï¼Œæ‰€ä»¥æƒ³è¦å¼€å§‹è§„èŒƒèµ·ä»£ç ï¼Œè§„èŒƒæµç¨‹ï¼Œåƒä¸€ä¸ªå·¥ç¨‹åº”è¯¥æœ‰çš„æ ·å­ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-EditorConfig"><a href="#ä»€ä¹ˆæ˜¯-EditorConfig" class="headerlink" title="ä»€ä¹ˆæ˜¯ EditorConfig"></a>ä»€ä¹ˆæ˜¯ EditorConfig</h3><blockquote><p>EditorConfig helps developers define and maintain consistent coding styles between different editors and IDEs.<br>The EditorConfig project consists of a file format for defining coding styles and a collection of text editor plugins that enable editors to read the file format and adhere to defined styles.<br>EditorConfig files are easily readable and they work nicely with version control systems.</p></blockquote><p>ç®€å•æ¥è¯´ <code>EditorConfig</code> å°±æ˜¯å¸®åŠ©å¼€å‘è€…åœ¨ä¸åŒçš„ç¼–è¾‘å™¨é‡Œç»Ÿä¸€ä»£ç æ ¼å¼çš„ä¸€å¥—è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="EditorConfig-çš„é…ç½®æ–‡ä»¶æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#EditorConfig-çš„é…ç½®æ–‡ä»¶æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="EditorConfig çš„é…ç½®æ–‡ä»¶æ˜¯æ€æ ·çš„ï¼Ÿ"></a>EditorConfig çš„é…ç½®æ–‡ä»¶æ˜¯æ€æ ·çš„ï¼Ÿ</h3><p>ä»¥ä¸‹ä¾‹å­ï¼Œ<code>.editorconfig</code> ç”¨æ¥å®šä¹‰ <code>Python</code> å’Œ <code>JavaScript</code> çš„å°¾è¡Œå’Œç¼©è¿›é£æ ¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"># EditorConfig is awesome: http://EditorConfig.org</div><div class="line"></div><div class="line"># top-most EditorConfig file</div><div class="line">root = true</div><div class="line"></div><div class="line"># Unix-style newlines with a newline ending every file</div><div class="line">[*]</div><div class="line">end_of_line = lf</div><div class="line">insert_final_newline = true</div><div class="line"></div><div class="line"># Matches multiple files with brace expansion notation</div><div class="line"># Set default charset</div><div class="line">[*.&#123;js,py&#125;]</div><div class="line">charset = utf-8</div><div class="line"></div><div class="line"># 4 space indentation</div><div class="line">[*.py]</div><div class="line">indent_style = space</div><div class="line">indent_size = 4</div><div class="line"></div><div class="line"># Tab indentation (no size specified)</div><div class="line">[Makefile]</div><div class="line">indent_style = tab</div><div class="line"></div><div class="line"># Indentation override for all JS under lib directory</div><div class="line">[lib/**.js]</div><div class="line">indent_style = space</div><div class="line">indent_size = 2</div><div class="line"></div><div class="line"># Matches the exact files either package.json or .travis.yml</div><div class="line">[&#123;package.json,.travis.yml&#125;]</div><div class="line">indent_style = space</div><div class="line">indent_size = 2</div></pre></td></tr></table></figure><p>æ›´å¤šç¤ºä¾‹ <a href="https://github.com/editorconfig/editorconfig/wiki/Projects-Using-EditorConfig">é‚£äº›ä½¿ç”¨ EditorConfig çš„é¡¹ç›®</a></p><h3 id="åœ¨å“ªå­˜æ”¾-EditorConfig-æ–‡ä»¶"><a href="#åœ¨å“ªå­˜æ”¾-EditorConfig-æ–‡ä»¶" class="headerlink" title="åœ¨å“ªå­˜æ”¾ EditorConfig æ–‡ä»¶"></a>åœ¨å“ªå­˜æ”¾ EditorConfig æ–‡ä»¶</h3><p><code>EditorConfig</code> æ’ä»¶ä¼šåœ¨æ‰“å¼€æ–‡ä»¶çš„ç›®å½•å‘ä¸Šçº§ç›®å½•æŸ¥æ‰¾ <code>.editorconfig</code> æ–‡ä»¶ï¼Œ</p><p>ç›´åˆ°æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>root=true</code>ï¼Œæ‰€ä»¥é…ç½®ä¸€èˆ¬ä¼šå­˜æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ã€‚</p><p><code>EditorConfig</code> é…ç½®æ–‡ä»¶ä»ä¸Šå¾€ä¸‹è¯»å–ï¼Œå¹¶ä¸”è·¯å¾„æœ€è¿‘çš„æ–‡ä»¶æœ€åè¢«è¯»å–ï¼Œæ‰€ä»¥æœ€æ¥è¿‘ä»£ç æ–‡ä»¶çš„å±æ€§ä¼˜å…ˆçº§æœ€é«˜ã€‚</p><p>å½“ç„¶ï¼Œä¸€èˆ¬ä¸€ä¸ªé¡¹ç›®ä¹Ÿå°±ä¸€ä¸ªé…ç½®æ–‡ä»¶</p><h3 id="æ–‡ä»¶æ ¼å¼"><a href="#æ–‡ä»¶æ ¼å¼" class="headerlink" title="æ–‡ä»¶æ ¼å¼"></a>æ–‡ä»¶æ ¼å¼</h3><p><code>EditorConfig</code> æ–‡ä»¶ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/INI%E6%96%87%E4%BB%B6" target="_blank" rel="external">INIæ ¼å¼</a>ï¼Œä¸ºäº†å¯ä»¥ä¸ <a href="https://docs.python.org/2/library/configparser.html" target="_blank" rel="external">Python ConfigParser Library</a> å…¼å®¹ï¼Œ<br>ä½†æ˜¯å…è®¸åœ¨ section names ä¸­ä½¿ç”¨ â€˜andâ€™(ä¸çŸ¥é“ section names åº”è¯¥æ€ä¹ˆç¿»è¯‘ )ã€‚<br>section names æ˜¯<a href="">å…¨å±€</a><a href="https://en.wikipedia.org/wiki/Glob_(programming)æ–‡ä»¶è·¯å¾„ï¼Œ" target="_blank" rel="external">https://en.wikipedia.org/wiki/Glob_(programming)æ–‡ä»¶è·¯å¾„ï¼Œ</a><br>ç±»ä¼¼äº <a href="http://manpages.ubuntu.com/manpages/intrepid/man5/gitignore.5.html#contenttoc2" target="_blank" rel="external">gitignore</a>ã€‚</p><blockquote><p><code>/</code>: è·¯å¾„åˆ†éš”ç¬¦<br><code>#</code> or <code>;</code> æ³¨é‡Šï¼Œæ³¨é‡Šåº”è¯¥ç‹¬å ä¸€è¡Œã€‚</p></blockquote><p><code>EditorConfig</code> æ–‡ä»¶ä½¿ç”¨ UTF-8 æ ¼å¼ã€CRLF æˆ– LF ä½œä¸ºæ¢è¡Œç¬¦ã€‚</p><h4 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h4><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>*</code></td><td>åŒ¹é…é™¤(/)ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ä¸²</td></tr><tr><td><code>**</code></td><td>åŒ¹é…ä»»æ„å­—ç¬¦ä¸²</td></tr><tr><td><code>?</code></td><td>åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</td></tr><tr><td><code>[name]</code></td><td>åŒ¹é… name å­—ç¬¦</td></tr><tr><td><code>[!name]</code></td><td>åŒ¹é…ä»»æ„é™¤äº† name å¤–çš„å­—ç¬¦</td></tr><tr><td><code>{s1,s2,s3}</code></td><td>åŒ¹é…ä»»æ„ç»™å®šçš„å­—ç¬¦ä¸² (version &gt;= 0.11.0)</td></tr></tbody></table><p>ç‰¹æ®Šå­—ç¬¦ä½¿ç”¨ <code>\</code> è½¬ä¹‰ã€‚</p><h4 id="æ”¯æŒçš„å±æ€§"><a href="#æ”¯æŒçš„å±æ€§" class="headerlink" title="æ”¯æŒçš„å±æ€§"></a>æ”¯æŒçš„å±æ€§</h4><p class="tip">å¹¶ä¸æ˜¯æ‰€æœ‰çš„å±æ€§éƒ½å·²ç»è¢«ç¼–è¾‘å™¨æ’ä»¶æ”¯æŒäº†ï¼Œå…·ä½“æŸ¥çœ‹ <a href="https://github.com/editorconfig/editorconfig/wiki/EditorConfig-Properties">wiki</a> </p><h3 id="ç¼–è¾‘å™¨æ”¯æŒæƒ…å†µ"><a href="#ç¼–è¾‘å™¨æ”¯æŒæƒ…å†µ" class="headerlink" title="ç¼–è¾‘å™¨æ”¯æŒæƒ…å†µ"></a>ç¼–è¾‘å™¨æ”¯æŒæƒ…å†µ</h3><p>å…·ä½“æŸ¥çœ‹å®˜ç½‘ <a href="http://editorconfig.org/#download" target="_blank" rel="external">http://editorconfig.org/#download</a></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://editorconfig.org/" target="_blank" rel="external">EditorConfig</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŸºç¡€è®¾æ–½çœŸçš„å¾ˆé‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨ç»å†äº†å‡ ä¸ªçƒ‚é¡¹ç›®ä¹‹åã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯å·¥ç¨‹" scheme="http://github.com/xwartz/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/"/>
    
      <category term="EditorConfig" scheme="http://github.com/xwartz/tags/EditorConfig/"/>
    
  </entry>
  
  <entry>
    <title>Chrome æµè§ˆå™¨çš„ source-map åŠŸèƒ½</title>
    <link href="http://github.com/xwartz/2016/06/chrome-sourcemap/"/>
    <id>http://github.com/xwartz/2016/06/chrome-sourcemap/</id>
    <published>2016-06-16T13:22:49.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…¶å®å·²ç»å¾ˆä¹…æ²¡æœ‰ä½¿ç”¨ Chrome çš„ source-map åŠŸèƒ½äº†ã€‚</p><a id="more"></a><p><code>webpack</code> éå¸¸ç«ï¼Œå®ƒæä¾›çš„ <code>HMR</code>(hot module replacement) åŠŸèƒ½éå¸¸æ£’ï¼Œä¿®æ”¹ä»£ç æ— éœ€åˆ·æ–°é¡µé¢ã€‚é‚£ä¹ˆåœ¨ <code>webpack</code> å‡ºç°ä¹‹å‰ï¼Œæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å‘¢ã€‚</p><p>ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œ<code>Chrome</code> åº”è¯¥æ˜¯å¤§å®¶æœ€å–œæ¬¢çš„æµè§ˆå™¨ä¹‹ä¸€ï¼Œè°ƒè¯•ä»£ç éå¸¸æ–¹ä¾¿ã€‚</p><p>è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸‹ï¼Œ<code>Chrome</code> æµè§ˆå™¨è‡ªå¸¦çš„ <code>source-map</code> åŠŸèƒ½ã€‚</p><p>å¦‚æœä½ çš„é¡¹ç›®å·²ç»ç”¨ <code>webpack</code> äº†ï¼Œé‚£å°±ä¸å¤ªéœ€è¦ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½äº†ï¼Œ<code>webpack</code> æä¾›çš„ <code>HMR</code> åŠŸèƒ½ï¼Œå¼€å‘èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚</p><h3 id="æ·»åŠ æ–‡ä»¶å¤¹åˆ°-Workspace"><a href="#æ·»åŠ æ–‡ä»¶å¤¹åˆ°-Workspace" class="headerlink" title="æ·»åŠ æ–‡ä»¶å¤¹åˆ° Workspace"></a>æ·»åŠ æ–‡ä»¶å¤¹åˆ° Workspace</h3><p>å³é”®é€‰æ‹© <code>Add Folder to Workspace</code></p><img src="/blog/2016/06/chrome-sourcemap/1.png" alt="1.png" title=""><p>å¹¶å…è®¸è®¿é—®æƒé™</p><h3 id="å»ºç«‹-Map"><a href="#å»ºç«‹-Map" class="headerlink" title="å»ºç«‹ Map"></a>å»ºç«‹ Map</h3><p>å³é”®é€‰æ‹© <code>Map to Network Resource...</code>ï¼Œé€‰æ‹©å¯¹åº”çš„æ–‡ä»¶ã€‚</p><img src="/blog/2016/06/chrome-sourcemap/2.png" alt="2.png" title=""><p>å¦‚æ­¤ä¾¿å·²æœ‰äº† <code>source-map</code> åŠŸèƒ½</p><p>åªéœ€è¦å»ºç«‹æŸä¸ª <code>map</code> çš„æ–‡ä»¶ï¼Œ<code>Chrome</code> ä¼šä¸ºæŠŠæ•´ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½å»ºç«‹ <code>map</code> å…³ç³»ã€‚</p><h3 id="å°è¯•ä¿®æ”¹"><a href="#å°è¯•ä¿®æ”¹" class="headerlink" title="å°è¯•ä¿®æ”¹"></a>å°è¯•ä¿®æ”¹</h3><p>é€‰æ‹©æŸä¸ªæ–‡ä»¶ï¼Œä¿®æ”¹ä»£ç ï¼Œ<code>cmd + s</code> ä¿å­˜ï¼Œç„¶åä½ ä¼šå‘ç°ç¼–è¾‘å™¨é‡Œçš„ä»£ç ä¹Ÿæ›´æ–°äº†ã€‚</p><p>æˆ–è€…ï¼Œæ›´æ–°ç¼–è¾‘å™¨é‡Œçš„ä»£ç ï¼Œ<code>cmd + s</code> ä¿å­˜ï¼Œç½‘é¡µä¸­çš„ä»£ç ä¹Ÿç›¸åº”çš„æ›´æ–°äº†ã€‚</p><p>å½“ç„¶å®ƒå¹¶æ²¡æœ‰ <code>webpack</code> è¿™æ ·çš„ <code>HMR</code> åŠŸèƒ½ï¼Œå¦‚æœæƒ³çœ‹åˆ°ä»£ç æ›´æ–°åçš„æ•ˆæœï¼Œè¿˜æ˜¯éœ€è¦åˆ·æ–°é¡µé¢çš„ã€‚</p><h3 id="çœŸæ­£ç”¨é€”"><a href="#çœŸæ­£ç”¨é€”" class="headerlink" title="çœŸæ­£ç”¨é€”"></a>çœŸæ­£ç”¨é€”</h3><p>å¯èƒ½åœ¨å¯¹äº <code>js</code> ä»£ç æ¥è¯´ä»¥ä¸Šçš„ <code>map</code> ç”¨å¤„ä¼¼ä¹å¹¶ä¸å¤§ã€‚</p><p>æ‰€ä»¥è¿™ä¸ªåŠŸèƒ½å¤§å¤šæ˜¯åœ¨ä¿®æ”¹ <code>css</code> ä»£ç çš„æ—¶å€™ä½¿ç”¨ï¼Œ</p><p>ä½ å¯ä»¥ç›´æ¥çœ‹ç€é¡µé¢ï¼Œåœ¨æ§åˆ¶å°ä¿®æ”¹ <code>css</code> ä»£ç å°±å¥½äº†ï¼Œéƒ½ä¸éœ€è¦å»ä¿®æ”¹ç¼–è¾‘å™¨é‡Œçš„æ–‡ä»¶äº†ã€‚</p><p class="tip">Chrome çš„è¿™ä¸ªåŠŸèƒ½è¿˜æ”¯æŒ <code>sass</code>ï¼Œå¯ä»¥ <code>map</code> åˆ°æºä»£ç ï¼Œå¦‚æœå†™ <code>sass</code> çš„è¯ï¼Œå¼ºåŠ›æ¨èã€‚</p><p>å…¶å®ä½ è¿˜å¯ä»¥åœ¨æ§åˆ¶å°åˆ é™¤ï¼Œå¢åŠ æ–‡ä»¶ï¼Œå‚è€ƒ <a href="https://developer.chrome.com/devtools/docs/workspaces" target="_blank" rel="external">Workspaces - Persistent authoring in the DevTools</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…¶å®å·²ç»å¾ˆä¹…æ²¡æœ‰ä½¿ç”¨ Chrome çš„ source-map åŠŸèƒ½äº†ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="devTools" scheme="http://github.com/xwartz/tags/devTools/"/>
    
  </entry>
  
  <entry>
    <title>webpack + karma + mocha + es6 ç¼–å†™å•å…ƒæµ‹è¯•</title>
    <link href="http://github.com/xwartz/2016/06/js-test-with-webpack-karma-mocha/"/>
    <id>http://github.com/xwartz/2016/06/js-test-with-webpack-karma-mocha/</id>
    <published>2016-06-14T15:58:00.000Z</published>
    <updated>2016-10-07T06:17:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>é¥æƒ³å½“å¹´åœ¨å‰å…¬å¸ï¼Œä¸‰ä¸ªäººçš„æ—¶å€™å†™å•å…ƒæµ‹è¯•ï¼Œä¸¤ä¸ªäººçš„æ—¶å€™æå‰åç«¯åˆ†ç¦»ï¼Œä¸€ä¸ªäººçš„æ—¶å€™ç©æ¡Œé¢åº”ç”¨ã€‚</p><a id="more"></a><img src="/blog/2016/06/js-test-with-webpack-karma-mocha/ill.png" alt="ill.png" title=""><h3 id="ä¸ºä»€ä¹ˆå†™å•å…ƒæµ‹è¯•"><a href="#ä¸ºä»€ä¹ˆå†™å•å…ƒæµ‹è¯•" class="headerlink" title="ä¸ºä»€ä¹ˆå†™å•å…ƒæµ‹è¯•"></a>ä¸ºä»€ä¹ˆå†™å•å…ƒæµ‹è¯•</h3><p>ä½ é—®æˆ‘æ”¯ä¸æ”¯æŒå†™å•å…ƒæµ‹è¯•ï¼Œæˆ‘å½“ç„¶æ˜¯æ”¯æŒçš„ã€‚å°¤å…¶æ˜¯åœ¨æ²¡æœ‰æµ‹è¯•äººå‘˜çš„æ—¶å€™ï¼Œæˆ‘å¯ä¸æƒ³æ—¶ä¸æ—¶æå‡ºæ•…éšœã€‚</p><p>ç»†æƒ³äº†ä¸‹å•å…ƒæµ‹è¯•çš„å¥½å¤„ï¼š</p><blockquote><ul><li>èƒ½å¼ºè¿«ä½ å†™å‡ºå¥½çš„ä»£ç </li><li>èƒ½å¿«é€Ÿå¸¦æ–°äººå…¥å‘ï¼Œå¡«å‘</li><li>åœ¨é‡æ„ä»£ç æ—¶ï¼Œä¸ç”¨ä¸ºå‘å¸ƒçº¿ä¸Šæ‹…å¿ƒ</li><li>èƒ½åœ¨åˆ«äººå¯¹ç€å±å¹•å¿™ç€æµ‹è¯•æ—¶ï¼ŒæŒºç€èƒ¸å‡†æ—¶ä¸‹ç­</li></ul></blockquote><p>ç¼–ä¸ä¸‹å»äº† â•®(â•¯_â•°)â•­ </p><h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-webpack"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-webpack" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© webpack"></a>ä¸ºä»€ä¹ˆé€‰æ‹© <code>webpack</code></h3><p>å½“ç„¶æ˜¯ä¸ºäº†è£…é€¼å•¦ï¼Œä¸ç„¶ä»¥åæ€ä¹ˆå¯¹äººå®¶è¯´ <code>webpack</code> å¤šç®€å•å•Šï¼Œè¿™ä½ éƒ½èƒ½é…ç½®è€åŠå¤©! çœ‹æˆ‘ï¼ˆË‡ï¼¾Ë‡ï¼‰</p><blockquote><ul><li>ç°åœ¨çš„å¼€å‘å¤šæ•°é¡¹ç›®ä½¿ç”¨äº† <code>webpack</code></li><li>ä¸ºäº†ä¹‹åçš„å¯æ‰©å±•ï¼Œå“ªå¤©æƒ³ç”¨ <code>react</code>ï¼Œæƒ³æ¢æˆ <code>vue</code>ï¼Œæƒ³ä¸Š <code>es6</code> å•¦</li></ul></blockquote><p>ç”±ä»¥ä¸Šä¸¤æ¡ï¼Œå› ä¸ºé¡¹ç›®æŠ€æœ¯æ ˆï¼Œå¯ä»¥å…±ç”¨é…ç½®ï¼Œæµ‹è¯•çš„ <code>webpack</code> é…ç½®å¯ä»¥å…±ç”¨å¼€å‘æ—¶çš„é…ç½®ï¼Œ<br>æˆ‘å¯ä¸æƒ³æ¢ä¸ªæŠ€æœ¯æ ˆå°±å¾—ä¿®æ”¹æµ‹è¯•é…ç½®ã€‚</p><h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-karma"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-karma" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© karma"></a>ä¸ºä»€ä¹ˆé€‰æ‹© <code>karma</code></h3><p>ä¸å¤šè¯´ï¼Œçœ‹å®˜æ–¹æ¨è</p><blockquote><p>You want to test code in real browsers.<br>You want to test code in multiple browsers (desktop, mobile, tablets, etc.).<br>You want to execute your tests locally during development.<br>You want to execute your tests on a continuous integration server.<br>You want to execute your tests on every save.<br>You love your terminal.<br>You donâ€™t want your (testing) life to suck.<br>You want to use Istanbul to automagically generate coverage reports.<br>You want to use RequireJS for your source files.</p></blockquote><h3 id="ä¸ºä»€ä¹ˆé€‰-mocha"><a href="#ä¸ºä»€ä¹ˆé€‰-mocha" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰ mocha"></a>ä¸ºä»€ä¹ˆé€‰ <code>mocha</code></h3><p>åªæ˜¯å› ä¸ºä»¥å‰å†™è¿‡ï¼Œç›´æ¥ä¸Šæ‰‹ã€‚</p><p>æ–‡æ¡£æ¸…æ™°ï¼ŒAPI ç®€å•ï¼Œæ‰©å±•å¤šã€‚</p><p>è‡³äºå…¶ä»–å¯é€‰çš„æ¨è <code>jasmine</code>ã€‚</p><p>æ›´å¤šæ­é… <a href="https://www.npmjs.org/browse/keyword/karma-adapter" target="_blank" rel="external">https://www.npmjs.org/browse/keyword/karma-adapter</a></p><h3 id="ä¸ºä»€ä¹ˆç”¨-es6"><a href="#ä¸ºä»€ä¹ˆç”¨-es6" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨ es6"></a>ä¸ºä»€ä¹ˆç”¨ <code>es6</code></h3><p>æ—¢ç„¶éƒ½å·²ç»ç”¨ <code>webpack</code> äº†ï¼Œä¸ºä»€ä¹ˆä¸ç”¨ <code>es6</code> å‘¢ï¼Ÿ</p><p>ç°åœ¨ä¸å†™å†™ <code>es6</code>ï¼Œéƒ½è¦çœ‹ä¸æ‡‚åˆ«äººçš„æºç å’¯ã€‚</p><h3 id="å¦‚ä½•æ­å»º"><a href="#å¦‚ä½•æ­å»º" class="headerlink" title="å¦‚ä½•æ­å»º"></a>å¦‚ä½•æ­å»º</h3><p>è¯´èµ·æ¥æ˜¯æœ‰æŒºå¤šå‘çš„ (ï½ o ï½)Y</p><h4 id="webpack-config"><a href="#webpack-config" class="headerlink" title="webpack.config"></a>webpack.config</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">'path'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="attr">devtool</span>: <span class="string">'eval-source-map'</span>,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [&#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">      <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></div><div class="line">    &#125;],</div><div class="line">    <span class="comment">// instrument only testing sources with Istanbul</span></div><div class="line">    postLoaders: [&#123;</div><div class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">      <span class="attr">exclude</span>: <span class="regexp">/test\/|node_modules/</span>,</div><div class="line">      <span class="attr">loaders</span>: [<span class="string">'istanbul-instrumenter'</span>]</div><div class="line">    &#125;]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">alias</span>: &#123;</div><div class="line">      <span class="attr">utils</span>: path.join(__dirname, <span class="string">'src/utils'</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™é‡Œåªæœ‰ä¸€ä¸ªåœ°æ–¹è¦æ³¨æ„ä¸‹ <code>postLoaders</code></p><p>åœ¨ <code>webpack</code> æ‰“åŒ…å‰éœ€è¦ç»è¿‡ <code>istanbul-instrumenter-loader</code> å¤„ç†ï¼Œè¦†ç›–ç‡ç»Ÿè®¡çš„åº”è¯¥æ˜¯æºç ã€‚</p><p><em>å¼€å‘æ—¶ä¹Ÿæ˜¯ç”¨çš„ <code>webpack</code>ï¼Œå¯ä»¥æå–å…±ç”¨çš„éƒ¨åˆ†ã€‚</em></p><h3 id="karma-config"><a href="#karma-config" class="headerlink" title="karma.config"></a>karma.config</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> webpackConfig <span class="keyword">from</span> <span class="string">'./webpack.config'</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</div><div class="line">  config.set(&#123;</div><div class="line">    <span class="comment">// ä½¿ç”¨çš„æµ‹è¯•æ¡†æ¶</span></div><div class="line">    frameworks: [<span class="string">'mocha'</span>],</div><div class="line"></div><div class="line">    <span class="comment">// æµ‹è¯•æ–‡ä»¶</span></div><div class="line">    files: [</div><div class="line">      <span class="string">'test/**/*.js'</span></div><div class="line">    ],</div><div class="line"></div><div class="line">    <span class="comment">// å¤„ç†æµ‹è¯•æ–‡ä»¶</span></div><div class="line">    preprocessors: &#123;</div><div class="line">      <span class="string">'test/**/*.js'</span>: [<span class="string">'webpack'</span>, <span class="string">'sourcemap'</span>]</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// æµ‹è¯•æ—¥å¿—æ ¼å¼</span></div><div class="line">    reporters: [<span class="string">'mocha'</span>, <span class="string">'coverage'</span>],</div><div class="line"></div><div class="line">    <span class="comment">// ä¸æ˜¾ç¤º `webpack` æ‰“åŒ…æ—¥å¿—ä¿¡æ¯</span></div><div class="line">    webpackServer: &#123;</div><div class="line">      <span class="attr">noInfo</span>: <span class="literal">true</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// karma æ’ä»¶</span></div><div class="line">    plugins: [</div><div class="line">      <span class="string">'karma-coverage'</span>,</div><div class="line">      <span class="string">'karma-webpack'</span>,</div><div class="line">      <span class="string">'karma-mocha'</span>,</div><div class="line">      <span class="comment">// 'karma-chai',</span></div><div class="line">      <span class="string">'karma-phantomjs-launcher'</span>,</div><div class="line">      <span class="string">'karma-sourcemap-loader'</span>,</div><div class="line">      <span class="string">'karma-mocha-reporter'</span></div><div class="line">    ],</div><div class="line"></div><div class="line">    <span class="comment">// `webpack` é…ç½®</span></div><div class="line">    webpack: webpackConfig,</div><div class="line"></div><div class="line">    <span class="comment">// karma æœåŠ¡å™¨çš„ç›‘å¬ç«¯å£</span></div><div class="line">    port: <span class="number">9876</span>,</div><div class="line">    <span class="comment">// è¾“å‡ºæ—¥å¿—ä¸ºå½©è‰²</span></div><div class="line">    colors: <span class="literal">true</span>,</div><div class="line">    <span class="comment">// è‡ªåŠ¨ç›‘æµ‹æµ‹è¯•æ–‡ä»¶å†…å®¹</span></div><div class="line">    autoWatch: <span class="literal">false</span>,</div><div class="line">    <span class="comment">// æµ‹è¯•æ‰€ç”¨å¹³å°</span></div><div class="line">    browsers: [<span class="string">'PhantomJS'</span>],</div><div class="line">    <span class="comment">// åªè¿è¡Œä¸€æ¬¡</span></div><div class="line">    singleRun: <span class="literal">true</span>,</div><div class="line"></div><div class="line">    <span class="comment">// ä»£ç è¦†ç›–ç‡æ—¥å¿—</span></div><div class="line">    coverageReporter: &#123;</div><div class="line">      <span class="attr">reporters</span>: [</div><div class="line">        &#123; <span class="attr">type</span>: <span class="string">'lcov'</span>, <span class="attr">dir</span>: <span class="string">'coverage'</span>, <span class="attr">subdir</span>: <span class="string">'.'</span> &#125;,</div><div class="line">        &#123; <span class="attr">type</span>: <span class="string">'text-summary'</span>, <span class="attr">dir</span>: <span class="string">'coverage'</span>, <span class="attr">subdir</span>: <span class="string">'.'</span> &#125;</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹ <code>preprocessors</code>ï¼Œéœ€è¦å¯¹ç¼–å†™çš„æµ‹è¯•ä»£ç ä½¿ç”¨ <code>webpack</code> é¢„å…ˆå¤„ç†ã€‚</p><p><code>coverage</code> ä¸€å®šè¦åœ¨ <code>reporters</code> äº§ç”Ÿæ—¥å¿—æ—¶ä½¿ç”¨ï¼Œ</p><p>åœ¨è¿™ä¹‹å‰ä½¿ç”¨ï¼Œä¼šå°† <code>webpack</code> è½¬åŒ–çš„ä»£ç ä¹ŸåŠ å…¥è¿›å»ï¼Œå½±å“æµ‹è¯•è¦†ç›–ç‡ã€‚</p><p>å…³äºæµ‹è¯•è¦†ç›–ç‡ä¸å‡†ç¡®ä¹Ÿå¯ä»¥æŸ¥çœ‹è¿™é‡Œçš„è®¨è®º <a href="https://github.com/webpack/karma-webpack/issues/21">code coverage with karma-coverage</a>ã€‚</p><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>ä»¥ä¸Šä»£ç éƒ½æ˜¯ç”¨ <code>es6</code> ç¼–å†™ï¼ŒåŒ…æ‹¬é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥å¿…é¡»å€ŸåŠ© <code>babel</code> è¿è¡Œã€‚</p><figure class="highlight json"><figcaption><span>.babelrc</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"presets"</span>: [<span class="string">"es2015"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><code>babel</code> é…ç½®ï¼Œæ ¹æ®ä½ é¡¹ç›®æŠ€æœ¯æ ˆä¿®æ”¹ã€‚</p><p>è¿è¡Œ <code>karma</code>ï¼Œå€ŸåŠ© <code>babel-register</code>ã€‚</p><figure class="highlight"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">"scripts": &#123;</div><div class="line">  "test": "node -r babel-register ./node_modules/.bin/karma start karma.config.js"</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä»¥ä¸Šï¼Œå‘½ä»¤è¡Œæ‰§è¡Œ <code>npm run test</code>ã€‚</p><h3 id="é›†æˆæµ‹è¯•"><a href="#é›†æˆæµ‹è¯•" class="headerlink" title="é›†æˆæµ‹è¯•"></a>é›†æˆæµ‹è¯•</h3><p>å¼€æºä»“åº“æ¨èä½¿ç”¨ <code>travis-ci</code></p><figure class="highlight yml"><figcaption><span>.travis.yml</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="attr">sudo:</span> <span class="literal">false</span></div><div class="line"><span class="attr">language:</span> node_js</div><div class="line"><span class="attr">node_js:</span></div><div class="line"><span class="bullet">  -</span> <span class="string">'node'</span></div><div class="line"></div><div class="line"><span class="attr">cache:</span></div><div class="line"><span class="attr">  directories:</span></div><div class="line"><span class="bullet">    -</span> node_modules</div><div class="line"></div><div class="line"><span class="attr">install:</span></div><div class="line"><span class="bullet">  -</span> npm install</div><div class="line"></div><div class="line"><span class="attr">script:</span></div><div class="line"><span class="bullet">  -</span> npm run test</div><div class="line"></div><div class="line"><span class="attr">os:</span></div><div class="line"><span class="bullet">  -</span> osx</div></pre></td></tr></table></figure><p>ç§æœ‰ä»“åº“çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ Jenkins(<a href="https://jenkins.io/" target="_blank" rel="external">https://jenkins.io/</a>) è‡ªå·±æ­å»ºä¸€ä¸ªã€‚</p><hr><h3 id="æŠ€æœ¯æ”¯æŒ"><a href="#æŠ€æœ¯æ”¯æŒ" class="headerlink" title="æŠ€æœ¯æ”¯æŒ"></a>æŠ€æœ¯æ”¯æŒ</h3><p>å¯å‚è€ƒ <a href="https://github.com/xwartz/webpack-karma-mocha">demo</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¥æƒ³å½“å¹´åœ¨å‰å…¬å¸ï¼Œä¸‰ä¸ªäººçš„æ—¶å€™å†™å•å…ƒæµ‹è¯•ï¼Œä¸¤ä¸ªäººçš„æ—¶å€™æå‰åç«¯åˆ†ç¦»ï¼Œä¸€ä¸ªäººçš„æ—¶å€™ç©æ¡Œé¢åº”ç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å‰ç«¯å·¥ç¨‹" scheme="http://github.com/xwartz/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/"/>
    
      <category term="å•å…ƒæµ‹è¯•" scheme="http://github.com/xwartz/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
</feed>
